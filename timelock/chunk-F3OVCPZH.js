import{h as W}from"./chunk-AB7ESRYX.js";import{a as I}from"./chunk-JFR446LH.js";import{C as P,h as S}from"./chunk-VOG7M7LN.js";import{Ab as C,Ca as c,Cb as f,Na as h,Ra as u,Tb as l,_ as k,c as w,cb as m,da as _,db as s,ea as a,eb as p,lc as U,mb as v,mc as y,nb as x,ob as r,qc as E,sb as D,tb as b,ub as V,xc as O,yc as M,zb as g}from"./chunk-L2PMUJ2L.js";var F=["taskEditor"];function N(d,i){if(d&1&&(s(0,"div",8)(1,"div",9),g(2,"\u{1F4C5}"),p(),s(3,"h3"),g(4),p(),s(5,"p"),g(6),p()()),d&2){let e=r();c(4),C(e.t().noUpcomingTasks),c(2),C(e.t().noUpcomingTasksDescription)}}function $(d,i){if(d&1){let e=v();s(0,"app-todo-item",22),x("toggle",function(t){_(e);let o=r(3);return a(o.onToggleTodo(t))})("delete",function(t){_(e);let o=r(3);return a(o.onDeleteTodo(t))})("archive",function(t){_(e);let o=r(3);return a(o.onArchiveTodo(t))})("unarchive",function(t){_(e);let o=r(3);return a(o.onUnarchiveTodo(t))})("update",function(t){_(e);let o=r(3);return a(o.onUpdateTodo(t))})("addSubtaskEvent",function(t){_(e);let o=r(3);return a(o.onAddSubtask(t))})("toggleExpanded",function(t){_(e);let o=r(3);return a(o.onToggleExpanded(t))})("subtaskDrop",function(t){_(e);let o=r(3);return a(o.onSubtaskDrop(t))})("edit",function(){let t=_(e).$implicit,o=r(3);return a(o.openTaskEditorById(t.id))}),p()}if(d&2){let e=i.$implicit,n=r(3);m("todo",e)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function z(d,i){if(d&1&&(s(0,"div",17)(1,"h2",18)(2,"span",19),g(3,"\u26A0\uFE0F"),p(),g(4),p(),s(5,"div",20),u(6,$,1,2,"app-todo-item",21),p()()),d&2){let e=r(2);c(4),f(" ",e.t().overdue," (",e.overdueTasks().length,") "),c(2),m("ngForOf",e.overdueTasks())}}function H(d,i){if(d&1){let e=v();s(0,"app-todo-item",22),x("toggle",function(t){_(e);let o=r(3);return a(o.onToggleTodo(t))})("delete",function(t){_(e);let o=r(3);return a(o.onDeleteTodo(t))})("archive",function(t){_(e);let o=r(3);return a(o.onArchiveTodo(t))})("unarchive",function(t){_(e);let o=r(3);return a(o.onUnarchiveTodo(t))})("update",function(t){_(e);let o=r(3);return a(o.onUpdateTodo(t))})("addSubtaskEvent",function(t){_(e);let o=r(3);return a(o.onAddSubtask(t))})("toggleExpanded",function(t){_(e);let o=r(3);return a(o.onToggleExpanded(t))})("subtaskDrop",function(t){_(e);let o=r(3);return a(o.onSubtaskDrop(t))})("edit",function(){let t=_(e).$implicit,o=r(3);return a(o.openTaskEditorById(t.id))}),p()}if(d&2){let e=i.$implicit,n=r(3);m("todo",e)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function B(d,i){if(d&1&&(s(0,"div",23)(1,"h2",18)(2,"span",19),g(3,"\u{1F3AF}"),p(),g(4),p(),s(5,"div",20),u(6,H,1,2,"app-todo-item",21),p()()),d&2){let e=r(2);c(4),f(" ",e.t().today," (",e.todayTasks().length,") "),c(2),m("ngForOf",e.todayTasks())}}function Q(d,i){if(d&1){let e=v();s(0,"app-todo-item",22),x("toggle",function(t){_(e);let o=r(3);return a(o.onToggleTodo(t))})("delete",function(t){_(e);let o=r(3);return a(o.onDeleteTodo(t))})("archive",function(t){_(e);let o=r(3);return a(o.onArchiveTodo(t))})("unarchive",function(t){_(e);let o=r(3);return a(o.onUnarchiveTodo(t))})("update",function(t){_(e);let o=r(3);return a(o.onUpdateTodo(t))})("addSubtaskEvent",function(t){_(e);let o=r(3);return a(o.onAddSubtask(t))})("toggleExpanded",function(t){_(e);let o=r(3);return a(o.onToggleExpanded(t))})("subtaskDrop",function(t){_(e);let o=r(3);return a(o.onSubtaskDrop(t))})("edit",function(){let t=_(e).$implicit,o=r(3);return a(o.openTaskEditorById(t.id))}),p()}if(d&2){let e=i.$implicit,n=r(3);m("todo",e)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function j(d,i){if(d&1&&(s(0,"div",24)(1,"h2",18)(2,"span",19),g(3,"\u{1F4C5}"),p(),g(4),p(),s(5,"div",20),u(6,Q,1,2,"app-todo-item",21),p()()),d&2){let e=r(2);c(4),f(" ",e.t().tomorrow," (",e.tomorrowTasks().length,") "),c(2),m("ngForOf",e.tomorrowTasks())}}function R(d,i){if(d&1){let e=v();s(0,"app-todo-item",22),x("toggle",function(t){_(e);let o=r(3);return a(o.onToggleTodo(t))})("delete",function(t){_(e);let o=r(3);return a(o.onDeleteTodo(t))})("archive",function(t){_(e);let o=r(3);return a(o.onArchiveTodo(t))})("unarchive",function(t){_(e);let o=r(3);return a(o.onUnarchiveTodo(t))})("update",function(t){_(e);let o=r(3);return a(o.onUpdateTodo(t))})("addSubtaskEvent",function(t){_(e);let o=r(3);return a(o.onAddSubtask(t))})("toggleExpanded",function(t){_(e);let o=r(3);return a(o.onToggleExpanded(t))})("subtaskDrop",function(t){_(e);let o=r(3);return a(o.onSubtaskDrop(t))})("edit",function(){let t=_(e).$implicit,o=r(3);return a(o.openTaskEditorById(t.id))}),p()}if(d&2){let e=i.$implicit,n=r(3);m("todo",e)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function q(d,i){if(d&1&&(s(0,"div",25)(1,"h2",18)(2,"span",19),g(3,"\u{1F4C6}"),p(),g(4),p(),s(5,"div",20),u(6,R,1,2,"app-todo-item",21),p()()),d&2){let e=r(2);c(4),f(" ",e.t().thisWeek," (",e.thisWeekTasks().length,") "),c(2),m("ngForOf",e.thisWeekTasks())}}function G(d,i){if(d&1){let e=v();s(0,"app-todo-item",22),x("toggle",function(t){_(e);let o=r(3);return a(o.onToggleTodo(t))})("delete",function(t){_(e);let o=r(3);return a(o.onDeleteTodo(t))})("archive",function(t){_(e);let o=r(3);return a(o.onArchiveTodo(t))})("unarchive",function(t){_(e);let o=r(3);return a(o.onUnarchiveTodo(t))})("update",function(t){_(e);let o=r(3);return a(o.onUpdateTodo(t))})("addSubtaskEvent",function(t){_(e);let o=r(3);return a(o.onAddSubtask(t))})("toggleExpanded",function(t){_(e);let o=r(3);return a(o.onToggleExpanded(t))})("subtaskDrop",function(t){_(e);let o=r(3);return a(o.onSubtaskDrop(t))})("edit",function(){let t=_(e).$implicit,o=r(3);return a(o.openTaskEditorById(t.id))}),p()}if(d&2){let e=i.$implicit,n=r(3);m("todo",e)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function J(d,i){if(d&1&&(s(0,"div",26)(1,"h2",18)(2,"span",19),g(3,"\u{1F5D3}\uFE0F"),p(),g(4),p(),s(5,"div",20),u(6,G,1,2,"app-todo-item",21),p()()),d&2){let e=r(2);c(4),f(" ",e.t().nextWeek," (",e.nextWeekTasks().length,") "),c(2),m("ngForOf",e.nextWeekTasks())}}function K(d,i){if(d&1){let e=v();s(0,"app-todo-item",22),x("toggle",function(t){_(e);let o=r(3);return a(o.onToggleTodo(t))})("delete",function(t){_(e);let o=r(3);return a(o.onDeleteTodo(t))})("archive",function(t){_(e);let o=r(3);return a(o.onArchiveTodo(t))})("unarchive",function(t){_(e);let o=r(3);return a(o.onUnarchiveTodo(t))})("update",function(t){_(e);let o=r(3);return a(o.onUpdateTodo(t))})("addSubtaskEvent",function(t){_(e);let o=r(3);return a(o.onAddSubtask(t))})("toggleExpanded",function(t){_(e);let o=r(3);return a(o.onToggleExpanded(t))})("subtaskDrop",function(t){_(e);let o=r(3);return a(o.onSubtaskDrop(t))})("edit",function(){let t=_(e).$implicit,o=r(3);return a(o.openTaskEditorById(t.id))}),p()}if(d&2){let e=i.$implicit,n=r(3);m("todo",e)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function L(d,i){if(d&1&&(s(0,"div",27)(1,"h2",18)(2,"span",19),g(3,"\u{1F4C5}"),p(),g(4),p(),s(5,"div",20),u(6,K,1,2,"app-todo-item",21),p()()),d&2){let e=r(2);c(4),f(" ",e.t().later," (",e.laterTasks().length,") "),c(2),m("ngForOf",e.laterTasks())}}function X(d,i){if(d&1&&(s(0,"div",10),u(1,z,7,3,"div",11)(2,B,7,3,"div",12)(3,j,7,3,"div",13)(4,q,7,3,"div",14)(5,J,7,3,"div",15)(6,L,7,3,"div",16),p()),d&2){let e=r();c(),m("ngIf",e.overdueTasks().length>0),c(),m("ngIf",e.todayTasks().length>0),c(),m("ngIf",e.tomorrowTasks().length>0),c(),m("ngIf",e.thisWeekTasks().length>0),c(),m("ngIf",e.nextWeekTasks().length>0),c(),m("ngIf",e.laterTasks().length>0)}}var A=class d{todoService=k(P);projectService=k(O);translationService=k(M);taskEditor;editingTodo=null;t=l(()=>({upcomingTasks:this.translationService.translate("upcoming.title"),subtitle:this.translationService.translate("upcoming.subtitle"),noUpcomingTasks:this.translationService.translate("upcoming.noUpcomingTasks"),noUpcomingTasksDescription:this.translationService.translate("upcoming.noUpcomingTasksDescription"),overdue:this.translationService.translate("upcoming.overdue"),today:this.translationService.translate("time.today"),tomorrow:this.translationService.translate("time.tomorrow"),thisWeek:this.translationService.translate("upcoming.thisWeek"),nextWeek:this.translationService.translate("upcoming.nextWeek"),later:this.translationService.translate("upcoming.later")}));activeTasks=l(()=>this.flattenTodos(this.todoService.todos()).filter(e=>!e.archived&&!e.completed));upcomingTasks=l(()=>this.activeTasks().filter(i=>i.dueDate!==void 0).sort((i,e)=>{let n=new Date(i.dueDate),t=new Date(e.dueDate);return n.getTime()-t.getTime()}));overdueTasks=l(()=>{let i=new Date;return i.setHours(23,59,59,999),this.upcomingTasks().filter(e=>e.dueDate?new Date(e.dueDate)<i:!1)});todayTasks=l(()=>{let i=new Date,e=new Date(i);e.setHours(0,0,0,0);let n=new Date(i);return n.setHours(23,59,59,999),this.upcomingTasks().filter(t=>{if(this.overdueTasks().includes(t))return!1;if(t.dueDate){let o=new Date(t.dueDate);return o>=e&&o<=n}return!1})});tomorrowTasks=l(()=>{let i=new Date;i.setDate(i.getDate()+1);let e=new Date(i);e.setHours(0,0,0,0);let n=new Date(i);return n.setHours(23,59,59,999),this.upcomingTasks().filter(t=>{if(this.overdueTasks().includes(t)||this.todayTasks().includes(t))return!1;if(t.dueDate){let o=new Date(t.dueDate);return o>=e&&o<=n}return!1})});thisWeekTasks=l(()=>{let i=new Date,e=new Date;e.setDate(i.getDate()+2),e.setHours(0,0,0,0);let n=new Date(i),t=(7-i.getDay())%7;return n.setDate(i.getDate()+t),n.setHours(23,59,59,999),this.upcomingTasks().filter(o=>{if(this.overdueTasks().includes(o)||this.todayTasks().includes(o)||this.tomorrowTasks().includes(o))return!1;if(o.dueDate){let T=new Date(o.dueDate);return T>=e&&T<=n}return!1})});nextWeekTasks=l(()=>{let i=new Date,e=(7-i.getDay())%7,n=new Date(i);n.setDate(i.getDate()+e+1),n.setHours(0,0,0,0);let t=new Date(n);return t.setDate(n.getDate()+6),t.setHours(23,59,59,999),this.upcomingTasks().filter(o=>{if(o.dueDate){let T=new Date(o.dueDate);return T>=n&&T<=t}return!1})});laterTasks=l(()=>{let i=new Date,e=(7-i.getDay())%7,n=new Date(i);return n.setDate(i.getDate()+e+8),n.setHours(0,0,0,0),this.upcomingTasks().filter(t=>t.dueDate?new Date(t.dueDate)>=n:!1)});flattenTodos(i){let e=[];for(let n of i)e.push(n),n.subtasks.length>0&&e.push(...this.flattenTodos(n.subtasks));return e}onToggleTodo(i){return w(this,null,function*(){yield this.todoService.toggleTodo(i)})}openTaskEditorById(i){let n=this.flattenTodos(this.todoService.todos()).find(t=>t.id===i);n&&(this.editingTodo=n,this.taskEditor.open())}onEditTodo(i){}onSaveTask(i){this.editingTodo&&this.todoService.updateTodo(this.editingTodo.id,i),this.closeEditor()}closeEditor(){this.editingTodo=null,this.taskEditor&&this.taskEditor.closeAndReset()}onUpdateTodo(i){this.todoService.updateTodo(i.id,i.updates)}onDeleteTodo(i){this.todoService.deleteTodo(i)}onArchiveTodo(i){this.todoService.archiveTodo(i)}onUnarchiveTodo(i){this.todoService.unarchiveTodo(i)}onAddSubtask(i){this.todoService.addSubtask(i.parentId,i.subtaskData)}onSubtaskDrop(i){let{parentId:e,event:n}=i,t=n.container.data.map(o=>o.id);this.todoService.reorderSubtasks(e,t)}onToggleExpanded(i){this.todoService.toggleExpanded(i)}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=h({type:d,selectors:[["app-upcoming"]],viewQuery:function(e,n){if(e&1&&D(F,5),e&2){let t;b(t=V())&&(n.taskEditor=t.first)}},decls:11,vars:6,consts:[["taskEditor",""],[1,"upcoming-container"],[1,"upcoming-header"],[1,"upcoming-subtitle"],[1,"upcoming-content"],["class","no-tasks",4,"ngIf"],["class","upcoming-groups",4,"ngIf"],[3,"save","close","todo","isSubtask"],[1,"no-tasks"],[1,"no-tasks-icon"],[1,"upcoming-groups"],["class","upcoming-group overdue",4,"ngIf"],["class","upcoming-group today",4,"ngIf"],["class","upcoming-group tomorrow",4,"ngIf"],["class","upcoming-group this-week",4,"ngIf"],["class","upcoming-group next-week",4,"ngIf"],["class","upcoming-group later",4,"ngIf"],[1,"upcoming-group","overdue"],[1,"group-title"],[1,"group-icon"],[1,"tasks-list"],[3,"todo","highlightedTaskId","toggle","delete","archive","unarchive","update","addSubtaskEvent","toggleExpanded","subtaskDrop","edit",4,"ngFor","ngForOf"],[3,"toggle","delete","archive","unarchive","update","addSubtaskEvent","toggleExpanded","subtaskDrop","edit","todo","highlightedTaskId"],[1,"upcoming-group","today"],[1,"upcoming-group","tomorrow"],[1,"upcoming-group","this-week"],[1,"upcoming-group","next-week"],[1,"upcoming-group","later"]],template:function(e,n){if(e&1){let t=v();s(0,"div",1)(1,"div",2)(2,"h1"),g(3),p(),s(4,"p",3),g(5),p()(),s(6,"div",4),u(7,N,7,2,"div",5)(8,X,7,6,"div",6),p()(),s(9,"app-task-editor",7,0),x("save",function(T){return _(t),a(n.onSaveTask(T))})("close",function(){return _(t),a(n.closeEditor())}),p()}e&2&&(c(3),C(n.t().upcomingTasks),c(2),C(n.t().subtitle),c(2),m("ngIf",n.upcomingTasks().length===0),c(),m("ngIf",n.upcomingTasks().length>0),c(),m("todo",n.editingTodo)("isSubtask",!1))},dependencies:[E,U,y,S,W,I],styles:[".upcoming-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;min-height:100vh}.upcoming-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.upcoming-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--text-primary);margin:0 0 .5rem}.upcoming-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:0}.upcoming-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.no-tasks[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.no-tasks-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.no-tasks[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0 0 .5rem}.no-tasks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0}.upcoming-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.upcoming-group[_ngcontent-%COMP%]{background:var(--background-secondary);border-radius:12px;padding:1.5rem;border:1px solid var(--border-color)}.group-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.25rem;font-weight:600;margin:0 0 1rem;color:var(--text-primary)}.group-icon[_ngcontent-%COMP%]{font-size:1.1rem}.upcoming-group.overdue[_ngcontent-%COMP%]{border-left:4px solid #ef4444;background:linear-gradient(135deg,#fef2f2 0%,var(--background-secondary) 100%)}.upcoming-group.overdue[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#dc2626}.upcoming-group.today[_ngcontent-%COMP%]{border-left:4px solid #10b981;background:linear-gradient(135deg,#f0fdf4 0%,var(--background-secondary) 100%)}.upcoming-group.today[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#059669}.upcoming-group.tomorrow[_ngcontent-%COMP%]{border-left:4px solid #3b82f6;background:linear-gradient(135deg,#eff6ff 0%,var(--background-secondary) 100%)}.upcoming-group.tomorrow[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#2563eb}.upcoming-group.this-week[_ngcontent-%COMP%]{border-left:4px solid #8b5cf6;background:linear-gradient(135deg,#faf5ff 0%,var(--background-secondary) 100%)}.upcoming-group.this-week[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#7c3aed}.upcoming-group.next-week[_ngcontent-%COMP%]{border-left:4px solid #06b6d4;background:linear-gradient(135deg,#ecfeff 0%,var(--background-secondary) 100%)}.upcoming-group.next-week[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#0891b2}.upcoming-group.later[_ngcontent-%COMP%]{border-left:4px solid #6b7280;background:linear-gradient(135deg,#f9fafb 0%,var(--background-secondary) 100%)}.upcoming-group.later[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#4b5563}.tasks-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}@media (max-width: 768px){.upcoming-container[_ngcontent-%COMP%]{padding:1rem}.upcoming-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.upcoming-subtitle[_ngcontent-%COMP%]{font-size:1rem}.upcoming-group[_ngcontent-%COMP%]{padding:1rem}.group-title[_ngcontent-%COMP%]{font-size:1.1rem}.no-tasks[_ngcontent-%COMP%]{padding:3rem 1rem}.no-tasks-icon[_ngcontent-%COMP%]{font-size:3rem}}@media (prefers-color-scheme: dark){.upcoming-group.overdue[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(239,68,68,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.today[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(16,185,129,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.tomorrow[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(59,130,246,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.this-week[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(139,92,246,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.next-week[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(6,182,212,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.later[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(107,114,128,.1) 0%,var(--background-secondary) 100%)}}"]})};export{A as UpcomingComponent};
