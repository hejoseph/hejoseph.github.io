import{e as O}from"./chunk-AD7HTWR5.js";import{a as S}from"./chunk-FTU4UMP5.js";import{q as y}from"./chunk-TX4AGZX7.js";import{B as f,D as r,E as d,Oa as l,R as c,Va as D,W as C,Wa as V,Za as b,_ as u,gb as E,ha as m,ia as s,ib as U,ja as p,na as v,oa as x,pa as _,qa as k,ra as w,sa as h,xa as g,za as T}from"./chunk-6W7TNUXU.js";var I=["taskEditor"];function F(a,i){a&1&&(s(0,"div",8)(1,"div",9),g(2,"\u{1F4C5}"),p(),s(3,"h3"),g(4,"No upcoming tasks"),p(),s(5,"p"),g(6,"You're all caught up! No tasks are due in the next 7 days."),p()())}function A(a,i){if(a&1){let t=v();s(0,"app-todo-item",22),x("toggle",function(e){r(t);let o=_(3);return d(o.onToggleTodo(e))})("delete",function(e){r(t);let o=_(3);return d(o.onDeleteTodo(e))})("archive",function(e){r(t);let o=_(3);return d(o.onArchiveTodo(e))})("unarchive",function(e){r(t);let o=_(3);return d(o.onUnarchiveTodo(e))})("update",function(e){r(t);let o=_(3);return d(o.onUpdateTodo(e))})("addSubtaskEvent",function(e){r(t);let o=_(3);return d(o.onAddSubtask(e))})("toggleExpanded",function(e){r(t);let o=_(3);return d(o.onToggleExpanded(e))})("subtaskDrop",function(e){r(t);let o=_(3);return d(o.onSubtaskDrop(e))})("edit",function(){let e=r(t).$implicit,o=_(3);return d(o.openTaskEditorById(e.id))}),p()}if(a&2){let t=i.$implicit,n=_(3);m("todo",t)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function N(a,i){if(a&1&&(s(0,"div",17)(1,"h2",18)(2,"span",19),g(3,"\u26A0\uFE0F"),p(),g(4),p(),s(5,"div",20),u(6,A,1,2,"app-todo-item",21),p()()),a&2){let t=_(2);c(4),T(" Overdue (",t.overdueTasks().length,") "),c(2),m("ngForOf",t.overdueTasks())}}function z(a,i){if(a&1){let t=v();s(0,"app-todo-item",22),x("toggle",function(e){r(t);let o=_(3);return d(o.onToggleTodo(e))})("delete",function(e){r(t);let o=_(3);return d(o.onDeleteTodo(e))})("archive",function(e){r(t);let o=_(3);return d(o.onArchiveTodo(e))})("unarchive",function(e){r(t);let o=_(3);return d(o.onUnarchiveTodo(e))})("update",function(e){r(t);let o=_(3);return d(o.onUpdateTodo(e))})("addSubtaskEvent",function(e){r(t);let o=_(3);return d(o.onAddSubtask(e))})("toggleExpanded",function(e){r(t);let o=_(3);return d(o.onToggleExpanded(e))})("subtaskDrop",function(e){r(t);let o=_(3);return d(o.onSubtaskDrop(e))})("edit",function(){let e=r(t).$implicit,o=_(3);return d(o.openTaskEditorById(e.id))}),p()}if(a&2){let t=i.$implicit,n=_(3);m("todo",t)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function W(a,i){if(a&1&&(s(0,"div",23)(1,"h2",18)(2,"span",19),g(3,"\u{1F3AF}"),p(),g(4),p(),s(5,"div",20),u(6,z,1,2,"app-todo-item",21),p()()),a&2){let t=_(2);c(4),T(" Today (",t.todayTasks().length,") "),c(2),m("ngForOf",t.todayTasks())}}function $(a,i){if(a&1){let t=v();s(0,"app-todo-item",22),x("toggle",function(e){r(t);let o=_(3);return d(o.onToggleTodo(e))})("delete",function(e){r(t);let o=_(3);return d(o.onDeleteTodo(e))})("archive",function(e){r(t);let o=_(3);return d(o.onArchiveTodo(e))})("unarchive",function(e){r(t);let o=_(3);return d(o.onUnarchiveTodo(e))})("update",function(e){r(t);let o=_(3);return d(o.onUpdateTodo(e))})("addSubtaskEvent",function(e){r(t);let o=_(3);return d(o.onAddSubtask(e))})("toggleExpanded",function(e){r(t);let o=_(3);return d(o.onToggleExpanded(e))})("subtaskDrop",function(e){r(t);let o=_(3);return d(o.onSubtaskDrop(e))})("edit",function(){let e=r(t).$implicit,o=_(3);return d(o.openTaskEditorById(e.id))}),p()}if(a&2){let t=i.$implicit,n=_(3);m("todo",t)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function H(a,i){if(a&1&&(s(0,"div",24)(1,"h2",18)(2,"span",19),g(3,"\u{1F4C5}"),p(),g(4),p(),s(5,"div",20),u(6,$,1,2,"app-todo-item",21),p()()),a&2){let t=_(2);c(4),T(" Tomorrow (",t.tomorrowTasks().length,") "),c(2),m("ngForOf",t.tomorrowTasks())}}function B(a,i){if(a&1){let t=v();s(0,"app-todo-item",22),x("toggle",function(e){r(t);let o=_(3);return d(o.onToggleTodo(e))})("delete",function(e){r(t);let o=_(3);return d(o.onDeleteTodo(e))})("archive",function(e){r(t);let o=_(3);return d(o.onArchiveTodo(e))})("unarchive",function(e){r(t);let o=_(3);return d(o.onUnarchiveTodo(e))})("update",function(e){r(t);let o=_(3);return d(o.onUpdateTodo(e))})("addSubtaskEvent",function(e){r(t);let o=_(3);return d(o.onAddSubtask(e))})("toggleExpanded",function(e){r(t);let o=_(3);return d(o.onToggleExpanded(e))})("subtaskDrop",function(e){r(t);let o=_(3);return d(o.onSubtaskDrop(e))})("edit",function(){let e=r(t).$implicit,o=_(3);return d(o.openTaskEditorById(e.id))}),p()}if(a&2){let t=i.$implicit,n=_(3);m("todo",t)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function Q(a,i){if(a&1&&(s(0,"div",25)(1,"h2",18)(2,"span",19),g(3,"\u{1F4C6}"),p(),g(4),p(),s(5,"div",20),u(6,B,1,2,"app-todo-item",21),p()()),a&2){let t=_(2);c(4),T(" This Week (",t.thisWeekTasks().length,") "),c(2),m("ngForOf",t.thisWeekTasks())}}function j(a,i){if(a&1){let t=v();s(0,"app-todo-item",22),x("toggle",function(e){r(t);let o=_(3);return d(o.onToggleTodo(e))})("delete",function(e){r(t);let o=_(3);return d(o.onDeleteTodo(e))})("archive",function(e){r(t);let o=_(3);return d(o.onArchiveTodo(e))})("unarchive",function(e){r(t);let o=_(3);return d(o.onUnarchiveTodo(e))})("update",function(e){r(t);let o=_(3);return d(o.onUpdateTodo(e))})("addSubtaskEvent",function(e){r(t);let o=_(3);return d(o.onAddSubtask(e))})("toggleExpanded",function(e){r(t);let o=_(3);return d(o.onToggleExpanded(e))})("subtaskDrop",function(e){r(t);let o=_(3);return d(o.onSubtaskDrop(e))})("edit",function(){let e=r(t).$implicit,o=_(3);return d(o.openTaskEditorById(e.id))}),p()}if(a&2){let t=i.$implicit,n=_(3);m("todo",t)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function R(a,i){if(a&1&&(s(0,"div",26)(1,"h2",18)(2,"span",19),g(3,"\u{1F5D3}\uFE0F"),p(),g(4),p(),s(5,"div",20),u(6,j,1,2,"app-todo-item",21),p()()),a&2){let t=_(2);c(4),T(" Next Week (",t.nextWeekTasks().length,") "),c(2),m("ngForOf",t.nextWeekTasks())}}function q(a,i){if(a&1){let t=v();s(0,"app-todo-item",22),x("toggle",function(e){r(t);let o=_(3);return d(o.onToggleTodo(e))})("delete",function(e){r(t);let o=_(3);return d(o.onDeleteTodo(e))})("archive",function(e){r(t);let o=_(3);return d(o.onArchiveTodo(e))})("unarchive",function(e){r(t);let o=_(3);return d(o.onUnarchiveTodo(e))})("update",function(e){r(t);let o=_(3);return d(o.onUpdateTodo(e))})("addSubtaskEvent",function(e){r(t);let o=_(3);return d(o.onAddSubtask(e))})("toggleExpanded",function(e){r(t);let o=_(3);return d(o.onToggleExpanded(e))})("subtaskDrop",function(e){r(t);let o=_(3);return d(o.onSubtaskDrop(e))})("edit",function(){let e=r(t).$implicit,o=_(3);return d(o.openTaskEditorById(e.id))}),p()}if(a&2){let t=i.$implicit,n=_(3);m("todo",t)("highlightedTaskId",(n.editingTodo==null?null:n.editingTodo.id)||null)}}function L(a,i){if(a&1&&(s(0,"div",27)(1,"h2",18)(2,"span",19),g(3,"\u{1F4C5}"),p(),g(4),p(),s(5,"div",20),u(6,q,1,2,"app-todo-item",21),p()()),a&2){let t=_(2);c(4),T(" Later (",t.laterTasks().length,") "),c(2),m("ngForOf",t.laterTasks())}}function Y(a,i){if(a&1&&(s(0,"div",10),u(1,N,7,2,"div",11)(2,W,7,2,"div",12)(3,H,7,2,"div",13)(4,Q,7,2,"div",14)(5,R,7,2,"div",15)(6,L,7,2,"div",16),p()),a&2){let t=_();c(),m("ngIf",t.overdueTasks().length>0),c(),m("ngIf",t.todayTasks().length>0),c(),m("ngIf",t.tomorrowTasks().length>0),c(),m("ngIf",t.thisWeekTasks().length>0),c(),m("ngIf",t.nextWeekTasks().length>0),c(),m("ngIf",t.laterTasks().length>0)}}var M=class a{todoService=f(y);projectService=f(U);taskEditor;editingTodo=null;activeTasks=l(()=>this.flattenTodos(this.todoService.todos()).filter(t=>!t.archived&&!t.completed));upcomingTasks=l(()=>this.activeTasks().filter(i=>i.dueDate!==void 0).sort((i,t)=>{let n=new Date(i.dueDate),e=new Date(t.dueDate);return n.getTime()-e.getTime()}));overdueTasks=l(()=>{let i=new Date;return i.setHours(23,59,59,999),this.upcomingTasks().filter(t=>t.dueDate?new Date(t.dueDate)<i:!1)});todayTasks=l(()=>{let i=new Date,t=new Date(i);t.setHours(0,0,0,0);let n=new Date(i);return n.setHours(23,59,59,999),this.upcomingTasks().filter(e=>{if(this.overdueTasks().includes(e))return!1;if(e.dueDate){let o=new Date(e.dueDate);return o>=t&&o<=n}return!1})});tomorrowTasks=l(()=>{let i=new Date;i.setDate(i.getDate()+1);let t=new Date(i);t.setHours(0,0,0,0);let n=new Date(i);return n.setHours(23,59,59,999),this.upcomingTasks().filter(e=>{if(this.overdueTasks().includes(e)||this.todayTasks().includes(e))return!1;if(e.dueDate){let o=new Date(e.dueDate);return o>=t&&o<=n}return!1})});thisWeekTasks=l(()=>{let i=new Date,t=new Date;t.setDate(i.getDate()+2),t.setHours(0,0,0,0);let n=new Date;return n.setDate(i.getDate()+7),n.setHours(23,59,59,999),this.upcomingTasks().filter(e=>{if(this.overdueTasks().includes(e)||this.todayTasks().includes(e)||this.tomorrowTasks().includes(e))return!1;if(e.dueDate){let o=new Date(e.dueDate);return o>=t&&o<=n}return!1})});nextWeekTasks=l(()=>{let i=new Date,t=new Date;t.setDate(i.getDate()+8),t.setHours(0,0,0,0);let n=new Date;return n.setDate(i.getDate()+14),n.setHours(23,59,59,999),this.upcomingTasks().filter(e=>{if(e.dueDate){let o=new Date(e.dueDate);return o>=t&&o<=n}return!1})});laterTasks=l(()=>{let i=new Date,t=new Date;return t.setDate(i.getDate()+15),t.setHours(0,0,0,0),this.upcomingTasks().filter(n=>n.dueDate?new Date(n.dueDate)>=t:!1)});flattenTodos(i){let t=[];for(let n of i)t.push(n),n.subtasks.length>0&&t.push(...this.flattenTodos(n.subtasks));return t}onToggleTodo(i){this.todoService.toggleTodo(i)}openTaskEditorById(i){let n=this.flattenTodos(this.todoService.todos()).find(e=>e.id===i);n&&(this.editingTodo=n,this.taskEditor.open())}onEditTodo(i){}onSaveTask(i){this.editingTodo&&this.todoService.updateTodo(this.editingTodo.id,i),this.closeEditor()}closeEditor(){this.editingTodo=null,this.taskEditor&&this.taskEditor.closeAndReset()}onUpdateTodo(i){this.todoService.updateTodo(i.id,i.updates)}onDeleteTodo(i){this.todoService.deleteTodo(i)}onArchiveTodo(i){this.todoService.archiveTodo(i)}onUnarchiveTodo(i){this.todoService.unarchiveTodo(i)}onAddSubtask(i){this.todoService.addSubtask(i.parentId,i.subtaskData)}onSubtaskDrop(i){let{parentId:t,event:n}=i,e=n.container.data.map(o=>o.id);this.todoService.reorderSubtasks(t,e)}onToggleExpanded(i){this.todoService.toggleExpanded(i)}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["app-upcoming"]],viewQuery:function(t,n){if(t&1&&k(I,5),t&2){let e;w(e=h())&&(n.taskEditor=e.first)}},decls:11,vars:4,consts:[["taskEditor",""],[1,"upcoming-container"],[1,"upcoming-header"],[1,"upcoming-subtitle"],[1,"upcoming-content"],["class","no-tasks",4,"ngIf"],["class","upcoming-groups",4,"ngIf"],[3,"save","close","todo","isSubtask"],[1,"no-tasks"],[1,"no-tasks-icon"],[1,"upcoming-groups"],["class","upcoming-group overdue",4,"ngIf"],["class","upcoming-group today",4,"ngIf"],["class","upcoming-group tomorrow",4,"ngIf"],["class","upcoming-group this-week",4,"ngIf"],["class","upcoming-group next-week",4,"ngIf"],["class","upcoming-group later",4,"ngIf"],[1,"upcoming-group","overdue"],[1,"group-title"],[1,"group-icon"],[1,"tasks-list"],[3,"todo","highlightedTaskId","toggle","delete","archive","unarchive","update","addSubtaskEvent","toggleExpanded","subtaskDrop","edit",4,"ngFor","ngForOf"],[3,"toggle","delete","archive","unarchive","update","addSubtaskEvent","toggleExpanded","subtaskDrop","edit","todo","highlightedTaskId"],[1,"upcoming-group","today"],[1,"upcoming-group","tomorrow"],[1,"upcoming-group","this-week"],[1,"upcoming-group","next-week"],[1,"upcoming-group","later"]],template:function(t,n){if(t&1){let e=v();s(0,"div",1)(1,"div",2)(2,"h1"),g(3,"Upcoming Tasks"),p(),s(4,"p",3),g(5,"All tasks with due dates, organized by timeline"),p()(),s(6,"div",4),u(7,F,7,0,"div",5)(8,Y,7,6,"div",6),p()(),s(9,"app-task-editor",7,0),x("save",function(P){return r(e),d(n.onSaveTask(P))})("close",function(){return r(e),d(n.closeEditor())}),p()}t&2&&(c(7),m("ngIf",n.upcomingTasks().length===0),c(),m("ngIf",n.upcomingTasks().length>0),c(),m("todo",n.editingTodo)("isSubtask",!1))},dependencies:[b,D,V,E,O,S],styles:[".upcoming-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;min-height:100vh}.upcoming-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.upcoming-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--text-primary);margin:0 0 .5rem}.upcoming-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:0}.upcoming-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.no-tasks[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.no-tasks-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.no-tasks[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0 0 .5rem}.no-tasks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0}.upcoming-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.upcoming-group[_ngcontent-%COMP%]{background:var(--background-secondary);border-radius:12px;padding:1.5rem;border:1px solid var(--border-color)}.group-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.25rem;font-weight:600;margin:0 0 1rem;color:var(--text-primary)}.group-icon[_ngcontent-%COMP%]{font-size:1.1rem}.upcoming-group.overdue[_ngcontent-%COMP%]{border-left:4px solid #ef4444;background:linear-gradient(135deg,#fef2f2 0%,var(--background-secondary) 100%)}.upcoming-group.overdue[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#dc2626}.upcoming-group.today[_ngcontent-%COMP%]{border-left:4px solid #10b981;background:linear-gradient(135deg,#f0fdf4 0%,var(--background-secondary) 100%)}.upcoming-group.today[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#059669}.upcoming-group.tomorrow[_ngcontent-%COMP%]{border-left:4px solid #3b82f6;background:linear-gradient(135deg,#eff6ff 0%,var(--background-secondary) 100%)}.upcoming-group.tomorrow[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#2563eb}.upcoming-group.this-week[_ngcontent-%COMP%]{border-left:4px solid #8b5cf6;background:linear-gradient(135deg,#faf5ff 0%,var(--background-secondary) 100%)}.upcoming-group.this-week[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#7c3aed}.upcoming-group.next-week[_ngcontent-%COMP%]{border-left:4px solid #06b6d4;background:linear-gradient(135deg,#ecfeff 0%,var(--background-secondary) 100%)}.upcoming-group.next-week[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#0891b2}.upcoming-group.later[_ngcontent-%COMP%]{border-left:4px solid #6b7280;background:linear-gradient(135deg,#f9fafb 0%,var(--background-secondary) 100%)}.upcoming-group.later[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#4b5563}.tasks-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}@media (max-width: 768px){.upcoming-container[_ngcontent-%COMP%]{padding:1rem}.upcoming-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.upcoming-subtitle[_ngcontent-%COMP%]{font-size:1rem}.upcoming-group[_ngcontent-%COMP%]{padding:1rem}.group-title[_ngcontent-%COMP%]{font-size:1.1rem}.no-tasks[_ngcontent-%COMP%]{padding:3rem 1rem}.no-tasks-icon[_ngcontent-%COMP%]{font-size:3rem}}@media (prefers-color-scheme: dark){.upcoming-group.overdue[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(239,68,68,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.today[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(16,185,129,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.tomorrow[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(59,130,246,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.this-week[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(139,92,246,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.next-week[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(6,182,212,.1) 0%,var(--background-secondary) 100%)}.upcoming-group.later[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(107,114,128,.1) 0%,var(--background-secondary) 100%)}}"]})};export{M as UpcomingComponent};
