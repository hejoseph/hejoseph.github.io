import{a as $,b as we,c as ye,d as Me,e as Pe}from"./chunk-2GWQ5KOW.js";import{a as ke}from"./chunk-KIUJOUDP.js";import{b as pe,c as ce,d as me,e as ge,f as ue,g as fe,h as _e,i as xe,j as Y,k as G,l as he,m as be,n as Ce,o as z,p as Te,q as De}from"./chunk-M3VIFFJM.js";import{$ as C,$a as de,B as F,Ba as v,Ca as T,D as p,Da as D,E as c,F as j,G as A,Ka as Z,L as M,Na as w,R as l,Ta as ae,Ua as Q,Va as V,W as k,Ya as O,_ as x,a as X,b as ie,bb as se,c as I,fa as B,fb as le,ga as W,ha as f,hb as ve,ia as i,ja as r,ka as y,na as b,oa as u,pa as g,qa as R,ra as H,sa as q,ta as N,ua as re,va as P,xa as a,ya as _,za as S}from"./chunk-WWJ5UN6H.js";var U=class d{addTodo=new C;showFormSignal=M(!1);showForm=this.showFormSignal.asReadonly();today=new Date().toISOString().split("T")[0];todayDateTime=new Date().toISOString().slice(0,16);formData={title:"",description:"",priority:"medium",dueDate:"",startDateTime:"",endDateTime:"",durationHours:0,durationMinutes:0,category:"",completed:!1,archived:!1};toggleForm(){this.showFormSignal.update(o=>!o),this.showForm()||this.resetForm()}onSubmit(){if(!this.formData.title.trim())return;let o=(this.formData.durationHours||0)*60+(this.formData.durationMinutes||0),t={title:this.formData.title.trim(),description:this.formData.description.trim()||void 0,completed:!1,archived:!1,priority:this.formData.priority,dueDate:this.formData.dueDate?new Date(this.formData.dueDate):void 0,startDateTime:this.formData.startDateTime?new Date(this.formData.startDateTime):void 0,endDateTime:this.formData.endDateTime?new Date(this.formData.endDateTime):void 0,duration:o>0?o:void 0,category:this.formData.category.trim()||void 0,isExpanded:!1};this.addTodo.emit(t)}resetForm(){this.formData={title:"",description:"",priority:"medium",dueDate:"",startDateTime:"",endDateTime:"",durationHours:0,durationMinutes:0,category:"",completed:!1,archived:!1}}resetAndClose(){this.resetForm(),this.showFormSignal.set(!1)}onStartDateTimeChange(){this.calculateDurationFromDates()}onEndDateTimeChange(){this.calculateDurationFromDates()}onDurationChange(){if(this.formData.startDateTime&&(this.formData.durationHours||this.formData.durationMinutes)){let o=new Date(this.formData.startDateTime),t=(this.formData.durationHours||0)*60+(this.formData.durationMinutes||0),e=new Date(o.getTime()+t*6e4),n=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.formData.endDateTime=n}}calculateDurationFromDates(){if(this.formData.startDateTime&&this.formData.endDateTime){let o=new Date(this.formData.startDateTime),t=new Date(this.formData.endDateTime);if(t>o){let e=t.getTime()-o.getTime(),n=Math.floor(e/(1e3*60));this.formData.durationHours=Math.floor(n/60),this.formData.durationMinutes=n%60}}}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=k({type:d,selectors:[["app-todo-form"]],outputs:{addTodo:"addTodo"},decls:72,vars:20,consts:[["todoForm","ngForm"],["titleInput",""],[1,"todo-form-container"],[1,"add-todo-btn",3,"click"],[1,"btn-icon"],[1,"btn-text"],[1,"todo-form"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","title","placeholder","What needs to be done?","required","",1,"form-input","title-input",3,"ngModelChange","ngModel"],["name","description","placeholder","Add a description (optional)","rows","3",1,"form-input","description-input",3,"ngModelChange","ngModel"],[1,"form-row"],[1,"form-label"],["name","priority",1,"form-input","priority-select",3,"ngModelChange","ngClass","ngModel"],["value","low"],["value","medium"],["value","high"],["type","datetime-local","name","dueDate",1,"form-input","datetime-input",3,"ngModelChange","ngModel","min"],["type","datetime-local","name","startDateTime",1,"form-input","datetime-input",3,"ngModelChange","change","ngModel","min"],["type","datetime-local","name","endDateTime",1,"form-input","datetime-input",3,"ngModelChange","change","ngModel","min"],[1,"duration-input-group"],["type","number","name","durationHours","placeholder","0","min","0","max","23",1,"form-input","duration-input",3,"ngModelChange","change","ngModel"],[1,"duration-label"],["type","number","name","durationMinutes","placeholder","0","min","0","max","59",1,"form-input","duration-input",3,"ngModelChange","change","ngModel"],[1,"form-hint"],["type","text","name","category","placeholder","e.g., Work, Personal","list","categories",1,"form-input","category-input",3,"ngModelChange","ngModel"],["id","categories"],["value","Work"],["value","Personal"],["value","Shopping"],["value","Health"],["value","Learning"],["value","Home"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){if(t&1){let n=b();i(0,"div",2)(1,"button",3),u("click",function(){return p(n),c(e.toggleForm())}),i(2,"span",4),a(3),r(),i(4,"span",5),a(5),r()(),i(6,"div",6)(7,"form",7,0),u("ngSubmit",function(){return p(n),c(e.onSubmit())}),i(9,"div",8)(10,"input",9,1),D("ngModelChange",function(m){return p(n),T(e.formData.title,m)||(e.formData.title=m),c(m)}),r()(),i(12,"div",8)(13,"textarea",10),D("ngModelChange",function(m){return p(n),T(e.formData.description,m)||(e.formData.description=m),c(m)}),r()(),i(14,"div",11)(15,"div",8)(16,"label",12),a(17,"Priority"),r(),i(18,"select",13),D("ngModelChange",function(m){return p(n),T(e.formData.priority,m)||(e.formData.priority=m),c(m)}),i(19,"option",14),a(20,"\u{1F7E2} Low"),r(),i(21,"option",15),a(22,"\u{1F7E1} Medium"),r(),i(23,"option",16),a(24,"\u{1F534} High"),r()()(),i(25,"div",8)(26,"label",12),a(27,"Due Date"),r(),i(28,"input",17),D("ngModelChange",function(m){return p(n),T(e.formData.dueDate,m)||(e.formData.dueDate=m),c(m)}),r()()(),i(29,"div",11)(30,"div",8)(31,"label",12),a(32,"Start Date & Time"),r(),i(33,"input",18),D("ngModelChange",function(m){return p(n),T(e.formData.startDateTime,m)||(e.formData.startDateTime=m),c(m)}),u("change",function(){return p(n),c(e.onStartDateTimeChange())}),r()(),i(34,"div",8)(35,"label",12),a(36,"End Date & Time"),r(),i(37,"input",19),D("ngModelChange",function(m){return p(n),T(e.formData.endDateTime,m)||(e.formData.endDateTime=m),c(m)}),u("change",function(){return p(n),c(e.onEndDateTimeChange())}),r()()(),i(38,"div",11)(39,"div",8)(40,"label",12),a(41,"Duration"),r(),i(42,"div",20)(43,"input",21),D("ngModelChange",function(m){return p(n),T(e.formData.durationHours,m)||(e.formData.durationHours=m),c(m)}),u("change",function(){return p(n),c(e.onDurationChange())}),r(),i(44,"span",22),a(45,"hours"),r(),i(46,"input",23),D("ngModelChange",function(m){return p(n),T(e.formData.durationMinutes,m)||(e.formData.durationMinutes=m),c(m)}),u("change",function(){return p(n),c(e.onDurationChange())}),r(),i(47,"span",22),a(48,"minutes"),r()(),i(49,"small",24),a(50,"Duration will auto-calculate from start/end times, or you can set it manually"),r()()(),i(51,"div",11)(52,"div",8)(53,"label",12),a(54,"Category"),r(),i(55,"input",25),D("ngModelChange",function(m){return p(n),T(e.formData.category,m)||(e.formData.category=m),c(m)}),r(),i(56,"datalist",26),y(57,"option",27)(58,"option",28)(59,"option",29)(60,"option",30)(61,"option",31)(62,"option",32),r()()(),i(63,"div",33)(64,"button",34)(65,"span",4),a(66,"\u2713"),r(),a(67," Add Todo "),r(),i(68,"button",35),u("click",function(){return p(n),c(e.resetForm())}),i(69,"span",4),a(70,"\u21BB"),r(),a(71," Reset "),r()()()()()}if(t&2){let n=N(8);l(),P("active",e.showForm()),l(2),_(e.showForm()?"\u2715":"+"),l(2),_(e.showForm()?"Cancel":"Add New Todo"),l(),P("show",e.showForm()),l(4),v("ngModel",e.formData.title),l(3),v("ngModel",e.formData.description),l(5),f("ngClass","priority-"+e.formData.priority),v("ngModel",e.formData.priority),l(10),v("ngModel",e.formData.dueDate),f("min",e.today),l(5),v("ngModel",e.formData.startDateTime),f("min",e.todayDateTime),l(4),v("ngModel",e.formData.endDateTime),f("min",e.formData.startDateTime||e.todayDateTime),l(6),v("ngModel",e.formData.durationHours),l(3),v("ngModel",e.formData.durationMinutes),l(9),v("ngModel",e.formData.category),l(9),f("disabled",!n.form.valid)}},dependencies:[O,ae,z,fe,Y,G,pe,_e,xe,ce,me,Ce,be,he,ue,ge],styles:[".todo-form-container[_ngcontent-%COMP%]{margin-bottom:16px}.add-todo-btn[_ngcontent-%COMP%]{width:100%;padding:12px 20px;background:#3b82f6;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 1px 2px #0000000d}.add-todo-btn[_ngcontent-%COMP%]:hover{background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.add-todo-btn.active[_ngcontent-%COMP%]{background:#dc2626}.btn-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700;transition:transform .3s ease}.add-todo-btn.active[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.btn-text[_ngcontent-%COMP%]{font-size:16px}.todo-form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:0;margin-top:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden;max-height:0;opacity:0;transition:all .3s ease;border:1px solid #e2e8f0}.todo-form.show[_ngcontent-%COMP%]{max-height:max-content;opacity:1;padding:20px;border-color:#cbd5e1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#2c3e50;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s ease;background:#fff;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.title-input[_ngcontent-%COMP%]{font-size:18px;font-weight:600;background:#fff;border-color:#667eea}.title-input[_ngcontent-%COMP%]::placeholder{color:#95a5a6;font-weight:400}.description-input[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit;line-height:1.5}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:24px}.priority-select[_ngcontent-%COMP%]{cursor:pointer}.priority-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px}.date-input[_ngcontent-%COMP%]{cursor:pointer}.category-input[_ngcontent-%COMP%]{position:relative}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding-top:16px;border-top:1px solid #e9ecef}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;text-transform:uppercase;letter-spacing:.5px}.btn-primary[_ngcontent-%COMP%]{background:#10b981;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-secondary[_ngcontent-%COMP%]:hover{background:#4b5563;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.todo-form.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s ease-out}.priority-select[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:2rem}.priority-select.priority-low[_ngcontent-%COMP%]{border-color:#10b981;box-shadow:0 0 0 2px #10b98126}.priority-select.priority-medium[_ngcontent-%COMP%]{border-color:#f59e0b;box-shadow:0 0 0 2px #f59e0b26}.priority-select.priority-high[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 2px #ef444426}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{justify-content:center}.add-todo-btn[_ngcontent-%COMP%]{padding:14px 20px;font-size:14px}.todo-form.show[_ngcontent-%COMP%]{padding:20px}}.duration-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.duration-input[_ngcontent-%COMP%]{width:60px!important;text-align:center}.duration-label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.form-hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:11px;color:#6b7280;font-style:italic}@media (max-width: 480px){.btn-text[_ngcontent-%COMP%]{display:none}.add-todo-btn[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:fixed;bottom:20px;right:20px;z-index:1000;padding:0}.todo-form-container[_ngcontent-%COMP%]{margin-bottom:80px}}"]})};function Ie(d,o){if(d&1){let t=b();i(0,"button",27),u("click",function(){p(t);let n=g();return c(n.clearSearch())}),a(1," \u2715 "),r()}}function je(d,o){if(d&1&&(i(0,"div",28)(1,"div",8),a(2),r(),i(3,"div",9),a(4,"High Priority"),r()()),d&2){let t=g();l(2),_(t.stats.highPriority)}}function Fe(d,o){if(d&1&&(i(0,"div",29)(1,"div",8),a(2),r(),i(3,"div",9),a(4,"Overdue"),r()()),d&2){let t=g();l(2),_(t.stats.overdue)}}function Ve(d,o){if(d&1){let t=b();i(0,"div",30)(1,"button",31),u("click",function(){p(t);let n=g();return c(n.onClearCompleted())}),i(2,"span",19),a(3,"\u{1F5D1}\uFE0F"),r(),a(4," Clear Completed "),r()()}}var J=class d{currentFilter;currentSort;searchTerm;stats;filterChange=new C;sortChange=new C;searchChange=new C;clearCompleted=new C;onFilterChange(o){this.filterChange.emit(o)}onSortChange(o){let t=o.target;this.sortChange.emit(t.value)}onSearchChange(o){let t=o.target;this.searchChange.emit(t.value)}clearSearch(){this.searchChange.emit("")}onClearCompleted(){this.clearCompleted.emit()}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=k({type:d,selectors:[["app-todo-filters"]],inputs:{currentFilter:"currentFilter",currentSort:"currentSort",searchTerm:"searchTerm",stats:"stats"},outputs:{filterChange:"filterChange",sortChange:"sortChange",searchChange:"searchChange",clearCompleted:"clearCompleted"},decls:59,vars:17,consts:[[1,"filters-container"],[1,"search-section"],[1,"search-box"],[1,"search-icon"],["type","text","placeholder","Search todos...",1,"search-input",3,"input","value"],["class","clear-search","title","Clear search",3,"click",4,"ngIf"],[1,"stats-dashboard"],[1,"stat-card","total"],[1,"stat-number"],[1,"stat-label"],[1,"stat-card","active"],[1,"stat-card","completed"],["class","stat-card priority",4,"ngIf"],["class","stat-card overdue",4,"ngIf"],[1,"controls-section"],[1,"filter-group"],[1,"control-label"],[1,"filter-buttons"],[1,"filter-btn",3,"click"],[1,"btn-icon"],[1,"sort-group"],[1,"sort-select",3,"change","value"],["value","created"],["value","priority"],["value","dueDate"],["value","alphabetical"],["class","action-group",4,"ngIf"],["title","Clear search",1,"clear-search",3,"click"],[1,"stat-card","priority"],[1,"stat-card","overdue"],[1,"action-group"],["title","Remove all completed todos",1,"clear-completed-btn",3,"click"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4,"\u{1F50D}"),r(),i(5,"input",4),u("input",function(s){return e.onSearchChange(s)}),r(),x(6,Ie,2,0,"button",5),r()(),i(7,"div",6)(8,"div",7)(9,"div",8),a(10),r(),i(11,"div",9),a(12,"Total"),r()(),i(13,"div",10)(14,"div",8),a(15),r(),i(16,"div",9),a(17,"Active"),r()(),i(18,"div",11)(19,"div",8),a(20),r(),i(21,"div",9),a(22,"Done"),r()(),x(23,je,5,1,"div",12)(24,Fe,5,1,"div",13),r(),i(25,"div",14)(26,"div",15)(27,"label",16),a(28,"Show:"),r(),i(29,"div",17)(30,"button",18),u("click",function(){return e.onFilterChange("all")}),i(31,"span",19),a(32,"\u{1F4CB}"),r(),a(33," All "),r(),i(34,"button",18),u("click",function(){return e.onFilterChange("active")}),i(35,"span",19),a(36,"\u23F3"),r(),a(37," Active "),r(),i(38,"button",18),u("click",function(){return e.onFilterChange("completed")}),i(39,"span",19),a(40,"\u2705"),r(),a(41," Completed "),r(),i(42,"button",18),u("click",function(){return e.onFilterChange("archived")}),i(43,"span",19),a(44,"\u{1F4E6}"),r(),a(45," Archived "),r()()(),i(46,"div",20)(47,"label",16),a(48,"Sort by:"),r(),i(49,"select",21),u("change",function(s){return e.onSortChange(s)}),i(50,"option",22),a(51,"\u{1F4C5} Date Created"),r(),i(52,"option",23),a(53,"\u{1F3AF} Priority"),r(),i(54,"option",24),a(55,"\u23F0 Due Date"),r(),i(56,"option",25),a(57,"\u{1F524} Alphabetical"),r()()(),x(58,Ve,5,0,"div",26),r()()),t&2&&(l(5),f("value",e.searchTerm),l(),f("ngIf",e.searchTerm),l(4),_(e.stats.total),l(5),_(e.stats.active),l(5),_(e.stats.completed),l(3),f("ngIf",e.stats.highPriority>0),l(),f("ngIf",e.stats.overdue>0),l(6),P("active",e.currentFilter==="all"),l(4),P("active",e.currentFilter==="active"),l(4),P("active",e.currentFilter==="completed"),l(4),P("active",e.currentFilter==="archived"),l(7),f("value",e.currentSort),l(9),f("ngIf",e.stats.completed>0))},dependencies:[O,V,z,Y,G],styles:[".filters-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e2e8f0}.search-section[_ngcontent-%COMP%]{margin-bottom:16px}.search-box[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:#fff;border:1px solid #d1d5db;border-radius:6px;padding:2px;transition:all .2s ease}.search-box[_ngcontent-%COMP%]:focus-within{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-icon[_ngcontent-%COMP%]{padding:12px 16px;color:#6c757d;font-size:16px}.search-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:12px 8px;font-size:16px;color:#2c3e50;outline:none}.search-input[_ngcontent-%COMP%]::placeholder{color:#95a5a6}.clear-search[_ngcontent-%COMP%]{padding:8px 12px;background:#e9ecef;border:none;border-radius:8px;color:#6c757d;cursor:pointer;transition:all .2s ease;margin-right:4px}.clear-search[_ngcontent-%COMP%]:hover{background:#dee2e6;color:#495057}.stats-dashboard[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px;margin-bottom:16px;padding:12px;background:#f8fafc;border-radius:6px;border:1px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]{text-align:center;padding:12px 8px;background:#fff;border-radius:6px;box-shadow:0 1px 2px #0000000d;border:1px solid #e2e8f0}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;letter-spacing:.5px;font-weight:600;opacity:.8}.stat-card.total[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#3b82f6}.stat-card.active[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#f59e0b}.stat-card.completed[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#10b981}.stat-card.priority[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#ef4444}.stat-card.overdue[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#dc2626}.controls-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;gap:24px;align-items:center}.control-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#2c3e50;margin-bottom:8px;display:block;text-transform:uppercase;letter-spacing:.5px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;background:#f1f5f9;padding:4px;border-radius:6px;border:1px solid #e2e8f0}.filter-btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;background:transparent;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;color:#6c757d;transition:all .3s ease;display:flex;align-items:center;gap:6px;white-space:nowrap}.filter-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#495057}.filter-btn.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-icon[_ngcontent-%COMP%]{font-size:14px}.sort-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.sort-select[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #e9ecef;border-radius:10px;background:#fff;font-size:14px;color:#2c3e50;cursor:pointer;transition:all .3s ease;min-width:160px}.sort-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.action-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.clear-completed-btn[_ngcontent-%COMP%]{padding:8px 12px;background:#ef4444;color:#fff;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px;white-space:nowrap}.clear-completed-btn[_ngcontent-%COMP%]:hover{background:#dc2626;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}@media (max-width: 1024px){.controls-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.filter-group[_ngcontent-%COMP%], .sort-group[_ngcontent-%COMP%], .action-group[_ngcontent-%COMP%]{align-items:center;text-align:center}}@media (max-width: 768px){.filters-container[_ngcontent-%COMP%]{padding:20px}.stats-dashboard[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:12px;padding:16px}.stat-card[_ngcontent-%COMP%]{padding:12px 8px}.stat-number[_ngcontent-%COMP%]{font-size:20px}.filter-buttons[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.filter-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.sort-select[_ngcontent-%COMP%]{min-width:140px}}@media (max-width: 480px){.stats-dashboard[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filter-buttons[_ngcontent-%COMP%]{flex-direction:column}.filter-btn[_ngcontent-%COMP%]{justify-content:center}.controls-section[_ngcontent-%COMP%]{gap:16px}}"]})};function ze(d,o){if(d&1&&(i(0,"div",29)(1,"span",30),a(2,"\u2022"),r(),i(3,"span",31),a(4),r()()),d&2){let t=o.$implicit;l(4),_(t)}}function Ae(d,o){if(d&1&&(i(0,"div",27),x(1,ze,5,1,"div",28),r()),d&2){let t=g().$implicit;l(),f("ngForOf",t.subtasks)}}function Ne(d,o){if(d&1&&(i(0,"div",22)(1,"div",23)(2,"span",24),a(3),r(),i(4,"span",25),a(5),r()(),x(6,Ae,2,1,"div",26),r()),d&2){let t=o.$implicit,e=o.index;l(3),S("",e+1,"."),l(2),_(t.title),l(),f("ngIf",t.subtasks.length>0)}}function Le(d,o){if(d&1&&(i(0,"div",18)(1,"h3",19),a(2),r(),i(3,"div",20),x(4,Ne,7,3,"div",21),r()()),d&2){let t=g(2);l(2),S("Preview (",t.parsedTasks().length," tasks)"),l(2),f("ngForOf",t.parsedTasks())}}function Be(d,o){if(d&1&&(i(0,"div",32),j(),i(1,"svg",33),y(2,"path",34),r(),a(3),r()),d&2){let t=g(2);l(3),S(" ",t.errorMessage," ")}}function We(d,o){if(d&1){let t=b();i(0,"div",1),u("click",function(n){p(t);let s=g();return c(s.onOverlayClick(n))}),i(1,"div",2),u("click",function(n){return p(t),c(n.stopPropagation())}),i(2,"div",3)(3,"h2",4),a(4,"Import Tasks"),r(),i(5,"button",5),u("click",function(){p(t);let n=g();return c(n.onClose())}),j(),i(6,"svg",6),y(7,"path",7),r()()(),A(),i(8,"div",8)(9,"div",9)(10,"label",10),a(11,"Paste your tasks here"),r(),i(12,"p",11),a(13," Format: One task per line. Subtasks should be indented with tabs or spaces. "),r(),i(14,"textarea",12),u("input",function(n){p(t);let s=g();return c(s.onImportTextChange(n))}),r()(),x(15,Le,5,2,"div",13)(16,Be,4,1,"div",14),r(),i(17,"div",15)(18,"button",16),u("click",function(){p(t);let n=g();return c(n.onClose())}),a(19," Cancel "),r(),i(20,"button",17),u("click",function(){p(t);let n=g();return c(n.onImport())}),a(21),r()()()()}if(d&2){let t=g();l(14),f("value",t.importText()),l(),f("ngIf",t.parsedTasks().length>0),l(),f("ngIf",t.errorMessage),l(4),f("disabled",t.parsedTasks().length===0),l(),S(" Import ",t.parsedTasks().length," Tasks ")}}var K=class d{import=new C;close=new C;isOpenSignal=M(!1);isOpen=this.isOpenSignal.asReadonly();importText=M("");errorMessage="";parsedTasks=w(()=>{if(!this.importText().trim())return this.errorMessage="",[];try{return this.parseTaskText(this.importText())}catch(t){return this.errorMessage=t instanceof Error?t.message:"Failed to parse tasks",[]}});open(){this.isOpenSignal.set(!0),this.importText.set(""),this.errorMessage="",setTimeout(()=>{document.querySelector(".modal-content textarea")?.focus()},100)}onOverlayClick(o){o.target===o.currentTarget&&this.onClose()}onClose(){this.close.emit(),this.isOpenSignal.set(!1),this.importText.set(""),this.errorMessage=""}onImport(){let o=this.parsedTasks();console.log("\u{1F680} Import dialog emitting tasks:",o),o.length>0&&(this.import.emit(o),this.onClose())}onImportTextChange(o){let t=o.target;this.importText.set(t.value)}parseTaskText(o){let t=o.split(`
`).map(s=>s.replace(/\r/g,"")),e=[],n=null;for(let s=0;s<t.length;s++){let m=t[s];if(!m.trim())continue;let L=m.startsWith("	")||m.startsWith("  ")||m.startsWith("    "),h=m.trim();if(h)if(L){if(!n)throw new Error(`Line ${s+1}: Subtask found without a parent task: "${h}"`);n.subtasks.push(h)}else n&&e.push(n),n={title:h,subtasks:[]}}return n&&e.push(n),e}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=k({type:d,selectors:[["app-import-dialog"]],outputs:{import:"import",close:"close"},decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","currentColor"],["d","M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"],[1,"modal-body"],[1,"form-group"],[1,"form-label"],[1,"form-hint"],["placeholder",`Example:
Task 1
    Subtask 1
    Subtask 2
Task 2
Task 3
    Subtask 3`,"rows","12",1,"form-textarea",3,"input","value"],["class","preview-section",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"preview-section"],[1,"preview-title"],[1,"preview-list"],["class","preview-item",4,"ngFor","ngForOf"],[1,"preview-item"],[1,"task-preview"],[1,"task-number"],[1,"task-title"],["class","subtasks-preview",4,"ngIf"],[1,"subtasks-preview"],["class","subtask-preview",4,"ngFor","ngForOf"],[1,"subtask-preview"],[1,"subtask-bullet"],[1,"subtask-title"],[1,"error-message"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M8 1a7 7 0 100 14A7 7 0 008 1zM7 4a1 1 0 112 0v3a1 1 0 11-2 0V4zm1 8a1 1 0 100-2 1 1 0 000 2z"]],template:function(t,e){t&1&&x(0,We,22,5,"div",0),t&2&&f("ngIf",e.isOpen())},dependencies:[O,Q,V,z],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 0;border-bottom:1px solid #e5e7eb;margin-bottom:24px}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#111827;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;padding:8px;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.modal-body[_ngcontent-%COMP%]{padding:0 24px}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#374151;font-size:14px}.form-hint[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;color:#6b7280;font-style:italic}.form-textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;font-family:Courier New,monospace;line-height:1.5;resize:vertical;min-height:200px;transition:all .2s ease;background:#fff;box-sizing:border-box}.form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-family:inherit}.preview-section[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid #e5e7eb}.preview-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#374151;margin:0 0 16px}.preview-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid #e5e7eb;border-radius:8px;background:#f9fafb}.preview-item[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.preview-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.task-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.task-number[_ngcontent-%COMP%]{font-weight:600;color:#3b82f6;min-width:20px}.task-title[_ngcontent-%COMP%]{font-weight:500;color:#111827}.subtasks-preview[_ngcontent-%COMP%]{margin-left:28px}.subtask-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px;padding:2px 0}.subtask-bullet[_ngcontent-%COMP%]{color:#6b7280;font-weight:700}.subtask-title[_ngcontent-%COMP%]{color:#4b5563;font-size:13px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px;margin-top:16px}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:32px;padding:20px 24px 24px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:8px;min-width:100px;justify-content:center}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;border-color:#9ca3af}@media (max-width: 640px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-width:100%;border-radius:8px}.modal-header[_ngcontent-%COMP%]{padding:20px 20px 0}.modal-body[_ngcontent-%COMP%]{padding:0 20px}.modal-actions[_ngcontent-%COMP%]{padding:20px;flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}.preview-list[_ngcontent-%COMP%]{max-height:200px}}"]})};var Re=["taskEditor"],He=["todoForm"],qe=["importDialog"];function Qe(d,o){if(d&1&&(i(0,"p",30),a(1),r()),d&2){let t=g(2);l(),S(" ",t.project().description," ")}}function Ye(d,o){if(d&1){let t=b();i(0,"app-todo-item",35),u("edit",function(){let n=p(t).$implicit,s=g(3);return c(s.onEdit(n))})("toggle",function(n){p(t);let s=g(3);return c(s.onToggleTodo(n))})("delete",function(n){p(t);let s=g(3);return c(s.onDeleteTodo(n))})("update",function(n){p(t);let s=g(3);return c(s.onUpdateTodo(n))})("addSubtaskEvent",function(n){p(t);let s=g(3);return c(s.onAddSubtask(n))})("toggleExpanded",function(n){p(t);let s=g(3);return c(s.onToggleExpanded(n))})("subtaskDrop",function(n){p(t);let s=g(3);return c(s.onSubtaskDrop(n.event,n.parentId))})("archive",function(n){p(t);let s=g(3);return c(s.onArchiveTodo(n))})("unarchive",function(n){p(t);let s=g(3);return c(s.onUnarchiveTodo(n))}),r()}if(d&2){let t=o.$implicit,e=g(3);f("cdkDragDisabled",e.isDraggingDisabled)("todo",t)("highlightedTaskId",e.highlightedTaskId())}}function Ge(d,o){if(d&1){let t=b();i(0,"div",31),u("cdkDropListDropped",function(n){p(t);let s=g(2);return c(s.onDrop(n))}),x(1,Ye,1,3,"app-todo-item",32),i(2,"div",33)(3,"button",34),u("click",function(){p(t);let n=g(2);return c(n.onShowAddTaskForm())}),j(),i(4,"svg",19),y(5,"path",20),r(),a(6," Add Task "),r()()()}if(d&2){let t=g(2);f("cdkDropListData",t.filteredTodos()),l(),f("ngForOf",t.filteredTodos())("ngForTrackBy",t.trackByTodoId)}}function Ue(d,o){d&1&&a(0," \u{1F50D} ")}function Je(d,o){d&1&&a(0," \u{1F389} ")}function Ke(d,o){d&1&&a(0," \u{1F4DD} ")}function Xe(d,o){d&1&&a(0," No tasks found ")}function Ze(d,o){d&1&&a(0," No completed tasks ")}function $e(d,o){d&1&&a(0," No active tasks ")}function et(d,o){d&1&&a(0," No tasks yet ")}function tt(d,o){d&1&&a(0," Try adjusting your search terms or filters ")}function ot(d,o){d&1&&a(0," Complete some tasks to see them here ")}function nt(d,o){d&1&&a(0," All your tasks are completed! \u{1F389} ")}function it(d,o){d&1&&a(0," Add your first task to get started ")}function rt(d,o){if(d&1&&(i(0,"div",36)(1,"div",37),B(2,Ue,1,0)(3,Je,1,0)(4,Ke,1,0),r(),i(5,"h3",38),B(6,Xe,1,0)(7,Ze,1,0)(8,$e,1,0)(9,et,1,0),r(),i(10,"p",39),B(11,tt,1,0)(12,ot,1,0)(13,nt,1,0)(14,it,1,0),r()()),d&2){let t=g(2);l(2),W(t.search()?2:t.filter()==="completed"?3:4),l(4),W(t.search()?6:t.filter()==="completed"?7:t.filter()==="active"?8:9),l(5),W(t.search()?11:t.filter()==="completed"?12:t.filter()==="active"?13:14)}}function at(d,o){if(d&1){let t=b();i(0,"div",8)(1,"header",9)(2,"button",10),u("click",function(){p(t);let n=g();return c(n.goBack())}),j(),i(3,"svg",11),y(4,"path",12),r(),a(5," Back to Projects "),r(),A(),i(6,"div",13)(7,"div",14),a(8),r(),i(9,"div")(10,"h1",15),a(11),r(),x(12,Qe,2,1,"p",16),r()(),i(13,"div",17)(14,"button",18),u("click",function(){p(t);let n=g();return c(n.onShowImportDialog())}),j(),i(15,"svg",19),y(16,"path",20),r(),a(17," Import Tasks "),r()(),A(),i(18,"div",21)(19,"div",22)(20,"span",23),a(21),r(),i(22,"span",24),a(23,"Total Tasks"),r()(),i(24,"div",22)(25,"span",23),a(26),r(),i(27,"span",24),a(28,"Completed"),r()(),i(29,"div",22)(30,"span",23),a(31),r(),i(32,"span",24),a(33,"Active"),r()()()(),i(34,"div",25)(35,"app-todo-form",26,3),u("addTodo",function(n){p(t);let s=g();return c(s.onAddTodo(n))}),r(),i(37,"app-todo-filters",27),u("filterChange",function(n){p(t);let s=g();return c(s.onFilterChange(n))})("sortChange",function(n){p(t);let s=g();return c(s.onSortChange(n))})("searchChange",function(n){p(t);let s=g();return c(s.onSearchChange(n))})("clearCompleted",function(){p(t);let n=g();return c(n.onClearCompleted())}),r(),i(38,"div",28),x(39,Ge,7,3,"div",29)(40,rt,15,3,"ng-template",null,4,Z),r()()()}if(d&2){let t=N(41),e=g();l(7),re("background-color",e.project().color),l(),S(" ",e.project().icon||"\u{1F4CB}"," "),l(3),_(e.project().name),l(),f("ngIf",e.project().description),l(9),_(e.projectTodos().length),l(5),_(e.completedTodos().length),l(5),_(e.activeTodos().length),l(6),f("currentFilter",e.filter())("currentSort",e.sort())("searchTerm",e.search())("stats",e.todoStats()),l(2),f("ngIf",e.filteredTodos().length>0)("ngIfElse",t)}}function dt(d,o){if(d&1){let t=b();i(0,"div",40)(1,"h2"),a(2,"Project Not Found"),r(),i(3,"p"),a(4,"The project you're looking for doesn't exist."),r(),i(5,"button",41),u("click",function(){p(t);let n=g();return c(n.goBack())}),a(6," Back to Projects "),r()()}}var Se=class d{taskEditor;todoForm;importDialog;editingTodo=null;isDraggingDisabled=!1;route=F(de);router=F(se);projectService=F(ve);todoService=F(De);confirmationService=F(Te);projectIdSignal=M(null);projectId=this.projectIdSignal.asReadonly();highlightedTaskIdSignal=M(null);highlightedTaskId=this.highlightedTaskIdSignal.asReadonly();project=w(()=>{let o=this.projectId();return o?this.projectService.getProjectById(o):null});projectTodos=w(()=>this.todoService.todos().filter(o=>o.projectId===this.projectId()));completedTodos=w(()=>this.projectTodos().filter(o=>o.completed&&!o.archived));activeTodos=w(()=>this.projectTodos().filter(o=>!o.completed&&!o.archived));archivedTodos=w(()=>this.projectTodos().filter(o=>o.archived));filteredTodos=w(()=>{let o=new Set(this.projectTodos().map(t=>t.id));return this.todoService.filteredTodos().filter(t=>o.has(t.id))});filter=this.todoService.filter;sort=this.todoService.sort;search=this.todoService.search;todoStats=w(()=>{let o=this.projectTodos(),t=this.flattenTodos(o),e=t.filter(n=>!n.archived);return{total:e.length,completed:e.filter(n=>n.completed).length,active:e.filter(n=>!n.completed).length,archived:t.filter(n=>n.archived).length,highPriority:e.filter(n=>n.priority==="high"&&!n.completed).length,overdue:e.filter(n=>n.dueDate&&!n.completed&&new Date(n.dueDate)<new Date).length}});ngOnInit(){this.route.paramMap.subscribe(o=>{let t=o.get("id");this.projectIdSignal.set(t),t&&this.projectService.setCurrentProject(t)}),this.route.queryParamMap.subscribe(o=>{let t=o.get("highlightTask");this.highlightedTaskIdSignal.set(t),t&&(setTimeout(()=>{let e=document.querySelector(`[data-task-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{this.highlightedTaskIdSignal.set(null),this.router.navigate([],{relativeTo:this.route,queryParams:{},replaceUrl:!0})},3e3))})}goBack(){this.router.navigate(["/projects"])}onAddTodo(o){return I(this,null,function*(){let t=this.projectId();if(t)try{yield this.todoService.addTodo(ie(X({},o),{projectId:t})),this.todoForm.resetAndClose()}catch(e){if(e.message==="OVERLAP_CANCELLED")return;console.error("Failed to add todo:",e)}})}onAddSubtask(o){this.todoService.addSubtask(o.parentId,o.subtaskData)}onToggleExpanded(o){this.todoService.toggleExpanded(o)}onToggleTodo(o){this.todoService.toggleTodo(o)}onUpdateTodo(o){return I(this,null,function*(){try{yield this.todoService.updateTodo(o.id,o.updates)}catch(t){if(t.message==="OVERLAP_CANCELLED")return;console.error("Failed to update todo:",t)}})}onDeleteTodo(o){return I(this,null,function*(){let t=this.findTodoByIdInProject(o);if(!t)return;(yield this.confirmationService.open("Delete Task",`Are you sure you want to delete "${t.title}"? This will also delete all its subtasks.`,"Delete","Delete with tasks",!1))==="confirm"&&this.todoService.deleteTodo(o)})}onArchiveTodo(o){this.todoService.archiveTodo(o)}onUnarchiveTodo(o){this.todoService.unarchiveTodo(o)}onFilterChange(o){this.todoService.setFilter(o)}onSortChange(o){this.todoService.setSort(o)}onSearchChange(o){this.todoService.setSearch(o)}onClearCompleted(){return I(this,null,function*(){(yield this.confirmationService.open("Clear Completed Tasks","Are you sure you want to delete all completed tasks?"))&&this.todoService.clearCompleted()})}onEdit(o){this.editingTodo=o,this.taskEditor.open(),this.isDraggingDisabled=!0}onShowAddTaskForm(){this.editingTodo=null,this.taskEditor.open(),this.isDraggingDisabled=!0}onSaveTask(o){return I(this,null,function*(){let t=this.projectId();if(t)try{if(this.editingTodo)yield this.todoService.updateTodo(this.editingTodo.id,X({},o)),this.taskEditor.closeAndReset(),this.closeEditor();else{let e={title:o.title||"",description:o.description,completed:o.completed||!1,archived:!1,priority:o.priority||"medium",dueDate:o.dueDate,startDateTime:o.startDateTime,endDateTime:o.endDateTime,duration:o.duration,category:o.category,isExpanded:!1,projectId:t};yield this.todoService.addTodo(e),this.taskEditor.closeAndReset(),this.closeEditor()}}catch(e){if(e?.message==="OVERLAP_CANCELLED")return;console.error("Failed to save todo:",e)}})}closeEditor(){this.editingTodo=null,this.isDraggingDisabled=!1}trackByTodoId(o,t){return t.id}todoMatchesSearch(o,t){return o.title.toLowerCase().includes(t)||o.description?.toLowerCase().includes(t)||o.category?.toLowerCase().includes(t)?!0:o.subtasks.some(n=>this.todoMatchesSearch(n,t))}flattenTodos(o){let t=[];for(let e of o)t.push(e),e.subtasks.length>0&&t.push(...this.flattenTodos(e.subtasks));return t}onDrop(o){let t=this.filteredTodos(),e=t[o.previousIndex],n=t[o.currentIndex],s=[...this.projectTodos()],m=s.findIndex(h=>h.id===e.id),L=s.findIndex(h=>h.id===n.id);$(s,m,L),this.todoService.reorderTodos(s.map(h=>h.id))}onSubtaskDrop(o,t){let e=this.findTodoByIdInProject(t);if(e&&e.subtasks.length>0){let n=[...e.subtasks];$(n,o.previousIndex,o.currentIndex),this.todoService.reorderSubtasks(t,n.map(s=>s.id))}}findTodoByIdInProject(o){let t=this.projectTodos();return this.findTodoByIdRecursive(t,o)}findTodoByIdRecursive(o,t){for(let e of o){if(e.id===t)return e;if(e.subtasks.length>0){let n=this.findTodoByIdRecursive(e.subtasks,t);if(n)return n}}}onShowImportDialog(){this.importDialog.open()}onCloseImportDialog(){}onImportTasks(o){return I(this,null,function*(){let t=this.projectId();if(t){console.log("\u{1F504} Starting import of",o.length,"tasks");try{for(let e=0;e<o.length;e++){let n=o[e];console.log(`\u{1F4DD} Importing task ${e+1}/${o.length}:`,n.title);let s=`[IMPORT-${Date.now()}-${e}]`,m={title:n.title,description:s,completed:!1,archived:!1,priority:"medium",dueDate:void 0,startDateTime:void 0,endDateTime:void 0,duration:void 0,category:void 0,isExpanded:n.subtasks.length>0,projectId:t};yield this.todoService.addTodo(m);let h=this.todoService.todos().find(E=>E.description===s&&E.projectId===t);if(h){console.log("\u2705 Found created task:",h.id),yield this.todoService.updateTodo(h.id,{description:void 0});for(let E=0;E<n.subtasks.length;E++){let ne=n.subtasks[E];console.log(`  \u{1F4CC} Adding subtask ${E+1}/${n.subtasks.length}:`,ne);let Oe={title:ne,description:void 0,completed:!1,priority:"medium",dueDate:void 0,startDateTime:void 0,endDateTime:void 0,duration:void 0,category:void 0};this.todoService.addSubtask(h.id,Oe)}}else console.error("\u274C Could not find created task for:",n.title)}console.log(`\u{1F389} Successfully imported ${o.length} tasks`)}catch(e){console.error("\u274C Failed to import tasks:",e)}}})}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=k({type:d,selectors:[["app-project-detail"]],viewQuery:function(t,e){if(t&1&&(R(Re,5),R(He,5),R(qe,5)),t&2){let n;H(n=q())&&(e.taskEditor=n.first),H(n=q())&&(e.todoForm=n.first),H(n=q())&&(e.importDialog=n.first)}},decls:7,vars:4,consts:[["taskEditor",""],["importDialog",""],["notFound",""],["todoForm",""],["emptyState",""],["class","project-detail-container",4,"ngIf","ngIfElse"],[3,"save","close","todo","defaultProjectId"],[3,"import","close"],[1,"project-detail-container"],[1,"project-header"],[1,"back-btn",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","currentColor"],["fill-rule","evenodd","d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"project-info"],[1,"project-icon"],[1,"project-name"],["class","project-description",4,"ngIf"],[1,"project-actions"],["title","Import tasks from text",1,"import-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M8 1a.75.75 0 01.75.75v5.5h5.5a.75.75 0 010 1.5h-5.5v5.5a.75.75 0 01-1.5 0v-5.5h-5.5a.75.75 0 010-1.5h5.5v-5.5A.75.75 0 018 1z"],[1,"project-stats"],[1,"stat"],[1,"stat-value"],[1,"stat-label"],[1,"todo-container"],[3,"addTodo"],[3,"filterChange","sortChange","searchChange","clearCompleted","currentFilter","currentSort","searchTerm","stats"],[1,"todos-section"],["class","todos-list","cdkDropList","","id","main-todos-list",3,"cdkDropListData","cdkDropListDropped",4,"ngIf","ngIfElse"],[1,"project-description"],["cdkDropList","","id","main-todos-list",1,"todos-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",3,"cdkDragDisabled","todo","highlightedTaskId","edit","toggle","delete","update","addSubtaskEvent","toggleExpanded","subtaskDrop","archive","unarchive",4,"ngFor","ngForOf","ngForTrackBy"],[1,"add-task-bottom"],[1,"add-task-bottom-btn",3,"click"],["cdkDrag","",3,"edit","toggle","delete","update","addSubtaskEvent","toggleExpanded","subtaskDrop","archive","unarchive","cdkDragDisabled","todo","highlightedTaskId"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],[1,"not-found"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){if(t&1){let n=b();x(0,at,42,14,"div",5),i(1,"app-task-editor",6,0),u("save",function(m){return p(n),c(e.onSaveTask(m))})("close",function(){return p(n),c(e.closeEditor())}),r(),i(3,"app-import-dialog",7,1),u("import",function(m){return p(n),c(e.onImportTasks(m))})("close",function(){return p(n),c(e.onCloseImportDialog())}),r(),x(5,dt,7,0,"ng-template",null,2,Z)}if(t&2){let n=N(6);f("ngIf",e.project())("ngIfElse",n),l(),f("todo",e.editingTodo)("defaultProjectId",e.projectId()||void 0)}},dependencies:[O,Q,V,le,U,Pe,J,Me,ye,we,ke,K],styles:[".project-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:20px}.project-header[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 1px 3px #0000001a}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;font-size:14px;padding:8px 12px;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;gap:8px;margin-bottom:20px}.back-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.project-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:24px}.project-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;flex-shrink:0}.project-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:600;color:#1f2937}.project-description[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#6b7280;line-height:1.5}.project-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px}.import-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s ease;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.import-btn[_ngcontent-%COMP%]:hover{background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.project-stats[_ngcontent-%COMP%]{display:flex;gap:32px;padding-top:20px;border-top:1px solid #f3f4f6}.stat[_ngcontent-%COMP%]{text-align:center}.stat-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:600;color:#1f2937;line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;text-transform:uppercase;letter-spacing:.5px;margin-top:4px}.todo-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.todos-section[_ngcontent-%COMP%]{margin-top:16px}.todos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.add-task-bottom[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e5e7eb;background:#fafbfc;text-align:center}.add-task-bottom-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s ease;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.add-task-bottom-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.add-task-bottom-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:16px;margin-top:24px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.7}.empty-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2c3e50;margin:0 0 12px}.empty-description[_ngcontent-%COMP%]{font-size:16px;color:#7f8c8d;margin:0;line-height:1.5}.not-found[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;margin:40px auto;max-width:400px}.not-found[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1f2937;margin:0 0 12px}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0 0 24px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s ease;text-decoration:none}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}@media (max-width: 768px){.project-detail-container[_ngcontent-%COMP%]{padding:16px}.project-header[_ngcontent-%COMP%]{padding:20px}.project-info[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:16px}.project-name[_ngcontent-%COMP%]{font-size:24px}.project-stats[_ngcontent-%COMP%]{justify-content:space-around;gap:20px}.stat-value[_ngcontent-%COMP%]{font-size:28px}.empty-state[_ngcontent-%COMP%]{padding:40px 20px}.empty-icon[_ngcontent-%COMP%]{font-size:48px}.empty-title[_ngcontent-%COMP%]{font-size:20px}.empty-description[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.project-detail-container[_ngcontent-%COMP%]{padding:12px}.project-header[_ngcontent-%COMP%]{padding:16px}.project-icon[_ngcontent-%COMP%]{width:56px;height:56px;font-size:28px}.project-name[_ngcontent-%COMP%]{font-size:22px}.project-stats[_ngcontent-%COMP%]{gap:16px}}"]})};export{Se as ProjectDetailComponent};
