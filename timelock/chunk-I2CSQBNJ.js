import{a as we}from"./chunk-GICOQAVA.js";import{a as ge,b as fe,c as he,f as _e,i as xe,j as be,k as ke,o as Te,q as J}from"./chunk-5JWVTJMG.js";import{Aa as le,B as L,Ba as w,Ca as v,D as g,Da as C,E as f,F as Z,Fa as ce,G as ee,Ha as I,Ia as de,Ja as W,L as S,Na as E,R as d,Ta as pe,Ua as Y,Va as q,W as G,Wa as ue,Xa as U,Ya as Q,_ as b,a as z,b as H,c as R,ea as te,fa as ne,fb as me,ga as ie,ha as h,hb as X,ia as r,ja as a,ka as y,la as A,ma as F,na as O,oa as _,pa as u,qa as oe,ra as re,sa as ae,ua as B,va as M,wa as j,xa as s,ya as D,za as T}from"./chunk-WWJ5UN6H.js";var Oe=()=>[1,2,3,4];function Ee(l,i){if(l&1&&(r(0,"span",60),s(1),a()),l&2){let e=u().$implicit,t=u(2);d(),T(" ",t.formatDuration(e.duration)," ")}}function Ve(l,i){if(l&1&&(r(0,"span",61),s(1),I(2,"date"),a()),l&2){let e=u().$implicit;d(),T(" Due: ",W(2,1,e.dueDate,"MMM d")," ")}}function Be(l,i){if(l&1){let e=O();r(0,"div",50),_("click",function(){let n=g(e).$implicit,o=u(2);return f(o.toggleTaskSelection(n))}),r(1,"div",51)(2,"input",52),_("change",function(){let n=g(e).$implicit,o=u(2);return f(o.toggleTaskSelection(n))})("click",function(n){return g(e),f(n.stopPropagation())}),a()(),r(3,"div",53)(4,"div",54),s(5),a(),r(6,"div",55)(7,"span",56),s(8),a(),r(9,"span",57),s(10),a(),b(11,Ee,2,1,"span",58)(12,Ve,3,4,"span",59),a()()()}if(l&2){let e=i.$implicit,t=u(2);M("selected",t.selectedTasks().has(e.id)),d(2),h("checked",t.selectedTasks().has(e.id)),d(3),D(e.title),d(2),j("priority-"+e.priority),d(),T(" ",e.priority," "),d(2),D(t.getProjectName(e.projectId)),d(),h("ngIf",e.duration),d(),h("ngIf",e.dueDate)}}function Ie(l,i){if(l&1){let e=O();r(0,"div",62)(1,"label"),s(2,"Time:"),a(),r(3,"input",19),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.lunchBreak.start,n)||(o.preferences.lunchBreak.start=n),f(n)}),a(),r(4,"label"),s(5,"Duration:"),a(),r(6,"select",24),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.lunchBreak.duration,n)||(o.preferences.lunchBreak.duration=n),f(n)}),r(7,"option",29),s(8,"30 min"),a(),r(9,"option",30),s(10,"45 min"),a(),r(11,"option",31),s(12,"1 hour"),a(),r(13,"option",32),s(14,"1.5 hours"),a()()()}if(l&2){let e=u(2);d(3),w("ngModel",e.preferences.lunchBreak.start),d(3),w("ngModel",e.preferences.lunchBreak.duration)}}function Ae(l,i){if(l&1){let e=O();r(0,"div",63)(1,"label"),s(2,"Break duration:"),a(),r(3,"select",24),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.shortBreaks.duration,n)||(o.preferences.shortBreaks.duration=n),f(n)}),r(4,"option",26),s(5,"5 min"),a(),r(6,"option",27),s(7,"10 min"),a(),r(8,"option",28),s(9,"15 min"),a()(),r(10,"label"),s(11,"Every:"),a(),r(12,"select",24),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.shortBreaks.frequency,n)||(o.preferences.shortBreaks.frequency=n),f(n)}),r(13,"option",31),s(14,"1 hour"),a(),r(15,"option",32),s(16,"1.5 hours"),a(),r(17,"option",33),s(18,"2 hours"),a()()()}if(l&2){let e=u(2);d(3),w("ngModel",e.preferences.shortBreaks.duration),d(9),w("ngModel",e.preferences.shortBreaks.frequency)}}function Fe(l,i){if(l&1){let e=O();r(0,"div",64)(1,"label"),s(2,"Maximum chunk size:"),a(),r(3,"select",24),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.taskChunking.maxChunkSize,n)||(o.preferences.taskChunking.maxChunkSize=n),f(n)}),r(4,"option",28),s(5,"15 min"),a(),r(6,"option",65),s(7,"20 min"),a(),r(8,"option",66),s(9,"25 min"),a(),r(10,"option",29),s(11,"30 min"),a(),r(12,"option",30),s(13,"45 min"),a(),r(14,"option",31),s(15,"1 hour"),a(),r(16,"option",32),s(17,"1.5 hours"),a()()()}if(l&2){let e=u(2);d(3),w("ngModel",e.preferences.taskChunking.maxChunkSize)}}function We(l,i){if(l&1){let e=O();r(0,"div",67)(1,"label"),s(2,"Peak hours:"),a(),r(3,"input",19),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.peakHours.start,n)||(o.preferences.peakHours.start=n),f(n)}),a(),r(4,"span"),s(5,"to"),a(),r(6,"input",19),C("ngModelChange",function(n){g(e);let o=u(2);return v(o.preferences.peakHours.end,n)||(o.preferences.peakHours.end=n),f(n)}),a()()}if(l&2){let e=u(2);d(3),w("ngModel",e.preferences.peakHours.start),d(3),w("ngModel",e.preferences.peakHours.end)}}function ze(l,i){if(l&1&&(r(0,"div",73),s(1),a()),l&2){let e=u().$implicit;d(),D(e.reason)}}function He(l,i){if(l&1&&(r(0,"div",68)(1,"div",69),s(2),I(3,"date"),I(4,"date"),a(),r(5,"div",70)(6,"div",71),s(7),a(),b(8,ze,2,1,"div",72),a()()),l&2){let e=i.$implicit;j("item-"+e.type),d(2),le(" ",W(3,6,e.startTime,"shortTime")," - ",W(4,9,e.endTime,"shortTime")," "),d(5),D(e.title),d(),h("ngIf",e.reason)}}function je(l,i){if(l&1&&y(0,"span",74),l&2){let e=i.$implicit,t=u(2);M("active",t.currentStep()===e)("completed",t.currentStep()>e)}}function Ne(l,i){if(l&1){let e=O();r(0,"button",45),_("click",function(){g(e);let n=u(2);return f(n.nextStep())}),s(1," Next \u2192 "),a()}if(l&2){let e=u(2);h("disabled",!e.canProceed())}}function Le(l,i){if(l&1){let e=O();r(0,"button",75),_("click",function(){g(e);let n=u(2);return f(n.applySchedule())}),s(1," \u2705 Apply Schedule "),a()}if(l&2){let e=u(2);h("disabled",e.scheduledTasks().length===0)}}function Re(l,i){if(l&1){let e=O();r(0,"div",1),_("click",function(){g(e);let n=u();return f(n.closeDialog())}),r(1,"div",2),_("click",function(n){return g(e),f(n.stopPropagation())}),r(2,"header",3)(3,"h2"),s(4,"Auto-Plan Your Day"),a(),r(5,"button",4),_("click",function(){g(e);let n=u();return f(n.closeDialog())}),s(6,"\xD7"),a()(),r(7,"div",5)(8,"div",6)(9,"h3"),s(10,"\u{1F4C5} Select Date to Plan"),a(),r(11,"input",7),_("ngModelChange",function(n){g(e);let o=u();return f(o.onDateChange(n))}),a(),r(12,"p",8),s(13,"Choose the date you want to auto-plan"),a()(),r(14,"div",6)(15,"h3"),s(16,"\u{1F4CB} Select Tasks to Schedule"),a(),r(17,"div",9)(18,"div",10)(19,"button",11),_("click",function(){g(e);let n=u();return f(n.setTaskFilter("all"))}),s(20),a(),r(21,"button",11),_("click",function(){g(e);let n=u();return f(n.setTaskFilter("high"))}),s(22),a(),r(23,"button",11),_("click",function(){g(e);let n=u();return f(n.setTaskFilter("due"))}),s(24),a()(),r(25,"div",12),b(26,Be,13,10,"div",13),a(),r(27,"div",14)(28,"button",15),_("click",function(){g(e);let n=u();return f(n.selectAllTasks())}),s(29," Select All "),a(),r(30,"button",15),_("click",function(){g(e);let n=u();return f(n.clearTaskSelection())}),s(31," Clear All "),a()()()(),r(32,"div",6)(33,"h3"),s(34,"\u2699\uFE0F Planning Preferences"),a(),r(35,"div",16)(36,"div",17)(37,"h4"),s(38,"\u{1F550} Working Hours"),a(),r(39,"div",18)(40,"label"),s(41,"Start:"),a(),r(42,"input",19),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.workingHours.start,n)||(o.preferences.workingHours.start=n),f(n)}),a(),r(43,"label"),s(44,"End:"),a(),r(45,"input",19),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.workingHours.end,n)||(o.preferences.workingHours.end=n),f(n)}),a()()(),r(46,"div",17)(47,"h4"),s(48,"\u{1F37D}\uFE0F Lunch Break"),a(),r(49,"label",20)(50,"input",21),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.lunchBreak.enabled,n)||(o.preferences.lunchBreak.enabled=n),f(n)}),a(),s(51," Enable lunch break "),a(),b(52,Ie,15,2,"div",22),a(),r(53,"div",17)(54,"h4"),s(55,"\u2615 Short Breaks"),a(),r(56,"label",20)(57,"input",21),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.shortBreaks.enabled,n)||(o.preferences.shortBreaks.enabled=n),f(n)}),a(),s(58," Add short breaks "),a(),b(59,Ae,19,2,"div",23),a(),r(60,"div",17)(61,"h4"),s(62,"\u23F1\uFE0F Buffer Time"),a(),r(63,"label"),s(64,"Minutes between tasks:"),a(),r(65,"select",24),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.bufferTime,n)||(o.preferences.bufferTime=n),f(n)}),r(66,"option",25),s(67,"No buffer"),a(),r(68,"option",26),s(69,"5 min"),a(),r(70,"option",27),s(71,"10 min"),a(),r(72,"option",28),s(73,"15 min"),a()()(),r(74,"div",17)(75,"h4"),s(76,"\u{1F4CF} Default Task Duration"),a(),r(77,"label"),s(78,"Duration for tasks without specified duration:"),a(),r(79,"select",24),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.defaultTaskDuration,n)||(o.preferences.defaultTaskDuration=n),f(n)}),r(80,"option",28),s(81,"15 min"),a(),r(82,"option",29),s(83,"30 min"),a(),r(84,"option",30),s(85,"45 min"),a(),r(86,"option",31),s(87,"1 hour"),a(),r(88,"option",32),s(89,"1.5 hours"),a(),r(90,"option",33),s(91,"2 hours"),a()()(),r(92,"div",17)(93,"h4"),s(94,"\u2702\uFE0F Task Chunking"),a(),r(95,"label",20)(96,"input",21),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.taskChunking.enabled,n)||(o.preferences.taskChunking.enabled=n),f(n)}),a(),s(97," Break long tasks into smaller chunks "),r(98,"span",34),s(99,"Split tasks longer than the chunk size into multiple sessions"),a()(),b(100,Fe,18,1,"div",35),a(),r(101,"div",17)(102,"h4"),s(103,"\u{1F9E0} Smart Scheduling"),a(),r(104,"label",20)(105,"input",21),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.energyOptimization,n)||(o.preferences.energyOptimization=n),f(n)}),a(),s(106," Energy optimization "),r(107,"span",34),s(108,"Place demanding tasks during peak hours"),a()(),b(109,We,7,2,"div",36),r(110,"label",20)(111,"input",21),C("ngModelChange",function(n){g(e);let o=u();return v(o.preferences.projectGrouping,n)||(o.preferences.projectGrouping=n),f(n)}),a(),s(112," Project grouping "),r(113,"span",34),s(114,"Group tasks from the same project together"),a()()()()(),r(115,"div",6)(116,"h3"),s(117,"\u{1F440} Schedule Preview"),a(),r(118,"div",37)(119,"div",38)(120,"h4"),s(121),I(122,"date"),a(),r(123,"div",39)(124,"span"),s(125),a(),r(126,"span"),s(127),a(),r(128,"span"),s(129),a()()(),r(130,"div",40),b(131,He,9,12,"div",41),a(),r(132,"div",42)(133,"button",15),_("click",function(){g(e);let n=u();return f(n.regenerateSchedule())}),s(134," \u{1F504} Regenerate "),a(),r(135,"button",15),_("click",function(){g(e);let n=u();return f(n.exportSchedule())}),s(136," \u{1F4E4} Export "),a()()()()(),r(137,"footer",43)(138,"div",44)(139,"button",45),_("click",function(){g(e);let n=u();return f(n.previousStep())}),s(140," \u2190 Previous "),a(),r(141,"div",46),b(142,je,1,4,"span",47),a(),b(143,Ne,2,1,"button",48)(144,Le,2,1,"button",49),a()()()()}if(l&2){let e=u();d(8),M("active",e.currentStep()===1),d(3),h("ngModel",e.selectedDateStr()),d(3),M("active",e.currentStep()===2),d(5),M("active",e.taskFilter()==="all"),d(),T(" All Unscheduled (",e.unscheduledTasks().length,") "),d(),M("active",e.taskFilter()==="high"),d(),T(" High Priority (",e.highPriorityTasks().length,") "),d(),M("active",e.taskFilter()==="due"),d(),T(" Due Soon (",e.dueSoonTasks().length,") "),d(2),h("ngForOf",e.filteredTasks()),d(6),M("active",e.currentStep()===3),d(10),w("ngModel",e.preferences.workingHours.start),d(3),w("ngModel",e.preferences.workingHours.end),d(5),w("ngModel",e.preferences.lunchBreak.enabled),d(2),h("ngIf",e.preferences.lunchBreak.enabled),d(5),w("ngModel",e.preferences.shortBreaks.enabled),d(2),h("ngIf",e.preferences.shortBreaks.enabled),d(6),w("ngModel",e.preferences.bufferTime),d(14),w("ngModel",e.preferences.defaultTaskDuration),d(17),w("ngModel",e.preferences.taskChunking.enabled),d(4),h("ngIf",e.preferences.taskChunking.enabled),d(5),w("ngModel",e.preferences.energyOptimization),d(4),h("ngIf",e.preferences.energyOptimization),d(2),w("ngModel",e.preferences.projectGrouping),d(4),M("active",e.currentStep()===4),d(6),D(W(122,41,e.selectedDateStr(),"fullDate")),d(4),T("",e.scheduledTasks().length," tasks"),d(2),T("",e.getTotalScheduledTime()," scheduled"),d(2),T("",e.getAvailableTime()," available"),d(2),h("ngForOf",e.schedulePreview()),d(8),h("disabled",e.currentStep()===1),d(3),h("ngForOf",ce(44,Oe)),d(),h("ngIf",e.currentStep()<4),d(),h("ngIf",e.currentStep()===4)}}var K=class l{todoService=L(J);projectService=L(X);isOpenSignal=S(!1);isOpen=this.isOpenSignal.asReadonly();currentStepSignal=S(1);currentStep=this.currentStepSignal.asReadonly();selectedDateStrSignal=S(new Date().toISOString().split("T")[0]);selectedDateStr=this.selectedDateStrSignal.asReadonly();selectedDate=E(()=>{let[i,e,t]=this.selectedDateStrSignal().split("-").map(Number);return new Date(i,e-1,t)});taskFilterSignal=S("all");taskFilter=this.taskFilterSignal.asReadonly();selectedTasksSignal=S(new Set);selectedTasks=this.selectedTasksSignal.asReadonly();preferences={workingHours:{start:"09:00",end:"17:00"},lunchBreak:{enabled:!0,start:"12:00",duration:60},shortBreaks:{enabled:!0,duration:10,frequency:120},bufferTime:10,defaultTaskDuration:60,taskChunking:{enabled:!1,maxChunkSize:30},energyOptimization:!0,projectGrouping:!0,peakHours:{start:"09:00",end:"11:00"}};scheduledTasksSignal=S([]);scheduledTasks=this.scheduledTasksSignal.asReadonly();unscheduledTasks=E(()=>this.flattenTodos(this.todoService.todos()).filter(e=>!e.archived&&!e.completed&&!e.startDateTime&&!e.endDateTime));highPriorityTasks=E(()=>this.unscheduledTasks().filter(i=>i.priority==="high"));dueSoonTasks=E(()=>{let i=new Date;return i.setDate(i.getDate()+3),this.unscheduledTasks().filter(e=>e.dueDate&&new Date(e.dueDate)<=i)});filteredTasks=E(()=>{switch(this.taskFilter()){case"high":return this.highPriorityTasks();case"due":return this.dueSoonTasks();default:return this.unscheduledTasks()}});schedulePreview=E(()=>{let i=this.scheduledTasks(),e=[];if(i.forEach(t=>{e.push({type:"task",startTime:t.startTime,endTime:t.endTime,title:t.todo.title,reason:t.reason})}),this.preferences.lunchBreak.enabled){let t=this.parseTimeToDate(this.preferences.lunchBreak.start),n=new Date(t.getTime()+this.preferences.lunchBreak.duration*6e4);e.push({type:"lunch",startTime:t,endTime:n,title:"\u{1F37D}\uFE0F Lunch Break",reason:"Scheduled break"})}return this.preferences.shortBreaks.enabled&&i.length>0&&this.addShortBreaksToPreview(e,i),this.preferences.bufferTime>0&&i.length>1&&this.addBufferTimeToPreview(e,i),e.sort((t,n)=>t.startTime.getTime()-n.startTime.getTime())});open(){this.isOpenSignal.set(!0),this.currentStepSignal.set(1),this.generateSchedule()}closeDialog(){this.isOpenSignal.set(!1),this.currentStepSignal.set(1),this.selectedTasksSignal.set(new Set),this.scheduledTasksSignal.set([])}nextStep(){if(this.canProceed()){let i=this.currentStep()+1;this.currentStepSignal.set(i),i===4&&this.generateSchedule()}}previousStep(){this.currentStep()>1&&this.currentStepSignal.set(this.currentStep()-1)}canProceed(){switch(this.currentStep()){case 1:return!!this.selectedDateStr;case 2:return this.selectedTasks().size>0;case 3:return!0;default:return!0}}setTaskFilter(i){this.taskFilterSignal.set(i)}toggleTaskSelection(i){let e=new Set(this.selectedTasks());e.has(i.id)?e.delete(i.id):e.add(i.id),this.selectedTasksSignal.set(e)}selectAllTasks(){let i=new Set(this.filteredTasks().map(e=>e.id));this.selectedTasksSignal.set(i)}clearTaskSelection(){this.selectedTasksSignal.set(new Set)}onDateChange(i){this.selectedDateStrSignal.set(i),this.currentStep()===4&&this.generateSchedule()}flattenTodos(i){let e=[];for(let t of i)e.push(t),t.subtasks&&t.subtasks.length>0&&e.push(...this.flattenTodos(t.subtasks));return e}getProjectName(i){return this.projectService.projects().find(t=>t.id===i)?.name||"No Project"}formatDuration(i){if(i<60)return`${i}m`;let e=Math.floor(i/60),t=i%60;return t===0?`${e}h`:`${e}h ${t}m`}parseTimeToDate(i){let[e,t]=i.split(":").map(Number),n=new Date(this.selectedDate());return n.setHours(e,t,0,0),n}getTotalScheduledTime(){let i=this.scheduledTasks().reduce((e,t)=>{let n=t.endTime.getTime()-t.startTime.getTime();return e+n},0);return this.formatDuration(i/6e4)}getAvailableTime(){let i=this.parseTimeToDate(this.preferences.workingHours.start),t=this.parseTimeToDate(this.preferences.workingHours.end).getTime()-i.getTime(),n=this.scheduledTasks().reduce((c,p)=>{let m=p.endTime.getTime()-p.startTime.getTime();return c+m},0),o=t-n;return this.formatDuration(o/6e4)}generateSchedule(){let i=this.selectedTasks(),e=this.unscheduledTasks().filter(n=>i.has(n.id));if(e.length===0){this.scheduledTasksSignal.set([]);return}console.log(" Auto-plan generating schedule for:",this.selectedDateStr()),console.log(" Selected date object:",this.selectedDate()),console.log(" Work start time:",this.parseTimeToDate(this.preferences.workingHours.start)),console.log(" Work end time:",this.parseTimeToDate(this.preferences.workingHours.end));let t=this.scheduleTasksIntelligently(e);this.scheduledTasksSignal.set(t)}scheduleTasksIntelligently(i){let e=this.generateTimeSlots(),t=this.prioritizeTasks(i),n=this.preferences.taskChunking.enabled?this.createTaskChunks(t):t,o=[],c=this.parseTimeToDate(this.preferences.workingHours.start),p=new Date(c);for(let m of n){let x=m.duration||this.preferences.defaultTaskDuration;if(this.preferences.shortBreaks.enabled&&o.length>0&&(c.getTime()-p.getTime())/6e4>=this.preferences.shortBreaks.frequency&&(c=new Date(c.getTime()+this.preferences.shortBreaks.duration*6e4),p=new Date(c)),this.preferences.lunchBreak.enabled){let V=this.parseTimeToDate(this.preferences.lunchBreak.start),P=new Date(V.getTime()+this.preferences.lunchBreak.duration*6e4),N=new Date(c.getTime()+x*6e4);c<P&&N>V&&(c=new Date(P))}let k=this.findBestTimeSlotFromTime(e,x,c,m);if(k){let V=new Date(k.start),P=new Date(V.getTime()+x*6e4);o.push({todo:m,startTime:V,endTime:P,reason:this.getSchedulingReason(m,k)}),this.updateTimeSlots(e,V,P),c=new Date(P.getTime()+this.preferences.bufferTime*6e4)}}return o}createTaskChunks(i){let e=[];for(let t of i){let n=t.duration||this.preferences.defaultTaskDuration,o=this.preferences.taskChunking.maxChunkSize;if(n<=o)e.push(t);else{let c=Math.ceil(n/o);for(let p=0;p<c;p++){let x=p===c-1?n-p*o:o,k=H(z({},t),{id:`${t.id}_chunk_${p+1}`,title:`${t.title} (${p+1}/${c})`,duration:x,description:t.description?`${t.description}

[Chunk ${p+1} of ${c} - ${this.formatDuration(x)}]`:`[Chunk ${p+1} of ${c} - ${this.formatDuration(x)}]`});e.push(k)}}}return e}generateTimeSlots(){let i=[],e=this.parseTimeToDate(this.preferences.workingHours.start),t=this.parseTimeToDate(this.preferences.workingHours.end),n=this.getExistingTasksForSelectedDate(),o=new Date(e);for(;o<t;){if(this.preferences.lunchBreak.enabled){let m=this.parseTimeToDate(this.preferences.lunchBreak.start),x=new Date(m.getTime()+this.preferences.lunchBreak.duration*6e4);if(o>=m&&o<x){o=new Date(x);continue}}let c=new Date(o.getTime()+15*6e4);!n.some(m=>{let x=new Date(m.startDateTime),k=new Date(m.endDateTime);return o<k&&c>x})&&c<=t&&i.push({start:new Date(o),end:c,duration:15,type:"work"}),o=c}return i}getExistingTasksForSelectedDate(){let i=this.selectedDate();return this.flattenTodos(this.todoService.todos()).filter(t=>{if(!t.startDateTime||!t.endDateTime||t.archived)return!1;let n=new Date(t.startDateTime),o=new Date(t.endDateTime),c=new Date(i);c.setHours(0,0,0,0);let p=new Date(i);return p.setHours(23,59,59,999),n<p&&o>c})}prioritizeTasks(i){return i.sort((e,t)=>{let n={high:3,medium:2,low:1},o=n[t.priority]-n[e.priority];if(o!==0)return o;if(e.dueDate&&t.dueDate){let m=new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime();if(m!==0)return m}if(e.dueDate&&!t.dueDate)return-1;if(!e.dueDate&&t.dueDate)return 1;let c=e.duration||60,p=t.duration||60;return c-p})}findBestTimeSlot(i,e,t,n){for(let o=t;o<i.length;o++){let c=this.getConsecutiveSlots(i,o,e);if(c.length*15>=e)return{start:c[0].start,end:c[c.length-1].end,duration:e,type:"work"}}return null}findBestTimeSlotFromTime(i,e,t,n){let o=i.findIndex(c=>c.start>=t);if(o===-1)return null;if(this.preferences.energyOptimization&&n.priority==="high"){let c=this.parseTimeToDate(this.preferences.peakHours.start),p=this.parseTimeToDate(this.preferences.peakHours.end);for(let m=o;m<i.length;m++){let x=i[m];if(x.start>=c&&x.start<p){let k=this.getConsecutiveSlots(i,m,e);if(k.length*15>=e)return{start:k[0].start,end:k[k.length-1].end,duration:e,type:"work"}}}}for(let c=o;c<i.length;c++){let p=this.getConsecutiveSlots(i,c,e);if(p.length*15>=e)return{start:p[0].start,end:p[p.length-1].end,duration:e,type:"work"}}return null}getConsecutiveSlots(i,e,t){let n=[],o=0;for(let c=e;c<i.length&&o<t;c++){let p=i[c];if(p.type==="work")n.push(p),o+=p.duration;else break}return n}updateTimeSlots(i,e,t){for(let n=i.length-1;n>=0;n--){let o=i[n];o.start<t&&o.end>e&&i.splice(n,1)}}getSchedulingReason(i,e){let t=[];if(i.priority==="high"&&t.push("High priority"),i.dueDate&&Math.ceil((new Date(i.dueDate).getTime()-Date.now())/864e5)<=1&&t.push("Due soon"),this.preferences.energyOptimization){let n=this.parseTimeToDate(this.preferences.peakHours.start),o=this.parseTimeToDate(this.preferences.peakHours.end);e.start>=n&&e.start<o&&t.push("Peak hours")}return t.join(", ")||"Available time slot"}addShortBreaksToPreview(i,e){let t=this.parseTimeToDate(this.preferences.workingHours.start),n=new Date(t);for(let o=0;o<e.length;o++){let c=e[o];if((c.startTime.getTime()-n.getTime())/(1e3*60)>=this.preferences.shortBreaks.frequency&&o>0){let m=new Date(c.startTime.getTime()-this.preferences.shortBreaks.duration*6e4),x=new Date(c.startTime);i.push({type:"break",startTime:m,endTime:x,title:"\u2615 Short Break",reason:`${this.preferences.shortBreaks.duration} min break`}),n=x}}}addBufferTimeToPreview(i,e){for(let t=0;t<e.length-1;t++){let n=e[t],o=e[t+1],c=n.endTime,p=new Date(c.getTime()+this.preferences.bufferTime*6e4);p<=o.startTime&&i.push({type:"buffer",startTime:c,endTime:p,title:"\u23F1\uFE0F Buffer Time",reason:`${this.preferences.bufferTime} min buffer`})}}regenerateSchedule(){this.generateSchedule()}exportSchedule(){let e=this.schedulePreview().map(t=>`${t.startTime.toLocaleTimeString()} - ${t.endTime.toLocaleTimeString()}: ${t.title}`).join(`
`);navigator.clipboard.writeText(e)}applySchedule(){return R(this,null,function*(){let i=this.scheduledTasks();try{let e=new Map;for(let t of i){let n=t.todo.id.includes("_chunk_")?t.todo.id.split("_chunk_")[0]:t.todo.id;e.has(n)||e.set(n,[]),e.get(n).push(t)}for(let[t,n]of e)if(n.length===1&&!n[0].todo.id.includes("_chunk_")){let o=n[0];console.log(" Applying schedule for task:",o.todo.title),console.log(" Start time:",o.startTime),console.log(" End time:",o.endTime),yield this.todoService.updateTodo(o.todo.id,{startDateTime:o.startTime,endDateTime:o.endTime,isAutoPlanned:!0})}else{let o=n.sort((p,m)=>p.startTime.getTime()-m.startTime.getTime()),c=this.unscheduledTasks().find(p=>p.id===t);console.log(" Applying chunked schedule for task:",c?.title),console.log(" Total chunks:",n.length);for(let p=0;p<o.length;p++){let m=o[p],x=`${c?.title} (${p+1}/${n.length})`;console.log(` Creating chunk ${p+1}: ${x}`),console.log(` Chunk time: ${m.startTime} - ${m.endTime}`),this.todoService.addSubtask(t,{title:x,description:`Chunk ${p+1} of ${n.length} - ${this.formatDuration(m.todo.duration||this.preferences.defaultTaskDuration)}`,priority:c?.priority||"medium",projectId:c?.projectId,startDateTime:m.startTime,endDateTime:m.endTime,duration:m.todo.duration,completed:!1,isAutoPlanned:!0})}yield this.todoService.updateTodo(t,{isAutoPlanned:!0,description:c?.description?`${c.description}

[Auto-planned into ${n.length} chunks]`:`[Auto-planned into ${n.length} chunks]`})}this.closeDialog()}catch(e){console.error("Failed to apply schedule:",e)}})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=G({type:l,selectors:[["app-auto-plan-dialog"]],decls:1,vars:1,consts:[["class","auto-plan-overlay",3,"click",4,"ngIf"],[1,"auto-plan-overlay",3,"click"],[1,"auto-plan-dialog",3,"click"],[1,"dialog-header"],[1,"close-btn",3,"click"],[1,"dialog-content"],[1,"step"],["type","date",1,"date-input",3,"ngModelChange","ngModel"],[1,"step-description"],[1,"task-selection"],[1,"task-filters"],[1,"filter-btn",3,"click"],[1,"task-list"],["class","task-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"task-actions"],[1,"action-btn","secondary",3,"click"],[1,"preferences-grid"],[1,"pref-group"],[1,"time-range"],["type","time",1,"time-input",3,"ngModelChange","ngModel"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],["class","lunch-settings",4,"ngIf"],["class","break-settings",4,"ngIf"],[1,"duration-select",3,"ngModelChange","ngModel"],["value","0"],["value","5"],["value","10"],["value","15"],["value","30"],["value","45"],["value","60"],["value","90"],["value","120"],[1,"help-text"],["class","chunk-settings",4,"ngIf"],["class","peak-hours",4,"ngIf"],[1,"preview-container"],[1,"preview-header"],[1,"preview-stats"],[1,"schedule-preview"],["class","schedule-item",3,"class",4,"ngFor","ngForOf"],[1,"preview-actions"],[1,"dialog-footer"],[1,"step-navigation"],[1,"nav-btn",3,"click","disabled"],[1,"step-indicator"],["class","step-dot",3,"active","completed",4,"ngFor","ngForOf"],["class","nav-btn",3,"disabled","click",4,"ngIf"],["class","action-btn primary",3,"disabled","click",4,"ngIf"],[1,"task-item",3,"click"],[1,"task-checkbox"],["type","checkbox",3,"change","click","checked"],[1,"task-info"],[1,"task-title"],[1,"task-meta"],[1,"priority"],[1,"project"],["class","duration",4,"ngIf"],["class","due-date",4,"ngIf"],[1,"duration"],[1,"due-date"],[1,"lunch-settings"],[1,"break-settings"],[1,"chunk-settings"],["value","20"],["value","25"],[1,"peak-hours"],[1,"schedule-item"],[1,"time-slot"],[1,"item-content"],[1,"item-title"],["class","item-reason",4,"ngIf"],[1,"item-reason"],[1,"step-dot"],[1,"action-btn","primary",3,"click","disabled"]],template:function(e,t){e&1&&b(0,Re,145,45,"div",0),e&2&&h("ngIf",t.isOpen())},dependencies:[Q,Y,q,Te,be,ke,fe,ge,xe,he,_e,U],styles:[".auto-plan-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.auto-plan-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 60px #0000004d;width:90vw;max-width:800px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb;background:#f9fafb}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#1f2937}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#6b7280;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.dialog-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px}.step[_ngcontent-%COMP%]{display:none;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.step.active[_ngcontent-%COMP%]{display:block}.step[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:1.25rem;font-weight:600;color:#1f2937}.step-description[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:20px;font-size:.875rem}.date-input[_ngcontent-%COMP%]{padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;width:200px;transition:border-color .2s ease}.date-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.task-selection[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.task-filters[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #d1d5db;background:#fff;border-radius:6px;cursor:pointer;transition:all .2s ease;font-size:.875rem;font-weight:500}.filter-btn[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#9ca3af}.filter-btn.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border-color:#3b82f6}.task-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid #e5e7eb;border-radius:8px;background:#f9fafb}.task-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid #e5e7eb;cursor:pointer;transition:background-color .2s ease}.task-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.task-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.task-item.selected[_ngcontent-%COMP%]{background:#eff6ff;border-color:#3b82f6}.task-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;cursor:pointer}.task-info[_ngcontent-%COMP%]{flex:1;min-width:0}.task-title[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.task-meta[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;font-size:.75rem;color:#6b7280;flex-wrap:wrap}.priority[_ngcontent-%COMP%]{padding:2px 6px;border-radius:4px;font-weight:600;text-transform:uppercase;font-size:.6875rem}.priority-high[_ngcontent-%COMP%]{background:#fef2f2;color:#991b1b}.priority-medium[_ngcontent-%COMP%]{background:#fffbeb;color:#92400e}.priority-low[_ngcontent-%COMP%]{background:#f0fdf4;color:#065f46}.project[_ngcontent-%COMP%]{background:#f3f4f6;padding:2px 6px;border-radius:4px}.duration[_ngcontent-%COMP%], .due-date[_ngcontent-%COMP%]{background:#eff6ff;color:#1d4ed8;padding:2px 6px;border-radius:4px}.task-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}.preferences-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px}.pref-group[_ngcontent-%COMP%]{background:#f9fafb;padding:16px;border-radius:8px;border:1px solid #e5e7eb}.pref-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1rem;font-weight:600;color:#1f2937}.time-range[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto 1fr;gap:8px;align-items:center}.time-input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem}.time-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 2px #3b82f61a}.duration-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem;background:#fff}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;margin-bottom:12px;cursor:pointer;font-size:.875rem}.checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:2px}.help-text[_ngcontent-%COMP%]{display:block;color:#6b7280;font-size:.75rem;margin-top:2px}.lunch-settings[_ngcontent-%COMP%], .break-settings[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:8px;align-items:center;margin-top:8px;padding-left:20px}.peak-hours[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto 1fr;gap:8px;align-items:center;margin-top:8px;padding-left:20px}.preview-container[_ngcontent-%COMP%]{background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.preview-header[_ngcontent-%COMP%]{padding:16px;background:#fff;border-bottom:1px solid #e5e7eb}.preview-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.125rem;font-weight:600;color:#1f2937}.preview-stats[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:.875rem;color:#6b7280}.schedule-preview[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.schedule-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px 16px;border-bottom:1px solid #e5e7eb;transition:background-color .2s ease}.schedule-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.schedule-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-task[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.item-lunch[_ngcontent-%COMP%]{border-left:4px solid #f59e0b;background:#fffbeb}.item-break[_ngcontent-%COMP%]{border-left:4px solid #10b981;background:#f0fdf4}.item-buffer[_ngcontent-%COMP%]{border-left:4px solid #8b5cf6;background:#faf5ff}.time-slot[_ngcontent-%COMP%]{font-weight:600;color:#374151;min-width:120px;font-size:.875rem}.item-content[_ngcontent-%COMP%]{flex:1}.item-title[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;margin-bottom:2px}.item-reason[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-style:italic}.preview-actions[_ngcontent-%COMP%]{padding:16px;background:#fff;border-top:1px solid #e5e7eb;display:flex;gap:8px}.dialog-footer[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid #e5e7eb;background:#f9fafb}.step-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.nav-btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #d1d5db;background:#fff;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s ease}.nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;border-color:#9ca3af}.nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.step-indicator[_ngcontent-%COMP%]{display:flex;gap:8px}.step-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#d1d5db;transition:background-color .2s ease}.step-dot.active[_ngcontent-%COMP%]{background:#3b82f6}.step-dot.completed[_ngcontent-%COMP%]{background:#10b981}.action-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:.875rem;transition:all .2s ease;display:inline-flex;align-items:center;gap:6px}.action-btn.primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.action-btn.secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.auto-plan-dialog[_ngcontent-%COMP%]{width:95vw;max-height:95vh}.preferences-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.task-meta[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.step-navigation[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.preview-stats[_ngcontent-%COMP%]{flex-direction:column;gap:4px}}@media (max-width: 480px){.dialog-content[_ngcontent-%COMP%], .dialog-header[_ngcontent-%COMP%], .dialog-footer[_ngcontent-%COMP%]{padding:16px}.time-range[_ngcontent-%COMP%], .lunch-settings[_ngcontent-%COMP%], .break-settings[_ngcontent-%COMP%], .peak-hours[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.schedule-item[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.time-slot[_ngcontent-%COMP%]{min-width:auto}}"]})};var $e=["taskEditor"],Ge=["autoPlanDialog"];function Ye(l,i){if(l&1&&(s(0),I(1,"date")),l&2){let e=u();T(" ",W(1,1,e.selectedDate(),"fullDate")," ")}}function qe(l,i){if(l&1&&s(0),l&2){let e=u();T(" ",e.formatWeekRange(e.weekStart())," ")}}function Ue(l,i){l&1&&s(0," Today ")}function Qe(l,i){l&1&&s(0," This Week ")}function Xe(l,i){if(l&1&&(r(0,"div",34),s(1),I(2,"date"),a()),l&2){let e=i.$implicit;d(),D(W(2,1,e,"EEE MMM d"))}}function Je(l,i){if(l&1&&(r(0,"div",31),y(1,"div",32),b(2,Xe,3,4,"div",33),a()),l&2){let e=u();B("grid-template-columns","60px repeat(7, 1fr)"),d(2),h("ngForOf",e.weekDays())}}function Ke(l,i){if(l&1&&(A(0),r(1,"div",35),s(2),a(),F()),l&2){let e=i.$implicit,t=u();d(),B("grid-row",e*12+6+" / span 1"),d(),D(t.formatHour(e))}}function Ze(l,i){if(l&1&&(A(0),y(1,"div",36),F()),l&2){let e=i.$implicit;d(),B("grid-row",e+1+" / span 1"),M("hour-line",e%12===0)}}function et(l,i){if(l&1&&(A(0),y(1,"div",37),F()),l&2){let e=i.$implicit;d(),B("grid-row",e*6+1+" / span 1")}}function tt(l,i){if(l&1&&y(0,"div",39),l&2){let e=u().index;B("grid-column",e+1+" / "+(e+2))}}function nt(l,i){if(l&1&&(A(0),b(1,tt,1,2,"div",38),F()),l&2){let e=i.index;d(),h("ngIf",e>0)}}function it(l,i){if(l&1&&(A(0),b(1,nt,2,1,"ng-container",25),F()),l&2){let e=u();d(),h("ngForOf",e.weekDays())}}function ot(l,i){if(l&1){let e=O();r(0,"a",41),_("click",function(n){let o=g(e).$implicit,c=u(2);return n.preventDefault(),f(c.openEditor(o.todo))})("mouseenter",function(n){let o=g(e).$implicit,c=u(2);return f(c.showTooltip(n,o))})("mousemove",function(n){g(e);let o=u(2);return f(o.moveTooltip(n))})("mouseleave",function(){g(e);let n=u(2);return f(n.hideTooltip())}),r(1,"div",42)(2,"div",43),s(3),a(),r(4,"div",44),s(5),a()()()}if(l&2){let e=i.$implicit,t=u(2);j("priority-"+e.todo.priority),B("grid-row",e.rowStart+" / "+e.rowEnd)("width",e.width||100,"%")("left",e.left||0,"%")("position",e.width&&e.width<100?"relative":"static")("background",t.getProjectBackgroundColor(e.todo.projectId)),te("aria-describedby",t.tooltipVisible()&&t.isTooltipFor(e)?"tt-"+e.todo.id:null),d(3),D(e.todo.title),d(2),D(e.displayTime)}}function rt(l,i){if(l&1&&(A(0),b(1,ot,6,15,"a",40),F()),l&2){let e=u();d(),h("ngForOf",e.timetableBlocksDay())}}function at(l,i){if(l&1){let e=O();r(0,"a",46),_("click",function(n){let o=g(e).$implicit,c=u(2);return n.preventDefault(),f(c.openEditor(o.todo))})("mouseenter",function(n){let o=g(e).$implicit,c=u(2);return f(c.showTooltip(n,o))})("mousemove",function(n){g(e);let o=u(2);return f(o.moveTooltip(n))})("mouseleave",function(){g(e);let n=u(2);return f(n.hideTooltip())}),r(1,"div",42)(2,"div",43),s(3),a(),r(4,"div",44),s(5),a()()()}if(l&2){let e=i.$implicit,t=u(2);j("priority-"+e.todo.priority),B("grid-row",e.rowStart+" / "+e.rowEnd)("grid-column",e.col+1+" / "+(e.col+2))("width",e.width||100,"%")("left",e.left||0,"%")("position",e.width&&e.width<100?"relative":"static")("background",t.getProjectBackgroundColor(e.todo.projectId)),te("aria-describedby",t.tooltipVisible()&&t.isTooltipFor(e)?"tt-"+e.todo.id:null),d(3),D(e.todo.title),d(2),D(e.displayTime)}}function st(l,i){if(l&1&&(A(0),b(1,at,6,17,"a",45),F()),l&2){let e=u();d(),h("ngForOf",e.timetableBlocksWeek())}}function lt(l,i){if(l&1&&(r(0,"div",47),y(1,"div",48)(2,"div",49),a()),l&2){let e=u();B("grid-row",e.getCurrentTimeGridRow()+" / span 1")("grid-column",e.getCurrentTimeGridColumn())}}function ct(l,i){if(l&1&&(r(0,"div",54)(1,"span",55),s(2,"Category:"),a(),s(3),a()),l&2){let e=u().ngIf;d(3),T(" ",e.todo.category)}}function dt(l,i){if(l&1&&(r(0,"div",58),s(1),a()),l&2){let e=u().ngIf;d(),D(e.todo.description)}}function pt(l,i){if(l&1&&(r(0,"div",50)(1,"div",51),y(2,"span",52),r(3,"span",53),s(4),a()(),r(5,"div",54)(6,"span",55),s(7,"When:"),a(),s(8),a(),r(9,"div",54)(10,"span",55),s(11,"Priority:"),a(),s(12),I(13,"titlecase"),a(),b(14,ct,4,1,"div",56)(15,dt,2,1,"div",57),a()),l&2){let e=i.ngIf,t=u();B("left",t.tooltipX(),"px")("top",t.tooltipY(),"px"),h("id","tt-"+e.todo.id),d(2),j("prio-"+e.todo.priority),d(2),D(e.todo.title),d(4),T(" ",e.displayTime),d(4),T(" ",de(13,12,e.todo.priority)),d(2),h("ngIf",e.todo.category),d(),h("ngIf",e.todo.description)}}function ut(l,i){l&1&&(r(0,"div",59)(1,"div",60),s(2,"\u{1F5D3}\uFE0F"),a(),r(3,"h3"),s(4,"No scheduled tasks for this day"),a(),r(5,"p"),s(6,"Tasks with a start and end time will appear here with accurate spacing."),a()())}function mt(l,i){l&1&&(r(0,"div",59)(1,"div",60),s(2,"\u{1F5D3}\uFE0F"),a(),r(3,"h3"),s(4,"No scheduled tasks for this week"),a(),r(5,"p"),s(6,"Tasks with a start and end time will appear here with accurate spacing."),a()())}var ve=class l{taskEditor;autoPlanDialog;editingTodo=S(null);tooltipVisible=S(!1);tooltipBlock=S(null);tooltipX=S(0);tooltipY=S(0);showTooltip(i,e){this.tooltipBlock.set(e),this.tooltipVisible.set(!0),this.positionTooltip(i)}moveTooltip(i){this.tooltipVisible()&&this.positionTooltip(i)}hideTooltip(){this.tooltipVisible.set(!1),this.tooltipBlock.set(null)}positionTooltip(i){let o=i.clientX+12,c=i.clientY+12,p=window.innerWidth,m=window.innerHeight;o+280>p&&(o=Math.max(8,i.clientX-280-12)),c+140>m&&(c=Math.max(8,i.clientY-140-12)),this.tooltipX.set(o),this.tooltipY.set(c)}todoService=L(J);projectService=L(X);currentTimeSignal=S(new Date);currentTime=this.currentTimeSignal.asReadonly();timeUpdateInterval;constructor(){this.timeUpdateInterval=window.setInterval(()=>{this.currentTimeSignal.set(new Date)},6e4)}ngOnDestroy(){this.timeUpdateInterval&&clearInterval(this.timeUpdateInterval)}openEditor(i){this.editingTodo.set(i),setTimeout(()=>this.taskEditor?.open())}closeEditor(){this.taskEditor?.closeAndReset?.(),this.editingTodo.set(null)}onSave(i){return R(this,null,function*(){let e=this.editingTodo();if(e)try{yield this.todoService.updateTodo(e.id,i),this.closeEditor()}catch(t){if(t&&t.message==="OVERLAP_CANCELLED")return;console.error("Failed to update task:",t)}})}currentViewSignal=S("day");currentView=this.currentViewSignal.asReadonly();selectedDateSignal=S(new Date);selectedDate=this.selectedDateSignal.asReadonly();hours=Array.from({length:24},(i,e)=>e);fiveMinutes=Array.from({length:288},(i,e)=>e);halfHours=Array.from({length:48},(i,e)=>e);setView(i){this.currentViewSignal.set(i)}previous(){return this.currentView()==="day"?this.previousDay():this.previousWeek()}next(){return this.currentView()==="day"?this.nextDay():this.nextWeek()}flattenTodos(i){let e=[];for(let t of i)e.push(t),t.subtasks&&t.subtasks.length>0&&e.push(...this.flattenTodos(t.subtasks));return e}scheduledForDay=E(()=>{let i=this.selectedDate();return this.flattenTodos(this.todoService.todos()).filter(t=>!t.archived&&t.startDateTime&&t.endDateTime&&this.isTaskOnDate(t,i))});timetableBlocksDay=E(()=>{let i=this.selectedDate(),e=new Date(i);e.setHours(0,0,0,0);let t=new Date(i);t.setHours(23,59,59,999);let n=this.scheduledForDay().map(o=>{let c=new Date(o.startDateTime),p=new Date(o.endDateTime),m=c<e?e:c,x=p>t?t:p,k=this.timeToRow(m),V=Math.max(k+1,this.timeToRowEnd(x));return{todo:o,rowStart:k,rowEnd:V,displayTime:this.getDisplayRange(o)}}).sort((o,c)=>o.rowStart-c.rowStart);return this.calculateOverlaps(n)});getStartOfWeek(i){let e=new Date(i),t=e.getDay(),n=e.getDate()-t;return e.setDate(n),e.setHours(0,0,0,0),e}weekStart=E(()=>this.getStartOfWeek(this.selectedDate()));weekDays=E(()=>{let i=this.weekStart();return Array.from({length:7},(e,t)=>{let n=new Date(i);return n.setDate(i.getDate()+t),n})});timetableBlocksWeek=E(()=>{let i=this.flattenTodos(this.todoService.todos()).filter(o=>!o.archived&&o.startDateTime&&o.endDateTime),e=this.weekStart(),t=this.weekDays(),n=[];return t.forEach((o,c)=>{let p=new Date(o);p.setHours(0,0,0,0);let m=new Date(o);m.setHours(23,59,59,999);let k=i.filter(P=>{let N=new Date(P.startDateTime),$=new Date(P.endDateTime);return N<=m&&$>=p}).map(P=>{let N=new Date(P.startDateTime),$=new Date(P.endDateTime),Ce=N<p?p:N,Se=$>m?m:$,se=this.timeToRow(Ce),ye=Math.max(se+1,this.timeToRowEnd(Se));return{todo:P,rowStart:se,rowEnd:ye,displayTime:this.getDisplayRange(P,!0),col:c+1}}),V=this.calculateOverlapsForDay(k);n.push(...V)}),n.sort((o,c)=>o.col-c.col||o.rowStart-c.rowStart)});previousDay(){let i=this.selectedDate(),e=new Date(i);e.setDate(i.getDate()-1),this.selectedDateSignal.set(e)}nextDay(){let i=this.selectedDate(),e=new Date(i);e.setDate(i.getDate()+1),this.selectedDateSignal.set(e)}previousWeek(){let i=this.selectedDate(),e=new Date(i);e.setDate(i.getDate()-7),this.selectedDateSignal.set(e)}nextWeek(){let i=this.selectedDate(),e=new Date(i);e.setDate(i.getDate()+7),this.selectedDateSignal.set(e)}goToToday(){this.selectedDateSignal.set(new Date)}isToday(i){let e=new Date;return this.isSameDay(i,e)}isSameDay(i,e){return i.getFullYear()===e.getFullYear()&&i.getMonth()===e.getMonth()&&i.getDate()===e.getDate()}isTaskOnDate(i,e){if(!i.startDateTime&&!i.endDateTime)return!1;let t=i.startDateTime?new Date(i.startDateTime):null,n=i.endDateTime?new Date(i.endDateTime):null,o=new Date(e);o.setHours(0,0,0,0);let c=new Date(e);return c.setHours(23,59,59,999),t&&n?t<=c&&n>=o:!1}timeToRow(i){let e=i.getHours()*60+i.getMinutes();return Math.floor(e/5)+1}timeToRowEnd(i){let e=i.getHours()*60+i.getMinutes();return Math.ceil(e/5)+1}formatHour(i){let e=new Date;return e.setHours(i,0,0,0),e.toLocaleTimeString([],{hour:"numeric",hour12:!0})}formatWeekRange(i){let e=new Date(i);e.setDate(i.getDate()+6);let t=i.toLocaleDateString([],{month:"short",day:"numeric"}),n=e.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"});return`${t} - ${n}`}isTooltipFor(i){let e=this.tooltipBlock();return!!e&&e.todo.id===i.todo.id}calculateOverlaps(i){if(i.length===0)return i;let e=[];for(let n of i){let o=!1;for(let c of e)if(c.some(p=>this.blocksOverlap(n,p))){c.push(n),o=!0;break}o||e.push([n])}let t=[];for(let n of e)if(n.length===1)t.push(H(z({},n[0]),{width:100,left:0}));else{let o=n.sort((p,m)=>p.rowStart-m.rowStart||p.rowEnd-m.rowEnd),c=100/o.length;o.forEach((p,m)=>{t.push(H(z({},p),{width:c,left:c*m}))})}return t.sort((n,o)=>n.rowStart-o.rowStart)}blocksOverlap(i,e){return i.rowStart<e.rowEnd&&i.rowEnd>e.rowStart}calculateOverlapsForDay(i){if(i.length===0)return i;let e=[];for(let n of i){let o=!1;for(let c of e)if(c.some(p=>this.blocksOverlap(n,p))){c.push(n),o=!0;break}o||e.push([n])}let t=[];for(let n of e)if(n.length===1)t.push(H(z({},n[0]),{width:100,left:0}));else{let o=n.sort((p,m)=>p.rowStart-m.rowStart||p.rowEnd-m.rowEnd),c=100/o.length;o.forEach((p,m)=>{t.push(H(z({},p),{width:c,left:c*m}))})}return t}getDisplayRange(i,e=!1){let t=new Date(i.startDateTime),n=new Date(i.endDateTime),o={hour:"numeric",minute:"2-digit",hour12:!0};if(!e)return`${t.toLocaleTimeString([],o)} - ${n.toLocaleTimeString([],o)}`;let c={weekday:"short"},p=t.toLocaleDateString([],c),m=n.toLocaleDateString([],c);return this.isSameDay(t,n)?`${p} ${t.toLocaleTimeString([],o)} - ${n.toLocaleTimeString([],o)}`:`${p} ${t.toLocaleTimeString([],o)} - ${m} ${n.toLocaleTimeString([],o)}`}getProjectColor(i){return this.projectService.projects().find(t=>t.id===i)?.color||"#6b7280"}getProjectName(i){return this.projectService.projects().find(t=>t.id===i)?.name||"No Project"}getProjectBackgroundColor(i){let t=this.getProjectColor(i).replace("#",""),n=parseInt(t.substr(0,2),16),o=parseInt(t.substr(2,2),16),c=parseInt(t.substr(4,2),16),p=Math.round(n*.15+255*.85),m=Math.round(o*.15+255*.85),x=Math.round(c*.15+255*.85);return`rgb(${p}, ${m}, ${x})`}shouldShowCurrentTimeIndicator(){let i=this.currentTime();if(this.currentView()==="day")return this.isSameDay(i,this.selectedDate());if(this.currentView()==="week"){let e=this.weekStart(),t=new Date(e);return t.setDate(e.getDate()+6),i>=e&&i<=t}return!1}getCurrentTimeGridRow(){let i=this.currentTime(),e=i.getHours(),t=i.getMinutes(),n=e*60+t;return Math.floor(n/5)+1}getCurrentTimeGridColumn(){if(this.currentView()==="day")return"2 / 3";if(this.currentView()==="week"){let i=this.currentTime(),t=this.weekDays().findIndex(n=>this.isSameDay(n,i));if(t>=0){let n=t+2,o=n+1;return`${n} / ${o}`}}return"1 / -1"}openAutoPlan(){this.autoPlanDialog.open()}removeAutoPlannedTasks(){return R(this,null,function*(){if(this.getAutoPlannedTasksCount()!==0)try{yield this.todoService.removeAutoPlannedTasks()}catch(e){console.error("Failed to remove auto-planned tasks:",e)}})}getAutoPlannedTasksCount(){return this.todoService.getAutoPlannedTasksCount()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=G({type:l,selectors:[["app-timetable"]],viewQuery:function(e,t){if(e&1&&(oe($e,5),oe(Ge,5)),e&2){let n;re(n=ae())&&(t.taskEditor=n.first),re(n=ae())&&(t.autoPlanDialog=n.first)}},decls:55,vars:23,consts:[["taskEditor",""],["autoPlanDialog",""],[1,"timetable-container"],[1,"timetable-header"],[1,"header-controls"],[1,"view-controls"],[1,"view-btn",3,"click"],[1,"plan-controls"],["title","Auto-plan your day",1,"auto-plan-btn",3,"click"],["title","Remove auto-planned tasks",1,"remove-auto-plan-btn",3,"click","disabled"],[1,"date-header"],[1,"current-date"],[1,"date-navigation"],[1,"nav-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M9.707 4.293a1 1 0 010 1.414L7.414 8l2.293 2.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z"],[1,"nav-btn",3,"click","disabled"],["d","M6.293 4.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L8.586 8 6.293 5.707a1 1 0 010-1.414z"],[1,"legend"],[1,"legend-item"],[1,"legend-color","priority-high"],[1,"legend-color","priority-medium"],[1,"legend-color","priority-low"],["class","day-headers",3,"gridTemplateColumns",4,"ngIf"],[1,"timetable-grid",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","current-time-indicator",3,"gridRow","gridColumn",4,"ngIf"],["class","task-tooltip floating","role","tooltip",3,"id","left","top",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"save","close","todo","isSubtask"],[1,"day-headers"],[1,"time-spacer"],["class","day-header",4,"ngFor","ngForOf"],[1,"day-header"],[1,"time-label"],[1,"grid-line",2,"grid-column","1 / -1","opacity","0.3"],[1,"grid-line","hour-line",2,"grid-column","1 / -1"],["class","day-separator","style","grid-row: 1 / -1",3,"gridColumn",4,"ngIf"],[1,"day-separator",2,"grid-row","1 / -1"],["class","task-block","href","#","style","grid-column: 2 / 3",3,"gridRow","width","left","position","class","background","click","mouseenter","mousemove","mouseleave",4,"ngFor","ngForOf"],["href","#",1,"task-block",2,"grid-column","2 / 3",3,"click","mouseenter","mousemove","mouseleave"],[1,"task-content-in"],[1,"task-title"],[1,"task-time"],["class","task-block","href","#",3,"gridRow","gridColumn","width","left","position","class","background","click","mouseenter","mousemove","mouseleave",4,"ngFor","ngForOf"],["href","#",1,"task-block",3,"click","mouseenter","mousemove","mouseleave"],[1,"current-time-indicator"],[1,"time-indicator-dot"],[1,"time-indicator-line"],["role","tooltip",1,"task-tooltip","floating",3,"id"],[1,"tt-header"],[1,"tt-priority-dot"],[1,"tt-title"],[1,"tt-row"],[1,"tt-label"],["class","tt-row",4,"ngIf"],["class","tt-desc",4,"ngIf"],[1,"tt-desc"],[1,"empty-state"],[1,"empty-icon"]],template:function(e,t){if(e&1){let n=O();r(0,"div",2)(1,"header",3)(2,"h1"),s(3,"Timetable"),a(),r(4,"div",4)(5,"div",5)(6,"button",6),_("click",function(){return g(n),f(t.setView("day"))}),s(7,"Day"),a(),r(8,"button",6),_("click",function(){return g(n),f(t.setView("week"))}),s(9,"Week"),a()(),r(10,"div",7)(11,"button",8),_("click",function(){return g(n),f(t.openAutoPlan())}),s(12," Auto-Plan "),a(),r(13,"button",9),_("click",function(){return g(n),f(t.removeAutoPlannedTasks())}),s(14),a()()()(),r(15,"div",10)(16,"h2",11),ne(17,Ye,2,4)(18,qe,1,1),a(),r(19,"div",12)(20,"button",13),_("click",function(){return g(n),f(t.previous())}),Z(),r(21,"svg",14),y(22,"path",15),a()(),ee(),r(23,"button",16),_("click",function(){return g(n),f(t.goToToday())}),ne(24,Ue,1,0)(25,Qe,1,0),a(),r(26,"button",13),_("click",function(){return g(n),f(t.next())}),Z(),r(27,"svg",14),y(28,"path",17),a()()()(),ee(),r(29,"div",18)(30,"span",19),y(31,"span",20),s(32," High"),a(),r(33,"span",19),y(34,"span",21),s(35," Medium"),a(),r(36,"span",19),y(37,"span",22),s(38," Low"),a()(),b(39,Je,3,3,"div",23),r(40,"div",24),b(41,Ke,3,3,"ng-container",25)(42,Ze,2,4,"ng-container",25)(43,et,2,2,"ng-container",25)(44,it,2,1,"ng-container",26)(45,rt,2,1,"ng-container",26)(46,st,2,1,"ng-container",26)(47,lt,3,4,"div",27),a(),b(48,pt,16,14,"div",28)(49,ut,7,0,"div",29)(50,mt,7,0,"div",29),a(),r(51,"app-task-editor",30,0),_("save",function(c){return g(n),f(t.onSave(c))})("close",function(){return g(n),f(t.closeEditor())}),a(),y(53,"app-auto-plan-dialog",null,1)}if(e&2){let n;d(6),M("active",t.currentView()==="day"),d(2),M("active",t.currentView()==="week"),d(5),h("disabled",t.getAutoPlannedTasksCount()===0),d(),T(" \u{1F5D1}\uFE0F Remove Auto-Planned (",t.getAutoPlannedTasksCount(),") "),d(3),ie(t.currentView()==="day"?17:18),d(6),h("disabled",t.isToday(t.selectedDate())),d(),ie(t.currentView()==="day"?24:25),d(15),h("ngIf",t.currentView()==="week"),d(),h("ngClass",t.currentView()==="week"?"grid-week":"grid-day"),d(),h("ngForOf",t.hours),d(),h("ngForOf",t.fiveMinutes),d(),h("ngForOf",t.halfHours),d(),h("ngIf",t.currentView()==="week"),d(),h("ngIf",t.currentView()==="day"),d(),h("ngIf",t.currentView()==="week"),d(),h("ngIf",t.shouldShowCurrentTimeIndicator()),d(),h("ngIf",t.tooltipVisible()&&t.tooltipBlock()),d(),h("ngIf",t.currentView()==="day"&&t.timetableBlocksDay().length===0),d(),h("ngIf",t.currentView()==="week"&&t.timetableBlocksWeek().length===0),d(),h("todo",t.editingTodo())("isSubtask",!!((n=t.editingTodo())!=null&&n.parentId))}},dependencies:[Q,pe,Y,q,me,we,K,ue,U],styles:[".timetable-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.timetable-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #e2e8f0}.timetable-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:700;color:#1f2937}.header-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.date-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.date-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#1f2937}.view-controls[_ngcontent-%COMP%]{display:flex;gap:8px;background:#f8fafc;padding:4px;border-radius:8px;border:1px solid #e2e8f0}.view-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;background:transparent;color:#6b7280;font-weight:500;border-radius:6px;cursor:pointer;transition:all .2s ease}.view-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#374151}.view-btn.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 1px 3px #3b82f64d}.date-navigation[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.nav-btn[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:6px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px;font-size:.875rem}.nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;border-color:#9ca3af}.nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.legend[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.legend-item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;color:#4b5563}.legend-color[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block}.legend-color.priority-high[_ngcontent-%COMP%]{background:#ef4444}.legend-color.priority-medium[_ngcontent-%COMP%]{background:#f59e0b}.legend-color.priority-low[_ngcontent-%COMP%]{background:#10b981}.day-headers[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px repeat(7,1fr);gap:8px;align-items:center;margin-bottom:8px}.day-header[_ngcontent-%COMP%]{font-weight:600;color:#374151;text-align:center}.time-spacer[_ngcontent-%COMP%]{height:1px}.timetable-grid[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-rows:repeat(288,4px);grid-template-columns:60px 1fr;grid-auto-columns:1fr;padding-left:0;border:1px solid #e5e7eb;border-radius:8px;background:#fff}.timetable-grid.grid-day[_ngcontent-%COMP%]{grid-template-columns:60px 1fr}.timetable-grid.grid-week[_ngcontent-%COMP%]{grid-template-columns:60px repeat(7,1fr)}.time-label[_ngcontent-%COMP%]{grid-column:1 / 2;position:relative;justify-self:end;padding-right:8px;color:#6b7280;font-size:12px;align-self:center}.grid-line[_ngcontent-%COMP%]{grid-column:1 / -1;border-top:1px dashed #e5e7eb}.grid-line.hour-line[_ngcontent-%COMP%]{border-top:1px solid #d1d5db}.day-separator[_ngcontent-%COMP%]{border-right:1px solid #e5e7eb;pointer-events:none;z-index:0;justify-self:end}.task-block[_ngcontent-%COMP%]{grid-column:2 / 3;display:block;margin:1px 0;padding:0 8px;border-radius:6px;color:#111827;text-decoration:none;border:1px solid transparent;box-shadow:0 1px 2px #0000000d;position:relative;overflow:hidden;z-index:1}.task-block[_ngcontent-%COMP%]   .task-content-in[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.task-block[_ngcontent-%COMP%]   .task-title[_ngcontent-%COMP%]{font-weight:600;font-size:12px;line-height:1.1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.task-block[_ngcontent-%COMP%]   .task-time[_ngcontent-%COMP%]{font-size:11px;line-height:1.1;color:#4b5563;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.task-block.priority-high[_ngcontent-%COMP%]{background:#fee2e2;border-color:#fecaca;border-left:4px solid #ef4444}.task-block.priority-medium[_ngcontent-%COMP%]{background:#fffbeb;border-color:#fde68a;border-left:4px solid #f59e0b}.task-block.priority-low[_ngcontent-%COMP%]{background:#ecfdf5;border-color:#a7f3d0;border-left:4px solid #10b981}.task-tooltip[_ngcontent-%COMP%]{position:absolute;left:100%;top:0;transform:translate(8px);min-width:220px;max-width:320px;background:#111827;color:#f9fafb;border-radius:6px;padding:8px 10px;font-size:12px;line-height:1.3;box-shadow:0 8px 20px #0003;opacity:0;pointer-events:none;transition:opacity .12s ease,transform .12s ease;z-index:20}.task-block[_ngcontent-%COMP%]:hover   .task-tooltip[_ngcontent-%COMP%], .task-block[_ngcontent-%COMP%]:focus-visible   .task-tooltip[_ngcontent-%COMP%], .task-block[_ngcontent-%COMP%]:focus   .task-tooltip[_ngcontent-%COMP%]{opacity:1}.task-tooltip.floating[_ngcontent-%COMP%]{position:fixed;left:0;top:0;transform:none;opacity:1}.tt-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:6px}.tt-priority-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;display:inline-block}.tt-priority-dot.prio-high[_ngcontent-%COMP%]{background:#ef4444}.tt-priority-dot.prio-medium[_ngcontent-%COMP%]{background:#f59e0b}.tt-priority-dot.prio-low[_ngcontent-%COMP%]{background:#10b981}.tt-title[_ngcontent-%COMP%]{font-weight:700;color:#fff}.tt-row[_ngcontent-%COMP%]{margin:2px 0;color:#e5e7eb}.tt-label[_ngcontent-%COMP%]{color:#9ca3af;margin-right:6px}.tt-desc[_ngcontent-%COMP%]{margin-top:6px;color:#e5e7eb;white-space:normal}.empty-state[_ngcontent-%COMP%]{margin-top:16px;padding:24px;border-radius:8px;background:#f9fafb;text-align:center;color:#4b5563}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.current-time-indicator[_ngcontent-%COMP%]{position:relative;z-index:10;pointer-events:none;display:flex;align-items:center}.time-indicator-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#ef4444;border-radius:50%;position:absolute;left:4px;z-index:11;box-shadow:0 0 4px #ef444480}.time-indicator-line[_ngcontent-%COMP%]{width:100%;height:2px;background:#ef4444;position:absolute;left:0;box-shadow:0 0 2px #ef44444d}.header-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.plan-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.auto-plan-btn[_ngcontent-%COMP%]{padding:8px 16px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:6px;font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px;box-shadow:0 2px 4px #3b82f633}.auto-plan-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1e40af);transform:translateY(-1px);box-shadow:0 4px 8px #3b82f64d}.remove-auto-plan-btn[_ngcontent-%COMP%]{padding:8px 16px;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none;border-radius:6px;font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px;box-shadow:0 2px 4px #ef444433}.remove-auto-plan-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-1px);box-shadow:0 4px 8px #ef44444d}.remove-auto-plan-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}"]})};export{ve as TimetableComponent};
