import{a as P,b as V,c as W,d as I,e as L,f as F,g as H,h as N,i as z,j as B,k as j,l as A,m as q,n as R}from"./chunk-SQTBO4HM.js";import{$ as x,Aa as k,Ca as u,D as s,Da as g,E as d,Ea as f,F as C,G as y,L as M,M as w,R as c,Ra as E,Sa as O,W as T,_ as b,ha as _,ia as n,ja as o,ka as D,na as v,oa as p,qa as l,ya as m,za as S}from"./chunk-YI32BPVY.js";function Y(h,r){if(h&1){let e=v();n(0,"div",2),p("click",function(t){s(e);let i=l();return d(i.onOverlayClick(t))}),n(1,"div",3),p("click",function(t){return s(e),d(t.stopPropagation())}),n(2,"div",4)(3,"h2",5),m(4),o(),n(5,"button",6),p("click",function(){s(e);let t=l();return d(t.onClose())}),C(),n(6,"svg",7),D(7,"path",8),o()()(),y(),n(8,"form",9),p("ngSubmit",function(){s(e);let t=l();return d(t.onSubmit())}),n(9,"div",10)(10,"label",11),m(11,"Task Title *"),o(),n(12,"input",12,0),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.title,t)||(i.formData.title=t),d(t)}),o()(),n(14,"div",10)(15,"label",11),m(16,"Description"),o(),n(17,"textarea",13),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.description,t)||(i.formData.description=t),d(t)}),o()(),n(18,"div",14)(19,"div",10)(20,"label",11),m(21,"Priority"),o(),n(22,"select",15),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.priority,t)||(i.formData.priority=t),d(t)}),n(23,"option",16),m(24,"Low"),o(),n(25,"option",17),m(26,"Medium"),o(),n(27,"option",18),m(28,"High"),o()()(),n(29,"div",10)(30,"label",11),m(31,"Due Date"),o(),n(32,"input",19),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.dueDate,t)||(i.formData.dueDate=t),d(t)}),o()()(),n(33,"div",14)(34,"div",10)(35,"label",11),m(36,"Start Date Time"),o(),n(37,"input",20),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.startDateTime,t)||(i.formData.startDateTime=t),d(t)}),p("change",function(){s(e);let t=l();return d(t.onStartDateTimeChange())}),o()(),n(38,"div",10)(39,"label",11),m(40,"End Date Time"),o(),n(41,"input",21),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.endDateTime,t)||(i.formData.endDateTime=t),d(t)}),p("change",function(){s(e);let t=l();return d(t.onEndDateTimeChange())}),o()()(),n(42,"div",14)(43,"div",10)(44,"label",11),m(45,"Duration"),o(),n(46,"div",22)(47,"input",23),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.durationHours,t)||(i.formData.durationHours=t),d(t)}),p("change",function(){s(e);let t=l();return d(t.onDurationChange())}),o(),n(48,"span",24),m(49,"hours"),o(),n(50,"input",25),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.durationMinutes,t)||(i.formData.durationMinutes=t),d(t)}),p("change",function(){s(e);let t=l();return d(t.onDurationChange())}),o(),n(51,"span",24),m(52,"minutes"),o()(),n(53,"small",26),m(54,"Duration will auto-calculate from start/end times, or you can set it manually"),o()()(),n(55,"div",10)(56,"label",11),m(57,"Category"),o(),n(58,"input",27),f("ngModelChange",function(t){s(e);let i=l();return g(i.formData.category,t)||(i.formData.category=t),d(t)}),o(),n(59,"datalist",28),D(60,"option",29)(61,"option",30)(62,"option",31)(63,"option",32)(64,"option",33)(65,"option",34),o()(),n(66,"div",35)(67,"button",36),p("click",function(){s(e);let t=l();return d(t.onClose())}),m(68," Cancel "),o(),n(69,"button",37),m(70),o()()()()()}if(h&2){let e=l();c(4),S(e.isEditing?"Edit Task":"Create Task"),c(8),u("ngModel",e.formData.title),c(5),u("ngModel",e.formData.description),c(5),u("ngModel",e.formData.priority),c(10),u("ngModel",e.formData.dueDate),_("min",e.today),c(5),u("ngModel",e.formData.startDateTime),_("min",e.today),c(4),u("ngModel",e.formData.endDateTime),_("min",e.formData.startDateTime||e.today),c(6),u("ngModel",e.formData.durationHours),c(3),u("ngModel",e.formData.durationMinutes),c(8),u("ngModel",e.formData.category),c(11),_("disabled",!e.formData.title.trim()),c(),k(" ",e.isEditing?"Update Task":"Create Task"," ")}}var G=class h{todo=null;isSubtask=!1;save=new x;close=new x;isOpenSignal=M(!1);isOpen=this.isOpenSignal.asReadonly();get today(){let r=new Date;return r.setMinutes(r.getMinutes()-r.getTimezoneOffset()),r.toISOString().slice(0,16)}isEditing=!1;formData={title:"",description:"",priority:"medium",dueDate:"",startDateTime:"",endDateTime:"",durationHours:0,durationMinutes:0,category:"",completed:!1,archived:!1};ngOnChanges(r){if(r.todo&&r.todo.currentValue){if(this.isEditing=!0,this.todo){let e=this.todo.duration?Math.floor(this.todo.duration/60):0,a=this.todo.duration?this.todo.duration%60:0;this.formData={title:this.todo.title,description:this.todo.description||"",priority:this.todo.priority,dueDate:this.todo.dueDate?this.formatDateForInput(this.todo.dueDate):"",startDateTime:this.todo.startDateTime?this.formatDateForInput(this.todo.startDateTime):"",endDateTime:this.todo.endDateTime?this.formatDateForInput(this.todo.endDateTime):"",durationHours:e,durationMinutes:a,category:this.todo.category||"",completed:this.todo.completed,archived:this.todo.archived}}}else this.isEditing=!1,this.resetForm()}open(){this.isOpenSignal.set(!0),setTimeout(()=>{document.querySelector('.modal-content input[name="title"]')?.focus()},100)}onOverlayClick(r){r.target===r.currentTarget&&this.onClose()}onClose(){this.close.emit(),this.isOpenSignal.set(!1)}onSubmit(){if(!this.formData.title.trim())return;let r=(this.formData.durationHours||0)*60+(this.formData.durationMinutes||0),e={title:this.formData.title.trim(),description:this.formData.description.trim()||void 0,priority:this.formData.priority,dueDate:this.formData.dueDate?new Date(this.formData.dueDate):void 0,startDateTime:this.formData.startDateTime?new Date(this.formData.startDateTime):void 0,endDateTime:this.formData.endDateTime?new Date(this.formData.endDateTime):void 0,duration:r>0?r:void 0,category:this.formData.category.trim()||void 0,completed:this.formData.completed};this.save.emit(e),this.isOpenSignal.set(!1),this.resetForm()}resetForm(){this.formData={title:"",description:"",priority:"medium",dueDate:"",startDateTime:"",endDateTime:"",durationHours:0,durationMinutes:0,category:"",completed:!1,archived:!1}}onStartDateTimeChange(){this.calculateDurationFromDates()}onEndDateTimeChange(){this.calculateDurationFromDates()}onDurationChange(){if(this.formData.startDateTime&&(this.formData.durationHours||this.formData.durationMinutes)){let r=new Date(this.formData.startDateTime),e=(this.formData.durationHours||0)*60+(this.formData.durationMinutes||0),a=new Date(r.getTime()+e*6e4),t=new Date(a.getTime()-a.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.formData.endDateTime=t}}calculateDurationFromDates(){if(this.formData.startDateTime&&this.formData.endDateTime){let r=new Date(this.formData.startDateTime),e=new Date(this.formData.endDateTime);if(e>r){let a=e.getTime()-r.getTime(),t=Math.floor(a/(1e3*60));this.formData.durationHours=Math.floor(t/60),this.formData.durationMinutes=t%60}}}formatDateForInput(r){let e=new Date(r);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,16)}static \u0275fac=function(e){return new(e||h)};static \u0275cmp=T({type:h,selectors:[["app-task-editor"]],inputs:{todo:"todo",isSubtask:"isSubtask"},outputs:{save:"save",close:"close"},features:[w],decls:1,vars:1,consts:[["titleInput",""],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","currentColor"],["d","M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"],[1,"modal-form",3,"ngSubmit"],[1,"form-group"],[1,"form-label"],["type","text","name","title","placeholder","Enter task title","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","description","placeholder","Add task description...","rows","3",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],["name","priority",1,"form-input",3,"ngModelChange","ngModel"],["value","low"],["value","medium"],["value","high"],["type","datetime-local","name","dueDate",1,"form-input",3,"ngModelChange","ngModel","min"],["type","datetime-local","name","startDateTime",1,"form-input",3,"ngModelChange","change","ngModel","min"],["type","datetime-local","name","endDateTime",1,"form-input",3,"ngModelChange","change","ngModel","min"],[1,"duration-input-group"],["type","number","name","durationHours","placeholder","0","min","0","max","23",1,"form-input","duration-input",3,"ngModelChange","change","ngModel"],[1,"duration-label"],["type","number","name","durationMinutes","placeholder","0","min","0","max","59",1,"form-input","duration-input",3,"ngModelChange","change","ngModel"],[1,"form-hint"],["type","text","name","category","placeholder","e.g., Work, Personal","list","categories",1,"form-input",3,"ngModelChange","ngModel"],["id","categories"],["value","Work"],["value","Personal"],["value","Development"],["value","Design"],["value","Meeting"],["value","Research"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,a){e&1&&b(0,Y,71,15,"div",1),e&2&&_("ngIf",a.isOpen())},dependencies:[O,E,R,F,z,B,P,H,N,V,W,q,A,j,L,I],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 0;border-bottom:1px solid #e5e7eb;margin-bottom:24px}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#111827;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;padding:8px;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.modal-form[_ngcontent-%COMP%]{padding:0 24px 24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.duration-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.duration-input[_ngcontent-%COMP%]{width:60px!important;text-align:center}.duration-label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.form-hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:11px;color:#6b7280;font-style:italic}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#374151;font-size:14px}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff;box-sizing:border-box;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}textarea.form-input[_ngcontent-%COMP%]{resize:vertical;min-height:80px;line-height:1.5}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}select.form-input[_ngcontent-%COMP%]{cursor:pointer}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:32px;padding-top:20px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:8px;min-width:100px;justify-content:center}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;border-color:#9ca3af}@media (max-width: 640px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-width:100%;border-radius:8px}.modal-header[_ngcontent-%COMP%]{padding:20px 20px 0}.modal-form[_ngcontent-%COMP%]{padding:0 20px 20px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"]})};export{G as a};
