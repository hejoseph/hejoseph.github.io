import{a as je}from"./chunk-32SYM46U.js";import{d as ce,e as Ve,f as Fe,g as Ae,h as Le}from"./chunk-AB7ESRYX.js";import{a as ze}from"./chunk-JFR446LH.js";import{C as Z,b as ve,d as xe,h as he,j as be,k as Ce,l as Te,m as ke,n as we,o as Se,p as De,r as Pe,s as J,t as X,u as ye,v as Me,w as Oe,x as W,y as Ee}from"./chunk-VOG7M7LN.js";import{$a as pe,Ab as f,Bb as v,Ca as a,Cb as L,Db as q,Fb as I,Gb as E,Hb as j,Kb as ge,Lb as ue,Na as V,Pb as G,Ra as x,Ta as y,Tb as k,_ as S,a as se,ab as Q,b as de,bb as $,c as D,cb as u,da as m,db as i,ea as g,eb as s,fa as O,fb as T,ga as N,kc as _e,lb as le,lc as R,mb as C,mc as F,na as P,nb as _,nc as fe,ob as p,qc as A,sb as U,tb as K,ub as Y,vb as B,wb as H,xb as M,xc as Ie,yb as me,yc as z,zb as c}from"./chunk-L2PMUJ2L.js";function He(r,n){if(r&1&&(i(0,"div",49)(1,"small"),c(2),s()()),r&2){let e=p();a(2),L("This will create a task with progress tracking (0/",e.formData.targetCount," ",e.formData.countUnit||"items",")")}}var ee=class r{translationService=S(z);translations=k(()=>({cancel:this.translationService.translate("actions.cancel"),addTask:this.translationService.translate("tasks.addTask"),title:this.translationService.translate("tasks.title"),description:this.translationService.translate("tasks.description"),priority:this.translationService.translate("tasks.priority"),priorityLow:this.translationService.translate("priority.low"),priorityMedium:this.translationService.translate("priority.medium"),priorityHigh:this.translationService.translate("priority.high"),dueDate:this.translationService.translate("tasks.dueDate"),startDateTime:this.translationService.translate("tasks.startDateTime"),endDateTime:this.translationService.translate("tasks.endDateTime"),duration:this.translationService.translate("tasks.duration"),hours:this.translationService.translate("time.hours"),minutes:this.translationService.translate("time.minutes"),category:this.translationService.translate("tasks.category"),targetCount:"Target Count",countUnit:"Count Unit"}));addTodo=new y;showFormSignal=P(!1);showForm=this.showFormSignal.asReadonly();today=new Date().toISOString().split("T")[0];todayDateTime=new Date().toISOString().slice(0,16);formData={title:"",description:"",priority:"medium",dueDate:"",startDateTime:"",endDateTime:"",durationHours:0,durationMinutes:0,category:"",completed:!1,archived:!1,targetCount:null,countUnit:""};toggleForm(){this.showFormSignal.update(n=>!n),this.showForm()?setTimeout(()=>this.resizeTitleTextarea(),0):this.resetForm()}onSubmit(){if(!this.formData.title.trim())return;let n=(this.formData.durationHours||0)*60+(this.formData.durationMinutes||0),e={title:this.formData.title.trim(),description:this.formData.description.trim()||void 0,completed:!1,archived:!1,priority:this.formData.priority,dueDate:this.formData.dueDate?new Date(this.formData.dueDate):void 0,startDateTime:this.formData.startDateTime?new Date(this.formData.startDateTime):void 0,endDateTime:this.formData.endDateTime?new Date(this.formData.endDateTime):void 0,duration:n>0?n:void 0,category:this.formData.category.trim()||void 0,isExpanded:!1,targetCount:this.formData.targetCount&&this.formData.targetCount>0?this.formData.targetCount:void 0,currentCount:this.formData.targetCount&&this.formData.targetCount>0?0:void 0,countUnit:this.formData.targetCount&&this.formData.countUnit.trim()?this.formData.countUnit.trim():void 0};this.addTodo.emit(e)}resetForm(){this.formData={title:"",description:"",priority:"medium",dueDate:"",startDateTime:"",endDateTime:"",durationHours:0,durationMinutes:0,category:"",completed:!1,archived:!1,targetCount:null,countUnit:""}}resetAndClose(){this.resetForm(),this.showFormSignal.set(!1)}onStartDateTimeChange(){this.calculateDurationFromDates()}onEndDateTimeChange(){this.calculateDurationFromDates()}onDurationChange(){if(this.formData.startDateTime&&(this.formData.durationHours||this.formData.durationMinutes)){let n=new Date(this.formData.startDateTime),e=(this.formData.durationHours||0)*60+(this.formData.durationMinutes||0),t=new Date(n.getTime()+e*6e4),o=new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.formData.endDateTime=o}}calculateDurationFromDates(){if(this.formData.startDateTime&&this.formData.endDateTime){let n=new Date(this.formData.startDateTime),e=new Date(this.formData.endDateTime);if(e>n){let t=e.getTime()-n.getTime(),o=Math.floor(t/(1e3*60));this.formData.durationHours=Math.floor(o/60),this.formData.durationMinutes=o%60}}}onTextareaKeydown(n){if(n.key==="Tab"){n.preventDefault();let e=n.target,t=e.selectionStart,o=e.selectionEnd,l="  ",d=e.value,b=d.substring(0,t)+l+d.substring(o);this.formData.description=b,setTimeout(()=>{e.selectionStart=e.selectionEnd=t+l.length},0)}}onTitleInput(n){let e=n.target;this.autoResizeTextarea(e)}onTitleKeydown(n){n.key==="Enter"&&(n.preventDefault(),this.onSubmit())}autoResizeTextarea(n){n.style.height="auto",n.style.height=n.scrollHeight+"px"}resizeTitleTextarea(){let n=document.querySelector('.todo-form textarea[name="title"]');n&&this.autoResizeTextarea(n)}onDateTimeKeydown(n,e){if(n.key==="ArrowUp"||n.key==="ArrowDown"){let t=n.target,o=t.value;if(!o)return;let l=t.selectionStart||0,d=o.lastIndexOf(":");if(console.log("DateTime keydown debug:",{key:n.key,currentValue:o,cursorPosition:l,minutesStartIndex:d,inMinutesField:l>d}),l>d){let b=new Date(o),h=b.getMinutes();if(console.log("Current minutes:",h),n.key==="ArrowUp"&&h===59){console.log("Handling ArrowUp at 59 minutes"),n.preventDefault(),n.stopPropagation(),b.setHours(b.getHours()+1),b.setMinutes(0);let w=this.formatDateTimeForInput(b);console.log("Setting new value:",w),this.updateFormField(e,w),setTimeout(()=>{t.setSelectionRange(d+1,d+3)},10)}else if(n.key==="ArrowDown"&&h===0){console.log("Handling ArrowDown at 0 minutes"),n.preventDefault(),n.stopPropagation(),b.setHours(b.getHours()-1),b.setMinutes(59);let w=this.formatDateTimeForInput(b);console.log("Setting new value:",w),this.updateFormField(e,w),setTimeout(()=>{t.setSelectionRange(d+1,d+3)},10)}}}}formatDateTimeForInput(n){return new Date(n.getTime()-n.getTimezoneOffset()*6e4).toISOString().slice(0,16)}updateFormField(n,e){this.formData[n]=e,n==="startDateTime"?this.onStartDateTimeChange():n==="endDateTime"&&this.onEndDateTimeChange()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=V({type:r,selectors:[["app-todo-form"]],outputs:{addTodo:"addTodo"},decls:91,vars:40,consts:[["todoForm","ngForm"],["titleInput",""],[1,"todo-form-container"],[1,"add-todo-btn",3,"click"],[1,"btn-icon"],[1,"btn-text"],[1,"todo-form"],[3,"ngSubmit"],[1,"form-group"],["name","title","required","","rows","1",1,"form-input","title-input","title-textarea",3,"ngModelChange","input","keydown","ngModel","placeholder"],["name","description","rows","3",1,"form-input","description-input",3,"ngModelChange","keydown","ngModel","placeholder"],[1,"form-row"],[1,"form-label"],["name","priority",1,"form-input","priority-select",3,"ngModelChange","ngClass","ngModel"],["value","low"],["value","medium"],["value","high"],["type","datetime-local","name","dueDate",1,"form-input","datetime-input",3,"ngModelChange","keydown","ngModel","min"],["type","datetime-local","name","startDateTime",1,"form-input","datetime-input",3,"ngModelChange","change","keydown","ngModel","min"],["type","datetime-local","name","endDateTime",1,"form-input","datetime-input",3,"ngModelChange","change","keydown","ngModel","min"],[1,"duration-input-group"],["type","number","name","durationHours","placeholder","0","min","0","max","23",1,"form-input","duration-input",3,"ngModelChange","change","ngModel"],[1,"duration-label"],["type","number","name","durationMinutes","placeholder","0","min","0","max","59",1,"form-input","duration-input",3,"ngModelChange","change","ngModel"],[1,"form-hint"],["type","text","name","category","placeholder","e.g., Work, Personal","list","categories",1,"form-input","category-input",3,"ngModelChange","ngModel"],["id","categories"],["value","Work"],["value","Personal"],["value","Shopping"],["value","Health"],["value","Learning"],["value","Home"],[1,"form-row","counter-row"],["type","number","name","targetCount","placeholder","e.g., 5","min","1","max","999",1,"form-input","counter-input",3,"ngModelChange","ngModel"],["type","text","name","countUnit","placeholder","e.g., workouts, chapters","list","countUnits",1,"form-input","unit-input",3,"ngModelChange","ngModel"],["id","countUnits"],["value","workouts"],["value","chapters"],["value","calls"],["value","sessions"],["value","pages"],["value","exercises"],["value","meetings"],["value","items"],["class","form-hint counter-hint",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-hint","counter-hint"]],template:function(e,t){if(e&1){let o=C();i(0,"div",2)(1,"button",3),_("click",function(){return m(o),g(t.toggleForm())}),i(2,"span",4),c(3),s(),i(4,"span",5),c(5),s()(),i(6,"div",6)(7,"form",7,0),_("ngSubmit",function(){return m(o),g(t.onSubmit())}),i(9,"div",8)(10,"textarea",9,1),j("ngModelChange",function(d){return m(o),E(t.formData.title,d)||(t.formData.title=d),g(d)}),_("input",function(d){return m(o),g(t.onTitleInput(d))})("keydown",function(d){return m(o),g(t.onTitleKeydown(d))}),s()(),i(12,"div",8)(13,"textarea",10),j("ngModelChange",function(d){return m(o),E(t.formData.description,d)||(t.formData.description=d),g(d)}),_("keydown",function(d){return m(o),g(t.onTextareaKeydown(d))}),s()(),i(14,"div",11)(15,"div",8)(16,"label",12),c(17),s(),i(18,"select",13),j("ngModelChange",function(d){return m(o),E(t.formData.priority,d)||(t.formData.priority=d),g(d)}),i(19,"option",14),c(20),s(),i(21,"option",15),c(22),s(),i(23,"option",16),c(24),s()()(),i(25,"div",8)(26,"label",12),c(27),s(),i(28,"input",17),j("ngModelChange",function(d){return m(o),E(t.formData.dueDate,d)||(t.formData.dueDate=d),g(d)}),_("keydown",function(d){return m(o),g(t.onDateTimeKeydown(d,"dueDate"))}),s()()(),i(29,"div",11)(30,"div",8)(31,"label",12),c(32),s(),i(33,"input",18),j("ngModelChange",function(d){return m(o),E(t.formData.startDateTime,d)||(t.formData.startDateTime=d),g(d)}),_("change",function(){return m(o),g(t.onStartDateTimeChange())})("keydown",function(d){return m(o),g(t.onDateTimeKeydown(d,"startDateTime"))}),s()(),i(34,"div",8)(35,"label",12),c(36),s(),i(37,"input",19),j("ngModelChange",function(d){return m(o),E(t.formData.endDateTime,d)||(t.formData.endDateTime=d),g(d)}),_("change",function(){return m(o),g(t.onEndDateTimeChange())})("keydown",function(d){return m(o),g(t.onDateTimeKeydown(d,"endDateTime"))}),s()()(),i(38,"div",11)(39,"div",8)(40,"label",12),c(41),s(),i(42,"div",20)(43,"input",21),j("ngModelChange",function(d){return m(o),E(t.formData.durationHours,d)||(t.formData.durationHours=d),g(d)}),_("change",function(){return m(o),g(t.onDurationChange())}),s(),i(44,"span",22),c(45),s(),i(46,"input",23),j("ngModelChange",function(d){return m(o),E(t.formData.durationMinutes,d)||(t.formData.durationMinutes=d),g(d)}),_("change",function(){return m(o),g(t.onDurationChange())}),s(),i(47,"span",22),c(48),s()(),i(49,"small",24),c(50,"Duration will auto-calculate from start/end times, or you can set it manually"),s()()(),i(51,"div",11)(52,"div",8)(53,"label",12),c(54),s(),i(55,"input",25),j("ngModelChange",function(d){return m(o),E(t.formData.category,d)||(t.formData.category=d),g(d)}),s(),i(56,"datalist",26),T(57,"option",27)(58,"option",28)(59,"option",29)(60,"option",30)(61,"option",31)(62,"option",32),s()()(),i(63,"div",33)(64,"div",8)(65,"label",12),c(66),s(),i(67,"input",34),j("ngModelChange",function(d){return m(o),E(t.formData.targetCount,d)||(t.formData.targetCount=d),g(d)}),s()(),i(68,"div",8)(69,"label",12),c(70),s(),i(71,"input",35),j("ngModelChange",function(d){return m(o),E(t.formData.countUnit,d)||(t.formData.countUnit=d),g(d)}),s(),i(72,"datalist",36),T(73,"option",37)(74,"option",38)(75,"option",39)(76,"option",40)(77,"option",41)(78,"option",42)(79,"option",43)(80,"option",44),s()()(),x(81,He,3,2,"div",45),i(82,"div",46)(83,"button",47)(84,"span",4),c(85,"\u2713"),s(),c(86),s(),i(87,"button",48),_("click",function(){return m(o),g(t.resetForm())}),i(88,"span",4),c(89,"\u21BB"),s(),c(90),s()()()()()}if(e&2){let o=B(8);a(),M("active",t.showForm()),a(2),f(t.showForm()?"\u2715":"+"),a(2),f(t.showForm()?t.translations().cancel:t.translations().addTask),a(),M("show",t.showForm()),a(4),I("ngModel",t.formData.title),u("placeholder",t.translations().title),a(3),I("ngModel",t.formData.description),u("placeholder",t.translations().description),a(4),f(t.translations().priority),a(),u("ngClass","priority-"+t.formData.priority),I("ngModel",t.formData.priority),a(2),v("\u{1F7E2} ",t.translations().priorityLow),a(2),v("\u{1F7E1} ",t.translations().priorityMedium),a(2),v("\u{1F534} ",t.translations().priorityHigh),a(3),f(t.translations().dueDate),a(),I("ngModel",t.formData.dueDate),u("min",t.today),a(4),f(t.translations().startDateTime),a(),I("ngModel",t.formData.startDateTime),u("min",t.todayDateTime),a(3),f(t.translations().endDateTime),a(),I("ngModel",t.formData.endDateTime),u("min",t.formData.startDateTime||t.todayDateTime),a(4),f(t.translations().duration),a(2),I("ngModel",t.formData.durationHours),a(2),f(t.translations().hours),a(),I("ngModel",t.formData.durationMinutes),a(2),f(t.translations().minutes),a(6),f(t.translations().category),a(),I("ngModel",t.formData.category),a(11),f(t.translations().targetCount),a(),I("ngModel",t.formData.targetCount),a(3),f(t.translations().countUnit),a(),I("ngModel",t.formData.countUnit),a(10),u("ngIf",t.formData.targetCount),a(2),u("disabled",!o.form.valid),a(3),v(" ",t.translations().addTask," "),a(4),v(" ",t.translations().cancel," ")}},dependencies:[A,_e,F,W,Se,J,X,be,De,Pe,Ce,Te,Oe,Me,ye,we,ke],styles:['.todo-form-container[_ngcontent-%COMP%]{margin-bottom:16px}.add-todo-btn[_ngcontent-%COMP%]{width:100%;padding:12px 20px;background:#3b82f6;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 1px 2px #0000000d}.add-todo-btn[_ngcontent-%COMP%]:hover{background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.add-todo-btn.active[_ngcontent-%COMP%]{background:#dc2626}.btn-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700;transition:transform .3s ease}.add-todo-btn.active[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.btn-text[_ngcontent-%COMP%]{font-size:16px}.todo-form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:0;margin-top:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden;max-height:0;opacity:0;transition:all .3s ease;border:1px solid #e2e8f0}.todo-form.show[_ngcontent-%COMP%]{max-height:max-content;opacity:1;padding:20px;border-color:#cbd5e1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#2c3e50;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s ease;background:#fff;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.title-input[_ngcontent-%COMP%]{font-size:18px;font-weight:600;background:#fff;border-color:#667eea}.title-textarea[_ngcontent-%COMP%]{resize:none!important;overflow:hidden;min-height:auto!important;line-height:1.4}.title-input[_ngcontent-%COMP%]::placeholder{color:#95a5a6;font-weight:400}.description-input[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit;line-height:1.5}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:24px}.priority-select[_ngcontent-%COMP%]{cursor:pointer}.priority-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px}.date-input[_ngcontent-%COMP%]{cursor:pointer}.category-input[_ngcontent-%COMP%]{position:relative}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding-top:16px;border-top:1px solid #e9ecef}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;text-transform:uppercase;letter-spacing:.5px}.btn-primary[_ngcontent-%COMP%]{background:#10b981;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-secondary[_ngcontent-%COMP%]:hover{background:#4b5563;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.todo-form.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s ease-out}.counter-row[_ngcontent-%COMP%]{gap:1rem}.counter-input[_ngcontent-%COMP%]{max-width:120px}.unit-input[_ngcontent-%COMP%]{flex:1;min-width:150px}.counter-hint[_ngcontent-%COMP%]{margin-top:.5rem;color:var(--text-muted);font-style:italic}.counter-hint[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.counter-hint[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]:before{content:"\\2139\\fe0f";font-size:.875rem}.priority-select[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:2rem}.priority-select.priority-low[_ngcontent-%COMP%]{border-color:#10b981;box-shadow:0 0 0 2px #10b98126}.priority-select.priority-medium[_ngcontent-%COMP%]{border-color:#f59e0b;box-shadow:0 0 0 2px #f59e0b26}.priority-select.priority-high[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 2px #ef444426}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{justify-content:center}.add-todo-btn[_ngcontent-%COMP%]{padding:14px 20px;font-size:14px}.todo-form.show[_ngcontent-%COMP%]{padding:20px}}.duration-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.duration-input[_ngcontent-%COMP%]{width:60px!important;text-align:center}.duration-label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.form-hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:11px;color:#6b7280;font-style:italic}@media (max-width: 480px){.btn-text[_ngcontent-%COMP%]{display:none}.add-todo-btn[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:fixed;bottom:20px;right:20px;z-index:1000;padding:0}.todo-form-container[_ngcontent-%COMP%]{margin-bottom:80px}}']})};function Re(r,n){if(r&1){let e=C();i(0,"button",27),_("click",function(){m(e);let o=p();return g(o.clearSearch())}),c(1," \u2715 "),s()}if(r&2){let e=p();u("title",e.translations().clear)}}function We(r,n){if(r&1&&(i(0,"div",28)(1,"div",8),c(2),s(),i(3,"div",9),c(4),s()()),r&2){let e=p();a(2),f(e.stats.highPriority),a(2),f(e.translations().highPriority)}}function Ue(r,n){if(r&1&&(i(0,"div",29)(1,"div",8),c(2),s(),i(3,"div",9),c(4),s()()),r&2){let e=p();a(2),f(e.stats.overdue),a(2),f(e.translations().overdue)}}function Ke(r,n){if(r&1){let e=C();i(0,"div",30)(1,"button",31),_("click",function(){m(e);let o=p();return g(o.onClearCompleted())}),i(2,"span",19),c(3,"\u{1F5D1}\uFE0F"),s(),c(4),s()()}if(r&2){let e=p();a(),u("title",e.translations().clearCompletedTitle),a(3),v(" ",e.translations().clearCompleted," ")}}var ie=class r{translationService=S(z);translations=k(()=>({searchPlaceholder:this.translationService.translate("search.searchPlaceholder"),clear:this.translationService.translate("actions.clear"),total:this.translationService.translate("common.total"),active:this.translationService.translate("projects.active"),done:this.translationService.translate("projects.done"),highPriority:this.translationService.translate("projects.highPriority"),overdue:this.translationService.translate("common.overdue"),show:this.translationService.translate("common.show"),allTasks:this.translationService.translate("common.allTasks"),activeFilter:this.translationService.translate("common.active"),completed:this.translationService.translate("common.completed"),archived:this.translationService.translate("common.archived"),sortBy:this.translationService.translate("search.sortBy"),created:this.translationService.translate("search.created"),priority:this.translationService.translate("tasks.priority"),dueDate:this.translationService.translate("search.dueDate"),alphabetical:this.translationService.translate("search.alphabetical"),clearCompletedTitle:this.translationService.translate("filters.clearCompletedTitle"),clearCompleted:this.translationService.translate("filters.clearCompleted")}));currentFilter;currentSort;searchTerm;stats;filterChange=new y;sortChange=new y;searchChange=new y;clearCompleted=new y;onFilterChange(n){this.filterChange.emit(n)}onSortChange(n){let e=n.target;this.sortChange.emit(e.value)}onSearchChange(n){let e=n.target;this.searchChange.emit(e.value)}clearSearch(){this.searchChange.emit("")}onClearCompleted(){this.clearCompleted.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=V({type:r,selectors:[["app-todo-filters"]],inputs:{currentFilter:"currentFilter",currentSort:"currentSort",searchTerm:"searchTerm",stats:"stats"},outputs:{filterChange:"filterChange",sortChange:"sortChange",searchChange:"searchChange",clearCompleted:"clearCompleted"},decls:59,vars:31,consts:[[1,"filters-container"],[1,"search-section"],[1,"search-box"],[1,"search-icon"],["type","text",1,"search-input",3,"input","value","placeholder"],["class","clear-search",3,"title","click",4,"ngIf"],[1,"stats-dashboard"],[1,"stat-card","total"],[1,"stat-number"],[1,"stat-label"],[1,"stat-card","active"],[1,"stat-card","completed"],["class","stat-card priority",4,"ngIf"],["class","stat-card overdue",4,"ngIf"],[1,"controls-section"],[1,"filter-group"],[1,"control-label"],[1,"filter-buttons"],[1,"filter-btn",3,"click"],[1,"btn-icon"],[1,"sort-group"],[1,"sort-select",3,"change","value"],["value","created"],["value","priority"],["value","dueDate"],["value","alphabetical"],["class","action-group",4,"ngIf"],[1,"clear-search",3,"click","title"],[1,"stat-card","priority"],[1,"stat-card","overdue"],[1,"action-group"],[1,"clear-completed-btn",3,"click","title"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),c(4,"\u{1F50D}"),s(),i(5,"input",4),_("input",function(l){return t.onSearchChange(l)}),s(),x(6,Re,2,1,"button",5),s()(),i(7,"div",6)(8,"div",7)(9,"div",8),c(10),s(),i(11,"div",9),c(12),s()(),i(13,"div",10)(14,"div",8),c(15),s(),i(16,"div",9),c(17),s()(),i(18,"div",11)(19,"div",8),c(20),s(),i(21,"div",9),c(22),s()(),x(23,We,5,2,"div",12)(24,Ue,5,2,"div",13),s(),i(25,"div",14)(26,"div",15)(27,"label",16),c(28),s(),i(29,"div",17)(30,"button",18),_("click",function(){return t.onFilterChange("all")}),i(31,"span",19),c(32,"\u{1F4CB}"),s(),c(33),s(),i(34,"button",18),_("click",function(){return t.onFilterChange("active")}),i(35,"span",19),c(36,"\u23F3"),s(),c(37),s(),i(38,"button",18),_("click",function(){return t.onFilterChange("completed")}),i(39,"span",19),c(40,"\u2705"),s(),c(41),s(),i(42,"button",18),_("click",function(){return t.onFilterChange("archived")}),i(43,"span",19),c(44,"\u{1F4E6}"),s(),c(45),s()()(),i(46,"div",20)(47,"label",16),c(48),s(),i(49,"select",21),_("change",function(l){return t.onSortChange(l)}),i(50,"option",22),c(51),s(),i(52,"option",23),c(53),s(),i(54,"option",24),c(55),s(),i(56,"option",25),c(57),s()()(),x(58,Ke,5,2,"div",26),s()()),e&2&&(a(5),u("value",t.searchTerm)("placeholder",t.translations().searchPlaceholder),a(),u("ngIf",t.searchTerm),a(4),f(t.stats.total),a(2),f(t.translations().total),a(3),f(t.stats.active),a(2),f(t.translations().active),a(3),f(t.stats.completed),a(2),f(t.translations().done),a(),u("ngIf",t.stats.highPriority>0),a(),u("ngIf",t.stats.overdue>0),a(4),v("",t.translations().show,":"),a(2),M("active",t.currentFilter==="all"),a(3),v(" ",t.translations().allTasks," "),a(),M("active",t.currentFilter==="active"),a(3),v(" ",t.translations().activeFilter," "),a(),M("active",t.currentFilter==="completed"),a(3),v(" ",t.translations().completed," "),a(),M("active",t.currentFilter==="archived"),a(3),v(" ",t.translations().archived," "),a(3),v("",t.translations().sortBy,":"),a(),u("value",t.currentSort),a(2),v("\u{1F4C5} ",t.translations().created),a(2),v("\u{1F3AF} ",t.translations().priority),a(2),v("\u23F0 ",t.translations().dueDate),a(2),v("\u{1F524} ",t.translations().alphabetical),a(),u("ngIf",t.stats.completed>0))},dependencies:[A,F,W,J,X],styles:[".filters-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;border:1px solid #e2e8f0}.search-section[_ngcontent-%COMP%]{margin-bottom:16px}.search-box[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:#fff;border:1px solid #d1d5db;border-radius:6px;padding:2px;transition:all .2s ease}.search-box[_ngcontent-%COMP%]:focus-within{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-icon[_ngcontent-%COMP%]{padding:12px 16px;color:#6c757d;font-size:16px}.search-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:12px 8px;font-size:16px;color:#2c3e50;outline:none}.search-input[_ngcontent-%COMP%]::placeholder{color:#95a5a6}.clear-search[_ngcontent-%COMP%]{padding:8px 12px;background:#e9ecef;border:none;border-radius:8px;color:#6c757d;cursor:pointer;transition:all .2s ease;margin-right:4px}.clear-search[_ngcontent-%COMP%]:hover{background:#dee2e6;color:#495057}.stats-dashboard[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px;margin-bottom:16px;padding:12px;background:#f8fafc;border-radius:6px;border:1px solid #e2e8f0}.stat-card[_ngcontent-%COMP%]{text-align:center;padding:12px 8px;background:#fff;border-radius:6px;box-shadow:0 1px 2px #0000000d;border:1px solid #e2e8f0}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;letter-spacing:.5px;font-weight:600;opacity:.8}.stat-card.total[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#3b82f6}.stat-card.active[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#f59e0b}.stat-card.completed[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#10b981}.stat-card.priority[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#ef4444}.stat-card.overdue[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{color:#dc2626}.controls-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;gap:24px;align-items:center}.control-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#2c3e50;margin-bottom:8px;display:block;text-transform:uppercase;letter-spacing:.5px}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;background:#f1f5f9;padding:4px;border-radius:6px;border:1px solid #e2e8f0}.filter-btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;background:transparent;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;color:#6c757d;transition:all .3s ease;display:flex;align-items:center;gap:6px;white-space:nowrap}.filter-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#495057}.filter-btn.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-icon[_ngcontent-%COMP%]{font-size:14px}.sort-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.sort-select[_ngcontent-%COMP%]{padding:10px 16px;border:2px solid #e9ecef;border-radius:10px;background:#fff;font-size:14px;color:#2c3e50;cursor:pointer;transition:all .3s ease;min-width:160px}.sort-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.action-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.clear-completed-btn[_ngcontent-%COMP%]{padding:8px 12px;background:#ef4444;color:#fff;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px;white-space:nowrap}.clear-completed-btn[_ngcontent-%COMP%]:hover{background:#dc2626;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}@media (max-width: 1024px){.controls-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.filter-group[_ngcontent-%COMP%], .sort-group[_ngcontent-%COMP%], .action-group[_ngcontent-%COMP%]{align-items:center;text-align:center}}@media (max-width: 768px){.filters-container[_ngcontent-%COMP%]{padding:20px}.stats-dashboard[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:12px;padding:16px}.stat-card[_ngcontent-%COMP%]{padding:12px 8px}.stat-number[_ngcontent-%COMP%]{font-size:20px}.filter-buttons[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.filter-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.sort-select[_ngcontent-%COMP%]{min-width:140px}}@media (max-width: 480px){.stats-dashboard[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filter-buttons[_ngcontent-%COMP%]{flex-direction:column}.filter-btn[_ngcontent-%COMP%]{justify-content:center}.controls-section[_ngcontent-%COMP%]{gap:16px}}"]})};var Ye=r=>({$implicit:r,level:1}),qe=(r,n)=>({$implicit:r,level:n});function Ge(r,n){r&1&&le(0)}function Qe(r,n){if(r&1&&(i(0,"div",28),x(1,Ge,1,0,"ng-container",29),s()),r&2){let e=p().$implicit;p(2);let t=B(17);a(),u("ngTemplateOutlet",t)("ngTemplateOutletContext",ge(2,Ye,e.subtasks))}}function $e(r,n){if(r&1&&(i(0,"div",23)(1,"div",24)(2,"span",25),c(3),s(),i(4,"span",26),c(5),s()(),x(6,Qe,2,4,"div",27),s()),r&2){let e=n.$implicit,t=n.index;a(3),v("",t+1,"."),a(2),f(e.title),a(),u("ngIf",e.subtasks.length>0)}}function Je(r,n){if(r&1&&(i(0,"div",19)(1,"h3",20),c(2),s(),i(3,"div",21),x(4,$e,7,3,"div",22),s()()),r&2){let e=p(2);a(2),q("",e.t().previewTitle," (",e.parsedTasks().length," ",e.t().tasksCount,")"),a(2),u("ngForOf",e.parsedTasks())}}function Xe(r,n){r&1&&le(0)}function Ze(r,n){if(r&1&&(i(0,"div",36),x(1,Xe,1,0,"ng-container",29),s()),r&2){let e=p().$implicit,t=p().level;p();let o=B(17);a(),u("ngTemplateOutlet",o)("ngTemplateOutletContext",ue(2,qe,e.subtasks,t+1))}}function et(r,n){if(r&1&&(i(0,"div",31)(1,"div",32)(2,"span",33),c(3),s(),i(4,"span",34),c(5),s()(),x(6,Ze,2,5,"div",35),s()),r&2){let e=n.$implicit,t=p().level,o=p(2);me("subtask-level-"+t),H("padding-left",o.getProportionalIndentation(t),"px"),a(2),H("color",o.getSubtaskBulletColor(t)),a(),v(" ",o.getSubtaskBullet(t)," "),a(),H("font-size",o.getSubtaskFontSize(t),"px"),a(),v(" ",e.title," "),a(),u("ngIf",e.subtasks.length>0)}}function tt(r,n){if(r&1&&x(0,et,7,11,"div",30),r&2){let e=n.$implicit;u("ngForOf",e)}}function nt(r,n){if(r&1&&(i(0,"div",37),O(),i(1,"svg",38),T(2,"path",39),s(),c(3),s()),r&2){let e=p(2);a(3),v(" ",e.errorMessage," ")}}function ot(r,n){if(r&1){let e=C();i(0,"div",2),_("click",function(o){m(e);let l=p();return g(l.onOverlayClick(o))}),i(1,"div",3),_("click",function(o){return m(e),g(o.stopPropagation())}),i(2,"div",4)(3,"h2",5),c(4),s(),i(5,"button",6),_("click",function(){m(e);let o=p();return g(o.onClose())}),O(),i(6,"svg",7),T(7,"path",8),s()()(),N(),i(8,"div",9)(9,"div",10)(10,"label",11),c(11),s(),i(12,"p",12),c(13),s(),i(14,"textarea",13),_("input",function(o){m(e);let l=p();return g(l.onImportTextChange(o))})("keydown",function(o){m(e);let l=p();return g(l.onTextareaKeydown(o))}),s()(),x(15,Je,5,4,"div",14)(16,tt,1,1,"ng-template",null,0,G)(18,nt,4,1,"div",15),s(),i(19,"div",16)(20,"button",17),_("click",function(){m(e);let o=p();return g(o.onClose())}),c(21),s(),i(22,"button",18),_("click",function(){m(e);let o=p();return g(o.onImport())}),c(23),s()()()()}if(r&2){let e=p();a(4),f(e.t().title),a(7),f(e.t().pasteTasksLabel),a(2),v(" ",e.t().formatHint," "),a(),u("value",e.importText())("placeholder",e.t().placeholder),a(),u("ngIf",e.parsedTasks().length>0),a(3),u("ngIf",e.errorMessage),a(3),v(" ",e.t().cancel," "),a(),u("disabled",e.parsedTasks().length===0),a(),q(" ",e.t().importButton," ",e.parsedTasks().length," ",e.t().tasksCount," ")}}var re=class r{import=new y;close=new y;translationService=S(z);isOpenSignal=P(!1);isOpen=this.isOpenSignal.asReadonly();t=k(()=>({title:this.translationService.translate("importDialog.title"),pasteTasksLabel:this.translationService.translate("importDialog.pasteTasksLabel"),formatHint:this.translationService.translate("importDialog.formatHint"),placeholder:this.translationService.translate("importDialog.placeholder"),previewTitle:this.translationService.translate("importDialog.previewTitle"),tasksCount:this.translationService.translate("importDialog.tasksCount"),importButton:this.translationService.translate("importDialog.importButton"),cancel:this.translationService.translate("actions.cancel"),parseError:this.translationService.translate("importDialog.parseError"),subtaskWithoutParent:this.translationService.translate("importDialog.subtaskWithoutParent"),invalidIndentation:this.translationService.translate("importDialog.invalidIndentation")}));importText=P("");errorMessage="";parsedTasks=k(()=>{if(!this.importText().trim())return this.errorMessage="",[];try{return this.parseTaskText(this.importText())}catch(e){return this.errorMessage=e instanceof Error?e.message:this.t().parseError,[]}});open(){this.isOpenSignal.set(!0),this.importText.set(""),this.errorMessage="",setTimeout(()=>{document.querySelector(".modal-content textarea")?.focus()},100)}onOverlayClick(n){n.target===n.currentTarget&&this.onClose()}onClose(){this.close.emit(),this.isOpenSignal.set(!1),this.importText.set(""),this.errorMessage=""}onImport(){let n=this.parsedTasks();console.log("\u{1F680} Import dialog emitting tasks:",n),n.length>0&&(this.import.emit(n),this.onClose())}onImportTextChange(n){let e=n.target;this.importText.set(e.value)}onTextareaKeydown(n){if(n.key==="Tab"){n.preventDefault();let e=n.target,t=e.selectionStart,o=e.selectionEnd,l=e.value,d="    ",b=l.substring(0,t)+d+l.substring(o);e.value=b,this.importText.set(b);let h=t+d.length;setTimeout(()=>{e.setSelectionRange(h,h)},0)}}parseTaskText(n){let e=n.split(`
`).map(l=>l.replace(/\r/g,"")),t=[],o=[];for(let l=0;l<e.length;l++){let d=e[l];if(!d.trim())continue;let b=this.getIndentationLevel(d),h=d.trim();if(!h)continue;let w={title:h,subtasks:[]};if(b===0)t.push(w),o.length=0,o.push({task:w,level:0});else{if(o.length===0)throw new Error(this.t().subtaskWithoutParent.replace("{line}",String(l+1)).replace("{title}",h));for(;o.length>0&&o[o.length-1].level>=b;)o.pop();if(o.length===0)throw new Error(this.t().invalidIndentation.replace("{line}",String(l+1)).replace("{title}",h));o[o.length-1].task.subtasks.push(w),o.push({task:w,level:b})}}return t}getIndentationLevel(n){let e=0,t=0;for(;t<n.length;)if(n[t]==="	")e++,t++;else if(n[t]===" "){let o=0;for(;t<n.length&&n[t]===" ";)o++,t++;e=Math.floor(o/2);break}else break;return e}getSubtaskBullet(n){let e=["\u2022","\u25E6","\u25AA","\u25AB","\u2023","\u2043"];return e[n%e.length]}getSubtaskBulletColor(n){let e=["#6b7280","#9ca3af","#d1d5db","#e5e7eb","#f3f4f6","#f9fafb"];return e[n%e.length]}getSubtaskFontSize(n){let t=Math.min(n*.5,2);return Math.max(13-t,11)}getProportionalIndentation(n){return n<=1?n*16:n<=3?16+(n-1)*12:n<=6?16+2*12+(n-3)*8:16+2*12+3*8+(n-6)*4}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=V({type:r,selectors:[["app-import-dialog"]],outputs:{import:"import",close:"close"},decls:1,vars:1,consts:[["subtaskTemplate",""],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close-btn",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","currentColor"],["d","M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"],[1,"modal-body"],[1,"form-group"],[1,"form-label"],[1,"form-hint"],["rows","12",1,"form-textarea",3,"input","keydown","value","placeholder"],["class","preview-section",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"preview-section"],[1,"preview-title"],[1,"preview-list"],["class","preview-item",4,"ngFor","ngForOf"],[1,"preview-item"],[1,"task-preview"],[1,"task-number"],[1,"task-title"],["class","subtasks-preview",4,"ngIf"],[1,"subtasks-preview"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","subtask-preview",3,"class","padding-left",4,"ngFor","ngForOf"],[1,"subtask-preview"],[1,"subtask-content"],[1,"subtask-bullet"],[1,"subtask-title"],["class","nested-subtasks",4,"ngIf"],[1,"nested-subtasks"],[1,"error-message"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M8 1a7 7 0 100 14A7 7 0 008 1zM7 4a1 1 0 112 0v3a1 1 0 11-2 0V4zm1 8a1 1 0 100-2 1 1 0 000 2z"]],template:function(e,t){e&1&&x(0,ot,24,12,"div",1),e&2&&u("ngIf",t.isOpen())},dependencies:[A,R,F,fe,W],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px -12px #00000040;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 0;border-bottom:1px solid #e5e7eb;margin-bottom:24px}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#111827;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;padding:8px;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.modal-body[_ngcontent-%COMP%]{padding:0 24px}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#374151;font-size:14px}.form-hint[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;color:#6b7280;font-style:italic}.form-textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;font-family:Courier New,monospace;line-height:1.5;resize:vertical;min-height:200px;transition:all .2s ease;background:#fff;box-sizing:border-box}.form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-family:inherit}.preview-section[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid #e5e7eb}.preview-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#374151;margin:0 0 16px}.preview-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid #e5e7eb;border-radius:8px;background:#f9fafb}.preview-item[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e5e7eb}.preview-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.task-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.task-number[_ngcontent-%COMP%]{font-weight:600;color:#3b82f6;min-width:20px}.task-title[_ngcontent-%COMP%]{font-weight:500;color:#111827}.subtasks-preview[_ngcontent-%COMP%]{margin-left:28px}.subtask-preview[_ngcontent-%COMP%]{margin-bottom:2px;transition:all .2s ease}.subtask-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:2px 0;border-radius:4px;transition:background-color .2s ease}.subtask-content[_ngcontent-%COMP%]:hover{background-color:#3b82f60d}.subtask-bullet[_ngcontent-%COMP%]{font-weight:700;min-width:12px;text-align:center;transition:color .2s ease}.subtask-title[_ngcontent-%COMP%]{color:#4b5563;font-size:13px;line-height:1.4;transition:all .2s ease}.nested-subtasks[_ngcontent-%COMP%]{margin-top:2px}.subtask-level-1[_ngcontent-%COMP%]   .subtask-title[_ngcontent-%COMP%]{color:#374151;font-weight:500}.subtask-level-2[_ngcontent-%COMP%]   .subtask-title[_ngcontent-%COMP%]{color:#4b5563;font-weight:400}.subtask-level-3[_ngcontent-%COMP%]   .subtask-title[_ngcontent-%COMP%]{color:#6b7280;font-weight:400;font-style:italic}.subtask-level-4[_ngcontent-%COMP%]   .subtask-title[_ngcontent-%COMP%], .subtask-level-5[_ngcontent-%COMP%]   .subtask-title[_ngcontent-%COMP%], .subtask-level-6[_ngcontent-%COMP%]   .subtask-title[_ngcontent-%COMP%]{color:#9ca3af;font-weight:300;font-style:italic}.subtask-level-1[_ngcontent-%COMP%]{border-left:2px solid #e5e7eb}.subtask-level-2[_ngcontent-%COMP%]{border-left:1px solid #f3f4f6}.subtask-level-3[_ngcontent-%COMP%], .subtask-level-4[_ngcontent-%COMP%], .subtask-level-5[_ngcontent-%COMP%], .subtask-level-6[_ngcontent-%COMP%]{border-left:1px dotted #f9fafb}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px;margin-top:16px}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:32px;padding:20px 24px 24px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:8px;min-width:100px;justify-content:center}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;box-shadow:0 1px 2px #0000000d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb;border-color:#9ca3af}@media (max-width: 640px){.modal-overlay[_ngcontent-%COMP%]{padding:10px}.modal-content[_ngcontent-%COMP%]{max-width:100%;border-radius:8px}.modal-header[_ngcontent-%COMP%]{padding:20px 20px 0}.modal-body[_ngcontent-%COMP%]{padding:0 20px}.modal-actions[_ngcontent-%COMP%]{padding:20px;flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}.preview-list[_ngcontent-%COMP%]{max-height:200px}}"]})};function it(r,n){if(r&1&&(i(0,"p",15),c(1),s()),r&2){let e,t=p(2);a(),v(" ",t.translations().chooseParentSingle.replace("{taskTitle}",((e=t.taskToConvert())==null?null:e.title)||"")," ")}}function rt(r,n){if(r&1&&(i(0,"p",15),c(1),s()),r&2){let e=p(2);a(),v(" ",e.translations().chooseParentMultiple.replace("{count}",e.tasksToConvert().length.toString()).replace("{plural}",e.tasksToConvert().length!==1?"s":"")," ")}}function at(r,n){if(r&1&&(i(0,"span",26),c(1),s()),r&2){let e=p(2).$implicit;a(),f(e.category)}}function st(r,n){if(r&1&&(i(0,"span",27),c(1),s()),r&2){let e=p(2).$implicit,t=p(3);a(),L(" ",t.translations().due,": ",t.formatDate(e.dueDate)," ")}}function lt(r,n){if(r&1&&(i(0,"div",23),x(1,at,2,1,"span",24)(2,st,2,2,"span",25),s()),r&2){let e=p().$implicit;a(),u("ngIf",e.category),a(),u("ngIf",e.dueDate)}}function ct(r,n){if(r&1){let e=C();i(0,"div",18),_("click",function(){let o=m(e).$implicit,l=p(3);return g(l.selectParent(o.id))}),i(1,"div",19)(2,"div",20),c(3),s(),x(4,lt,3,2,"div",21),s(),T(5,"div",22),s()}if(r&2){let e=n.$implicit,t=p(3);M("selected",t.selectedParentId()===e.id),a(3),f(e.title),a(),u("ngIf",e.category||e.dueDate),a(),pe("data-priority",e.priority)}}function dt(r,n){if(r&1&&(i(0,"div",16),x(1,ct,6,5,"div",17),s()),r&2){let e=p(2);a(),u("ngForOf",e.availableParents())}}function pt(r,n){if(r&1&&(i(0,"div",28)(1,"p"),c(2),s()()),r&2){let e=p(2);a(2),f(e.translations().noAvailableParents)}}function mt(r,n){if(r&1&&(i(0,"span"),c(1),s()),r&2){let e=p(2);a(),f(e.translations().convertToSubtask)}}function gt(r,n){if(r&1&&(i(0,"span"),c(1),s()),r&2){let e=p(2);a(),f(e.translations().convertTasksToSubtasks.replace("{count}",e.tasksToConvert().length.toString()))}}function ut(r,n){if(r&1){let e=C();i(0,"div",1),_("click",function(){m(e);let o=p();return g(o.close())}),i(1,"div",2),_("click",function(o){return m(e),g(o.stopPropagation())}),i(2,"div",3)(3,"h3"),c(4),s(),i(5,"button",4),_("click",function(){m(e);let o=p();return g(o.close())}),O(),i(6,"svg",5),T(7,"path",6),s()()(),N(),i(8,"div",7),x(9,it,2,1,"p",8)(10,rt,2,1,"p",8)(11,dt,2,1,"div",9)(12,pt,3,1,"div",10),s(),i(13,"div",11)(14,"button",12),_("click",function(){m(e);let o=p();return g(o.close())}),c(15),s(),i(16,"button",13),_("click",function(){m(e);let o=p();return g(o.confirmParentSelection())}),x(17,mt,2,1,"span",14)(18,gt,2,1,"span",14),s()()()()}if(r&2){let e=p();a(4),f(e.translations().selectParentTask),a(5),u("ngIf",e.taskToConvert()),a(),u("ngIf",e.tasksToConvert().length>0),a(),u("ngIf",e.availableParents().length>0),a(),u("ngIf",e.availableParents().length===0),a(3),f(e.translations().cancel),a(),u("disabled",!e.selectedParentId()),a(),u("ngIf",e.taskToConvert()),a(),u("ngIf",e.tasksToConvert().length>0)}}var ae=class r{confirmSelection=new y;closeDialog=new y;todoService=S(Z);translationService=S(z);translations=k(()=>({selectParentTask:this.translationService.translate("parentSelectionDialog.selectParentTask"),chooseParentSingle:this.translationService.translate("parentSelectionDialog.chooseParentSingle"),chooseParentMultiple:this.translationService.translate("parentSelectionDialog.chooseParentMultiple"),due:this.translationService.translate("todoItem.due"),noAvailableParents:this.translationService.translate("parentSelectionDialog.noAvailableParents"),cancel:this.translationService.translate("actions.cancel"),convertToSubtask:this.translationService.translate("parentSelectionDialog.convertToSubtask"),convertTasksToSubtasks:this.translationService.translate("parentSelectionDialog.convertTasksToSubtasks"),today:this.translationService.translate("time.today"),tomorrow:this.translationService.translate("time.tomorrow"),yesterday:this.translationService.translate("time.yesterday")}));isOpen=P(!1);taskToConvert=P(null);tasksToConvert=P([]);selectedParentId=P(null);availableParents=P([]);open(n,e,t){if(t&&t.length>0){let o=t.map(d=>this.findTaskById(d)).filter(d=>d!==void 0);this.tasksToConvert.set(o),this.taskToConvert.set(null);let l=this.todoService.getMainTasks().filter(d=>!t.includes(d.id)&&!d.completed&&(!e||d.projectId===e));this.availableParents.set(l)}else if(n){let o=this.findTaskById(n);if(!o)return;this.taskToConvert.set(o),this.tasksToConvert.set([]);let l=this.todoService.getMainTasks().filter(d=>d.id!==n&&!d.completed&&(!e||d.projectId===e));this.availableParents.set(l)}this.selectedParentId.set(null),this.isOpen.set(!0)}selectParent(n){this.selectedParentId.set(n)}confirmParentSelection(){let n=this.selectedParentId();n&&(this.confirmSelection.emit(n),this.close())}close(){this.isOpen.set(!1),this.taskToConvert.set(null),this.tasksToConvert.set([]),this.selectedParentId.set(null),this.availableParents.set([]),this.closeDialog.emit()}findTaskById(n){let e=this.todoService.todos();return this.findTodoRecursive(e,n)}findTodoRecursive(n,e){for(let t of n){if(t.id===e)return t;if(t.subtasks.length>0){let o=this.findTodoRecursive(t.subtasks,e);if(o)return o}}}formatDate(n){let e=new Date,t=new Date(n),o=new Date(e.getFullYear(),e.getMonth(),e.getDate()),d=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-o.getTime(),b=Math.ceil(d/(1e3*60*60*24));if(b===0)return this.translations().today;if(b===1)return this.translations().tomorrow;if(b===-1)return this.translations().yesterday;let h={month:"short",day:"numeric"};return e.getFullYear()!==t.getFullYear()&&(h.year="numeric"),t.toLocaleDateString([],h)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=V({type:r,selectors:[["app-parent-selection-dialog"]],outputs:{confirmSelection:"confirmSelection",closeDialog:"closeDialog"},decls:1,vars:1,consts:[["class","dialog-overlay",3,"click",4,"ngIf"],[1,"dialog-overlay",3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-header"],[1,"close-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"dialog-body"],["class","dialog-description",4,"ngIf"],["class","parent-list",4,"ngIf"],["class","no-parents",4,"ngIf"],[1,"dialog-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],[1,"dialog-description"],[1,"parent-list"],["class","parent-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"parent-item",3,"click"],[1,"parent-info"],[1,"parent-title"],["class","parent-meta",4,"ngIf"],[1,"parent-priority"],[1,"parent-meta"],["class","parent-category",4,"ngIf"],["class","parent-due",4,"ngIf"],[1,"parent-category"],[1,"parent-due"],[1,"no-parents"]],template:function(e,t){e&1&&x(0,ut,19,9,"div",0),e&2&&u("ngIf",t.isOpen())},dependencies:[A,R,F],styles:[".dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.dialog-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:500px;width:100%;max-height:80vh;display:flex;flex-direction:column}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 0;border-bottom:1px solid #e5e7eb;margin-bottom:20px}.dialog-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#111827}.close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;color:#6b7280;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.dialog-body[_ngcontent-%COMP%]{padding:0 24px;flex:1;overflow-y:auto}.dialog-description[_ngcontent-%COMP%]{margin:0 0 20px;color:#6b7280;line-height:1.5}.parent-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto}.parent-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;cursor:pointer;transition:all .2s ease;background:#fff}.parent-item[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f9fafb}.parent-item.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:#eff6ff}.parent-info[_ngcontent-%COMP%]{flex:1;min-width:0}.parent-title[_ngcontent-%COMP%]{font-weight:500;color:#111827;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.parent-meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:.875rem;color:#6b7280}.parent-category[_ngcontent-%COMP%]{background:#f3f4f6;padding:2px 8px;border-radius:4px;font-size:.75rem}.parent-due[_ngcontent-%COMP%]{font-size:.75rem}.parent-priority[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;margin-left:12px;flex-shrink:0}.parent-priority[data-priority=high][_ngcontent-%COMP%]{background:#ef4444}.parent-priority[data-priority=medium][_ngcontent-%COMP%]{background:#f59e0b}.parent-priority[data-priority=low][_ngcontent-%COMP%]{background:#10b981}.no-parents[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.dialog-footer[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding:20px 24px 24px;border-top:1px solid #e5e7eb;margin-top:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .2s ease;border:none}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn-primary[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed}@media (max-width: 640px){.dialog-overlay[_ngcontent-%COMP%]{padding:10px}.dialog-content[_ngcontent-%COMP%]{max-height:90vh}.dialog-header[_ngcontent-%COMP%], .dialog-body[_ngcontent-%COMP%], .dialog-footer[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.parent-item[_ngcontent-%COMP%]{padding:10px 12px}.parent-meta[_ngcontent-%COMP%]{flex-direction:column;gap:4px}}"]})};var _t=["taskEditor"],ft=["todoForm"],vt=["importDialog"],xt=["parentSelectionDialog"];function ht(r,n){if(r&1&&(i(0,"p",38),c(1),s()),r&2){let e=p(2);a(),v(" ",e.project().description," ")}}function bt(r,n){if(r&1){let e=C();i(0,"button",55),_("click",function(){m(e);let o=p(5);return o.selectAllMainTasks(),g(o.closeSelectionDropdown())}),i(1,"span",56),c(2,"\u{1F4DD}"),s(),i(3,"span",57),c(4),s()()}if(r&2){let e=p(5);a(4),L("",e.translations().selectAllMainTasks," (",e.getMainTasksCount(),")")}}function Ct(r,n){if(r&1){let e=C();i(0,"button",55),_("click",function(){m(e);let o=p(5);return o.selectAllSubtasks(),g(o.closeSelectionDropdown())}),i(1,"span",56),c(2,"\u{1F4CC}"),s(),i(3,"span",57),c(4),s()()}if(r&2){let e=p(5);a(4),L("",e.translations().selectAllSubtasks," (",e.getSubtasksCount(),")")}}function Tt(r,n){if(r&1){let e=C();i(0,"div",54),_("click",function(o){return m(e),g(o.stopPropagation())}),i(1,"button",55),_("click",function(){m(e);let o=p(4);return o.selectAll(),g(o.closeSelectionDropdown())}),i(2,"span",56),c(3,"\u{1F4CB}"),s(),i(4,"span",57),c(5),s()(),x(6,bt,5,2,"button",58)(7,Ct,5,2,"button",58),s()}if(r&2){let e=p(4);a(5),L("",e.translations().selectAll," (",e.getAllTasksCount(),")"),a(),u("ngIf",e.getMainTasksCount()>0),a(),u("ngIf",e.getSubtasksCount()>0)}}function kt(r,n){if(r&1){let e=C();i(0,"div",51)(1,"button",52,7),_("click",function(){m(e);let o=p(3);return g(o.toggleSelectionDropdown())}),O(),i(3,"svg",23),T(4,"path",26)(5,"path",27),s(),c(6),i(7,"svg",48),T(8,"path",49),s()(),x(9,Tt,8,4,"div",53),s()}if(r&2){let e=p(3);a(6),v(" ",e.translations().selectOptions," "),a(3),u("ngIf",e.showSelectionDropdown)}}function wt(r,n){if(r&1){let e=C();i(0,"button",59),_("click",function(){m(e);let o=p(3);return g(o.clearSelection())}),c(1),s()}if(r&2){let e=p(3);a(),v(" ",e.translations().clearSelection," ")}}function St(r,n){if(r&1){let e=C();i(0,"div",60),_("click",function(o){return m(e),g(o.stopPropagation())}),i(1,"button",61),_("click",function(){m(e);let o=p(3);return o.bulkConvertToSubtasks(),g(o.closeActionsDropdown())}),i(2,"span",56),c(3,"\u{1F517}"),s(),i(4,"span",57),c(5),s()(),i(6,"button",62),_("click",function(){m(e);let o=p(3);return o.bulkArchive(),g(o.closeActionsDropdown())}),i(7,"span",56),c(8,"\u{1F4E6}"),s(),i(9,"span",57),c(10),s()(),T(11,"div",63),i(12,"button",64),_("click",function(){m(e);let o=p(3);return o.bulkDelete(),g(o.closeActionsDropdown())}),i(13,"span",56),c(14,"\u{1F5D1}\uFE0F"),s(),i(15,"span",57),c(16),s()()()}if(r&2){let e=p(3);a(),u("title",e.translations().convertToSubtasksTitle),a(4),f(e.translations().convertToSubtasks),a(),u("disabled",e.areAllSelectedTasksSubtasks())("title",e.translations().archiveTasksTitle),a(4),f(e.translations().archiveTasks),a(2),u("title",e.translations().deleteTasksTitle),a(4),f(e.translations().deleteTasks)}}function Dt(r,n){if(r&1){let e=C();i(0,"div",39)(1,"div",40)(2,"span",41),c(3),s(),x(4,kt,10,2,"div",42)(5,wt,2,1,"button",43),s(),i(6,"div",44)(7,"div",45)(8,"button",46,6),_("click",function(){m(e);let o=p(2);return g(o.toggleActionsDropdown())}),O(),i(10,"svg",23),T(11,"path",47),s(),c(12),i(13,"svg",48),T(14,"path",49),s()(),x(15,St,17,7,"div",50),s()()()}if(r&2){let e=p(2);a(3),q("",e.selectedTodoIds().size," ",e.selectedTodoIds().size!==1?e.translations().selectedTasksPlural:e.translations().selectedTasks," ",e.translations().selected),a(),u("ngIf",e.selectedTodoIds().size<e.getAllTasksCount()),a(),u("ngIf",e.selectedTodoIds().size>0),a(3),u("disabled",e.selectedTodoIds().size===0),a(4),L(" ",e.translations().actions," (",e.selectedTodoIds().size,") "),a(3),u("ngIf",e.showActionsDropdown)}}function Pt(r,n){if(r&1){let e=C();i(0,"div",72)(1,"input",73),_("change",function(o){m(e);let l=p().$implicit,d=p(3);return g(d.toggleTodoSelection(l.id,o))})("click",function(o){return m(e),g(o.stopPropagation())}),s()()}if(r&2){let e=p().$implicit,t=p(3);a(),u("checked",t.selectedTodoIds().has(e.id))}}function yt(r,n){if(r&1){let e=C();i(0,"div",69),x(1,Pt,2,1,"div",70),i(2,"app-todo-item",71),_("taskSelectionChange",function(o){m(e);let l=p(3);return g(l.onTaskSelectionChange(o))})("edit",function(){let o=m(e).$implicit,l=p(3);return g(l.onEdit(o))})("toggle",function(o){m(e);let l=p(3);return g(l.onToggleTodo(o))})("delete",function(o){m(e);let l=p(3);return g(l.onDeleteTodo(o))})("update",function(o){m(e);let l=p(3);return g(l.onUpdateTodo(o))})("addSubtaskEvent",function(o){m(e);let l=p(3);return g(l.onAddSubtask(o))})("toggleExpanded",function(o){m(e);let l=p(3);return g(l.onToggleExpanded(o))})("subtaskDrop",function(o){m(e);let l=p(3);return g(l.onSubtaskDrop(o.event,o.parentId))})("archive",function(o){m(e);let l=p(3);return g(l.onArchiveTodo(o))})("unarchive",function(o){m(e);let l=p(3);return g(l.onUnarchiveTodo(o))})("convertToMainTask",function(o){m(e);let l=p(3);return g(l.onConvertToMainTask(o))})("convertToSubtask",function(o){m(e);let l=p(3);return g(l.onConvertToSubtask(o))})("focusToggle",function(o){m(e);let l=p(3);return g(l.onFocusToggle(o))})("todayTaskToggle",function(o){m(e);let l=p(3);return g(l.onTodayTaskToggle(o))})("duplicate",function(o){m(e);let l=p(3);return g(l.onDuplicateTodo(o))})("editSubtask",function(o){m(e);let l=p(3);return g(l.onEditSubtask(o))})("click",function(o){let l=m(e).$implicit,d=p(3);return g(d.onTodoClick(l.id,o))}),s()()}if(r&2){let e=n.$implicit,t=p(3);a(),u("ngIf",t.isSelectionMode()),a(),M("selection-mode",t.isSelectionMode())("selected",t.selectedTodoIds().has(e.id)),u("cdkDragDisabled",t.isDraggingDisabled||t.isSelectionMode())("todo",e)("highlightedTaskId",t.highlightedTaskId())("showFocusToggle",!0)("isSelectionMode",t.isSelectionMode())("selectedTaskIds",t.selectedTodoIds())}}function Mt(r,n){if(r&1){let e=C();i(0,"div",65),_("cdkDropListDropped",function(o){m(e);let l=p(2);return g(l.onDrop(o))}),x(1,yt,3,11,"div",66),i(2,"div",67)(3,"button",68),_("click",function(){m(e);let o=p(2);return g(o.onShowAddTaskForm())}),O(),i(4,"svg",23),T(5,"path",24),s(),c(6),s()()()}if(r&2){let e=p(2);u("cdkDropListData",e.filteredTodos()),a(),u("ngForOf",e.filteredTodos())("ngForTrackBy",e.trackByTodoId),a(5),v(" ",e.translations().addTask," ")}}function Ot(r,n){r&1&&c(0," \u{1F50D} ")}function It(r,n){r&1&&c(0," \u{1F389} ")}function Et(r,n){r&1&&c(0," \u{1F4DD} ")}function jt(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().noTasksFound," ")}}function Vt(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().noCompletedTasks," ")}}function Ft(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().noActiveTasks," ")}}function At(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().noTasksYet," ")}}function zt(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().tryAdjustingSearch," ")}}function Lt(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().completeTasksToSee," ")}}function Nt(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().allTasksCompleted," ")}}function Bt(r,n){if(r&1&&c(0),r&2){let e=p(3);v(" ",e.translations().addFirstTask," ")}}function Ht(r,n){if(r&1&&(i(0,"div",74)(1,"div",75),Q(2,Ot,1,0)(3,It,1,0)(4,Et,1,0),s(),i(5,"h3",76),Q(6,jt,1,1)(7,Vt,1,1)(8,Ft,1,1)(9,At,1,1),s(),i(10,"p",77),Q(11,zt,1,1)(12,Lt,1,1)(13,Nt,1,1)(14,Bt,1,1),s()()),r&2){let e=p(2);a(2),$(e.search()?2:e.filter()==="completed"?3:4),a(4),$(e.search()?6:e.filter()==="completed"?7:e.filter()==="active"?8:9),a(5),$(e.search()?11:e.filter()==="completed"?12:e.filter()==="active"?13:14)}}function Rt(r,n){if(r&1){let e=C();i(0,"div",12)(1,"header",13)(2,"button",14),_("click",function(){m(e);let o=p();return g(o.goBack())}),O(),i(3,"svg",15),T(4,"path",16),s(),c(5),s(),N(),i(6,"div",17)(7,"div",18),c(8),s(),i(9,"div")(10,"h1",19),c(11),s(),x(12,ht,2,1,"p",20),s()(),i(13,"div",21)(14,"button",22),_("click",function(){m(e);let o=p();return g(o.onShowImportDialog())}),O(),i(15,"svg",23),T(16,"path",24),s(),c(17),s(),N(),i(18,"button",25),_("click",function(){m(e);let o=p();return g(o.toggleSelectionMode())}),O(),i(19,"svg",23),T(20,"path",26)(21,"path",27),s(),c(22),s()(),N(),i(23,"div",28)(24,"div",29)(25,"span",30),c(26),s(),i(27,"span",31),c(28),s()(),i(29,"div",29)(30,"span",30),c(31),s(),i(32,"span",31),c(33),s()(),i(34,"div",29)(35,"span",30),c(36),s(),i(37,"span",31),c(38),s()()()(),i(39,"div",32)(40,"app-todo-form",33,4),_("addTodo",function(o){m(e);let l=p();return g(l.onAddTodo(o))}),s(),x(42,Dt,16,9,"div",34),i(43,"app-todo-filters",35),_("filterChange",function(o){m(e);let l=p();return g(l.onFilterChange(o))})("sortChange",function(o){m(e);let l=p();return g(l.onSortChange(o))})("searchChange",function(o){m(e);let l=p();return g(l.onSearchChange(o))})("clearCompleted",function(){m(e);let o=p();return g(o.onClearCompleted())}),s(),i(44,"div",36),x(45,Mt,7,4,"div",37)(46,Ht,15,3,"ng-template",null,5,G),s()()()}if(r&2){let e=B(47),t=p();a(5),v(" ",t.translations().backToProjects," "),a(2),H("background-color",t.project().color),a(),v(" ",t.project().icon||"\u{1F4CB}"," "),a(3),f(t.project().name),a(),u("ngIf",t.project().description),a(2),u("title",t.translations().importTasksTitle),a(3),v(" ",t.translations().importTasks," "),a(),M("active",t.isSelectionMode()),u("title",t.translations().selectMultiple),a(4),v(" ",t.isSelectionMode()?t.translations().cancel:t.translations().select," "),a(4),f(t.projectTodos().length),a(2),f(t.translations().totalTasks),a(3),f(t.completedTodos().length),a(2),f(t.translations().completed),a(3),f(t.activeTodos().length),a(2),f(t.translations().active),a(4),u("ngIf",t.isSelectionMode()),a(),u("currentFilter",t.filter())("currentSort",t.sort())("searchTerm",t.search())("stats",t.todoStats()),a(2),u("ngIf",t.filteredTodos().length>0)("ngIfElse",e)}}function Wt(r,n){if(r&1){let e=C();i(0,"div",78)(1,"h2"),c(2),s(),i(3,"p"),c(4),s(),i(5,"button",79),_("click",function(){m(e);let o=p();return g(o.goBack())}),c(6),s()()}if(r&2){let e=p();a(2),f(e.translations().projectNotFound),a(2),f(e.translations().projectNotFoundDescription),a(2),v(" ",e.translations().backToProjects," ")}}var Ne=class r{taskEditor;todoForm;importDialog;parentSelectionDialog;editingTodo=null;isDraggingDisabled=!1;taskToConvert=null;tasksToConvert=[];isSelectionMode=P(!1);selectedTodoIds=P(new Set);showSelectionDropdown=!1;showActionsDropdown=!1;route=S(ve);router=S(xe);projectService=S(Ie);todoService=S(Z);focusService=S(je);confirmationService=S(Ee);translationService=S(z);translations=k(()=>({backToProjects:this.translationService.translate("projects.backToProjects"),importTasks:this.translationService.translate("projects.importTasks"),importTasksTitle:this.translationService.translate("projects.importTasksTitle"),selectMultiple:this.translationService.translate("projects.selectMultiple"),cancel:this.translationService.translate("projects.cancel"),select:this.translationService.translate("projects.select"),totalTasks:this.translationService.translate("projects.totalTasks"),completed:this.translationService.translate("projects.completed"),active:this.translationService.translate("projects.active"),selectedTasks:this.translationService.translate("projects.selectedTasks"),selectedTasksPlural:this.translationService.translate("projects.selectedTasksPlural"),selected:this.translationService.translate("projects.selected"),selectOptions:this.translationService.translate("projects.selectOptions"),selectAll:this.translationService.translate("projects.selectAll"),selectAllMainTasks:this.translationService.translate("projects.selectAllMainTasks"),selectAllSubtasks:this.translationService.translate("projects.selectAllSubtasks"),clearSelection:this.translationService.translate("projects.clearSelection"),actions:this.translationService.translate("projects.actions"),convertToSubtasks:this.translationService.translate("projects.convertToSubtasks"),convertToSubtasksTitle:this.translationService.translate("projects.convertToSubtasksTitle"),archiveTasks:this.translationService.translate("projects.archiveTasks"),archiveTasksTitle:this.translationService.translate("projects.archiveTasksTitle"),deleteTasks:this.translationService.translate("projects.deleteTasks"),deleteTasksTitle:this.translationService.translate("projects.deleteTasksTitle"),addTask:this.translationService.translate("tasks.addTask"),noTasksFound:this.translationService.translate("projects.noTasksFound"),noCompletedTasks:this.translationService.translate("projects.noCompletedTasks"),noActiveTasks:this.translationService.translate("projects.noActiveTasks"),noTasksYet:this.translationService.translate("projects.noTasksYet"),tryAdjustingSearch:this.translationService.translate("projects.tryAdjustingSearch"),completeTasksToSee:this.translationService.translate("projects.completeTasksToSee"),allTasksCompleted:this.translationService.translate("projects.allTasksCompleted"),addFirstTask:this.translationService.translate("projects.addFirstTask"),projectNotFound:this.translationService.translate("projects.projectNotFound"),projectNotFoundDescription:this.translationService.translate("projects.projectNotFoundDescription"),deleteSelectedTasks:this.translationService.translate("projects.deleteSelectedTasks"),deleteSelectedTasksConfirm:this.translationService.translate("projects.deleteSelectedTasksConfirm"),deleteAll:this.translationService.translate("projects.deleteAll"),archiveSelectedTasks:this.translationService.translate("projects.archiveSelectedTasks"),archiveSelectedTasksConfirm:this.translationService.translate("projects.archiveSelectedTasksConfirm"),archiveAll:this.translationService.translate("projects.archiveAll"),deleteTask:this.translationService.translate("actions.delete"),deleteTaskConfirm:this.translationService.translate("searchPage.deleteTaskConfirm"),deleteTaskSubtext:this.translationService.translate("searchPage.deleteTaskSubtext"),deleteAction:this.translationService.translate("actions.delete"),cancelAction:this.translationService.translate("actions.cancel"),clearCompletedTasks:this.translationService.translate("filters.clearCompleted"),clearCompletedTasksConfirm:this.translationService.translate("projectDetail.clearCompletedTasksConfirm")}));projectIdSignal=P(null);projectId=this.projectIdSignal.asReadonly();highlightedTaskIdSignal=P(null);highlightedTaskId=this.highlightedTaskIdSignal.asReadonly();project=k(()=>{let n=this.projectId();return n?this.projectService.getProjectById(n):null});projectTodos=k(()=>this.todoService.todos().filter(n=>n.projectId===this.projectId()));completedTodos=k(()=>this.projectTodos().filter(n=>n.completed&&!n.archived));activeTodos=k(()=>this.projectTodos().filter(n=>!n.completed&&!n.archived));archivedTodos=k(()=>this.projectTodos().filter(n=>n.archived));filteredTodos=k(()=>{let n=new Set(this.projectTodos().map(e=>e.id));return this.todoService.filteredTodos().filter(e=>n.has(e.id))});filter=this.todoService.filter;sort=this.todoService.sort;search=this.todoService.search;todoStats=k(()=>{let n=this.projectTodos(),e=this.flattenTodos(n),t=e.filter(o=>!o.archived);return{total:t.length,completed:t.filter(o=>o.completed).length,active:t.filter(o=>!o.completed).length,archived:e.filter(o=>o.archived).length,highPriority:t.filter(o=>o.priority==="high"&&!o.completed).length,overdue:t.filter(o=>o.dueDate&&!o.completed&&new Date(o.dueDate)<new Date).length}});ngOnInit(){this.route.paramMap.subscribe(n=>{let e=n.get("id");this.projectIdSignal.set(e),e&&this.projectService.setCurrentProject(e)}),this.route.queryParamMap.subscribe(n=>{let e=n.get("highlightTask");this.highlightedTaskIdSignal.set(e),e&&(setTimeout(()=>{let t=document.querySelector(`[data-task-id="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{this.highlightedTaskIdSignal.set(null),this.router.navigate([],{relativeTo:this.route,queryParams:{},replaceUrl:!0})},3e3))})}goBack(){this.router.navigate(["/projects"])}onAddTodo(n){return D(this,null,function*(){let e=this.projectId();if(e)try{yield this.todoService.addTodo(de(se({},n),{projectId:e})),this.todoForm.resetAndClose()}catch(t){if(t.message==="OVERLAP_CANCELLED")return;console.error("Failed to add todo:",t)}})}onAddSubtask(n){this.todoService.addSubtask(n.parentId,n.subtaskData)}onToggleExpanded(n){this.todoService.toggleExpanded(n)}onToggleTodo(n){return D(this,null,function*(){yield this.todoService.toggleTodo(n)})}onUpdateTodo(n){return D(this,null,function*(){try{yield this.todoService.updateTodo(n.id,n.updates)}catch(e){if(e.message==="OVERLAP_CANCELLED")return;console.error("Failed to update todo:",e)}})}onDeleteTodo(n){return D(this,null,function*(){let e=this.findTodoByIdInProject(n);if(!e)return;(yield this.confirmationService.open(this.translations().deleteTask,`${this.translations().deleteTaskConfirm} "${e.title}"? ${this.translations().deleteTaskSubtext}`,this.translations().deleteAction,this.translations().cancelAction,!1))==="confirm"&&this.todoService.deleteTodo(n)})}onDuplicateTodo(n){return D(this,null,function*(){try{yield this.todoService.duplicateTodo(n)}catch(e){console.error("Failed to duplicate todo:",e)}})}onArchiveTodo(n){this.todoService.archiveTodo(n)}onUnarchiveTodo(n){this.todoService.unarchiveTodo(n)}onFilterChange(n){this.todoService.setFilter(n)}onSortChange(n){this.todoService.setSort(n)}onSearchChange(n){this.todoService.setSearch(n)}onClearCompleted(){return D(this,null,function*(){(yield this.confirmationService.open(this.translations().clearCompletedTasks,this.translations().clearCompletedTasksConfirm))&&this.todoService.clearCompleted()})}onEdit(n){this.editingTodo=n,this.taskEditor.open(),this.isDraggingDisabled=!0}onEditSubtask(n){let e=this.findTodoByIdInProject(n);e&&this.onEdit(e)}onShowAddTaskForm(){this.editingTodo=null,this.taskEditor.open(),this.isDraggingDisabled=!0}onSaveTask(n){return D(this,null,function*(){let e=this.projectId();if(e)try{if(this.editingTodo)yield this.todoService.updateTodo(this.editingTodo.id,se({},n)),this.taskEditor.closeAndReset(),this.closeEditor();else{let t={title:n.title||"",description:n.description,completed:n.completed||!1,archived:!1,priority:n.priority||"medium",dueDate:n.dueDate,startDateTime:n.startDateTime,endDateTime:n.endDateTime,duration:n.duration,category:n.category,isExpanded:!1,projectId:e};yield this.todoService.addTodo(t),this.taskEditor.closeAndReset(),this.closeEditor()}}catch(t){if(t?.message==="OVERLAP_CANCELLED")return;console.error("Failed to save todo:",t)}})}closeEditor(){this.editingTodo=null,this.isDraggingDisabled=!1}trackByTodoId(n,e){return e.id}todoMatchesSearch(n,e){return n.title.toLowerCase().includes(e)||n.description?.toLowerCase().includes(e)||n.category?.toLowerCase().includes(e)?!0:n.subtasks.some(o=>this.todoMatchesSearch(o,e))}flattenTodos(n){let e=[];for(let t of n)e.push(t),t.subtasks.length>0&&e.push(...this.flattenTodos(t.subtasks));return e}onDrop(n){let e=this.filteredTodos(),t=e[n.previousIndex],o=e[n.currentIndex],l=[...this.projectTodos()],d=l.findIndex(h=>h.id===t.id),b=l.findIndex(h=>h.id===o.id);ce(l,d,b),this.todoService.reorderTodos(l.map(h=>h.id))}onSubtaskDrop(n,e){let t=this.findTodoByIdInProject(e);if(t&&t.subtasks.length>0){let o=[...t.subtasks];ce(o,n.previousIndex,n.currentIndex),this.todoService.reorderSubtasks(e,o.map(l=>l.id))}}findTodoByIdInProject(n){let e=this.projectTodos();return this.findTodoByIdRecursive(e,n)}findTodoByIdRecursive(n,e){for(let t of n){if(t.id===e)return t;if(t.subtasks.length>0){let o=this.findTodoByIdRecursive(t.subtasks,e);if(o)return o}}}onShowImportDialog(){this.importDialog.open()}onCloseImportDialog(){}onImportTasks(n){return D(this,null,function*(){let e=this.projectId();if(e){console.log("\u{1F504} Starting import of",n.length,"tasks");try{for(let t=0;t<n.length;t++){let o=n[t];console.log(`\u{1F4DD} Importing task ${t+1}/${n.length}:`,o.title);let l=`[IMPORT-${Date.now()}-${t}]`,d={title:o.title,description:l,completed:!1,archived:!1,priority:"medium",dueDate:void 0,startDateTime:void 0,endDateTime:void 0,duration:void 0,category:void 0,isExpanded:o.subtasks.length>0,projectId:e};yield this.todoService.addTodo(d);let h=this.todoService.todos().find(w=>w.description===l&&w.projectId===e);h?(console.log("\u2705 Found created task:",h.id),yield this.todoService.updateTodo(h.id,{description:void 0}),yield this.importSubtasksRecursively(h.id,o.subtasks)):console.error("\u274C Could not find created task for:",o.title)}console.log(`\u{1F389} Successfully imported ${n.length} tasks`)}catch(t){console.error("\u274C Failed to import tasks:",t)}}})}importSubtasksRecursively(n,e){return D(this,null,function*(){for(let t=0;t<e.length;t++){let o=e[t];console.log(`  \u{1F4CC} Adding subtask: ${o.title}`);let l=`[IMPORT-SUBTASK-${Date.now()}-${t}]`,d={title:o.title,description:l,completed:!1,priority:"medium",dueDate:void 0,startDateTime:void 0,endDateTime:void 0,duration:void 0,category:void 0};if(this.todoService.addSubtask(n,d),o.subtasks.length>0){yield new Promise(w=>setTimeout(w,10));let b=this.todoService.todos(),h=this.findTaskByDescriptionRecursively(b,l);h?(console.log("\u2705 Found created subtask:",h.id),yield this.todoService.updateTodo(h.id,{description:void 0}),yield this.importSubtasksRecursively(h.id,o.subtasks)):console.error("\u274C Could not find created subtask for:",o.title)}else{yield new Promise(w=>setTimeout(w,10));let b=this.todoService.todos(),h=this.findTaskByDescriptionRecursively(b,l);h&&(yield this.todoService.updateTodo(h.id,{description:void 0}))}}})}findTaskByDescriptionRecursively(n,e){for(let t of n){if(t.description===e)return t;if(t.subtasks.length>0){let o=this.findTaskByDescriptionRecursively(t.subtasks,e);if(o)return o}}}toggleSelectionMode(){this.isSelectionMode.set(!this.isSelectionMode()),this.isSelectionMode()||this.clearSelection()}toggleTodoSelection(n,e){let t=e.target,o=new Set(this.selectedTodoIds());t.checked?o.add(n):o.delete(n),this.selectedTodoIds.set(o)}onTaskSelectionChange(n){let e=new Set(this.selectedTodoIds());n.selected?e.add(n.taskId):e.delete(n.taskId),this.selectedTodoIds.set(e)}onTodoClick(n,e){if(this.isSelectionMode()){e.preventDefault(),e.stopPropagation();let t=new Set(this.selectedTodoIds());t.has(n)?t.delete(n):t.add(n),this.selectedTodoIds.set(t)}}selectAll(){let n=this.flattenTodos(this.filteredTodos()),e=new Set(n.map(t=>t.id));this.selectedTodoIds.set(e)}selectAllMainTasks(){let n=this.flattenTodos(this.filteredTodos()),e=new Set(n.filter(t=>!t.parentId).map(t=>t.id));this.selectedTodoIds.set(e)}selectAllSubtasks(){let n=this.flattenTodos(this.filteredTodos()),e=new Set(n.filter(t=>t.parentId).map(t=>t.id));this.selectedTodoIds.set(e)}getAllTasksCount(){return this.flattenTodos(this.filteredTodos()).length}getMainTasksCount(){return this.flattenTodos(this.filteredTodos()).filter(e=>!e.parentId).length}getSubtasksCount(){return this.flattenTodos(this.filteredTodos()).filter(e=>e.parentId).length}areAllSelectedTasksSubtasks(){let n=Array.from(this.selectedTodoIds());if(n.length===0)return!1;let t=this.flattenTodos(this.filteredTodos()).filter(o=>n.includes(o.id));return t.length>0&&t.every(o=>o.parentId)}clearSelection(){this.selectedTodoIds.set(new Set)}toggleSelectionDropdown(){this.showSelectionDropdown=!this.showSelectionDropdown,this.showSelectionDropdown&&(this.showActionsDropdown=!1,this.setupDropdownClickHandler("selection"))}closeSelectionDropdown(){this.showSelectionDropdown=!1}toggleActionsDropdown(){this.showActionsDropdown=!this.showActionsDropdown,this.showActionsDropdown&&(this.showSelectionDropdown=!1,this.setupDropdownClickHandler("actions"))}closeActionsDropdown(){this.showActionsDropdown=!1}setupDropdownClickHandler(n){setTimeout(()=>{let e=t=>{let o=t.target,l=o.closest(".selection-dropdown-container"),d=o.closest(".actions-dropdown-container");n==="selection"&&!l?(this.showSelectionDropdown=!1,document.removeEventListener("click",e)):n==="actions"&&!d&&(this.showActionsDropdown=!1,document.removeEventListener("click",e))};document.addEventListener("click",e)},0)}bulkDelete(){return D(this,null,function*(){let n=Array.from(this.selectedTodoIds());if(n.length===0)return;let e=n.length,t=e!==1?"s":"",o=this.translationService.translate("projects.deleteSelectedTasksConfirm").replace("{count}",e.toString()).replace("{plural}",t);(yield this.confirmationService.open(this.translationService.translate("projects.deleteSelectedTasks"),o,this.translationService.translate("projects.deleteAll"),this.translationService.translate("projects.cancel"),!1))==="confirm"&&(n.forEach(d=>{this.todoService.deleteTodo(d)}),this.clearSelection(),this.isSelectionMode.set(!1))})}bulkArchive(){return D(this,null,function*(){let n=Array.from(this.selectedTodoIds());if(n.length===0)return;let e=n.length,t=e!==1?"s":"",o=this.translationService.translate("projects.archiveSelectedTasksConfirm").replace("{count}",e.toString()).replace("{plural}",t);(yield this.confirmationService.open(this.translationService.translate("projects.archiveSelectedTasks"),o,this.translationService.translate("projects.archiveAll"),this.translationService.translate("projects.cancel"),!1))==="confirm"&&(n.forEach(d=>{this.todoService.archiveTodo(d)}),this.clearSelection(),this.isSelectionMode.set(!1))})}bulkConvertToSubtasks(){let n=Array.from(this.selectedTodoIds());if(n.length===0)return;this.tasksToConvert=n;let e=this.projectId();this.parentSelectionDialog.open(void 0,e||void 0,n)}onConvertToMainTask(n){return D(this,null,function*(){try{yield this.todoService.convertSubtaskToMainTask(n)}catch(e){console.error("Failed to convert subtask to main task:",e)}})}onConvertToSubtask(n){this.taskToConvert=n;let e=this.projectId();this.parentSelectionDialog.open(n,e||void 0)}onParentSelected(n){return D(this,null,function*(){try{if(this.tasksToConvert.length>0){for(let e of this.tasksToConvert)yield this.todoService.convertMainTaskToSubtask(e,n);this.clearSelection(),this.isSelectionMode.set(!1),this.tasksToConvert=[]}else this.taskToConvert&&(yield this.todoService.convertMainTaskToSubtask(this.taskToConvert,n),this.taskToConvert=null)}catch(e){console.error("Failed to convert task(s) to subtask:",e),this.taskToConvert=null,this.tasksToConvert=[]}})}onParentSelectionClosed(){this.taskToConvert=null,this.tasksToConvert=[]}onFocusToggle(n){return D(this,null,function*(){yield this.focusService.toggleTodaysFocus(n)})}onTodayTaskToggle(n){return D(this,null,function*(){yield this.focusService.toggleTodaysTasks(n)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=V({type:r,selectors:[["app-project-detail"]],viewQuery:function(e,t){if(e&1&&(U(_t,5),U(ft,5),U(vt,5),U(xt,5)),e&2){let o;K(o=Y())&&(t.taskEditor=o.first),K(o=Y())&&(t.todoForm=o.first),K(o=Y())&&(t.importDialog=o.first),K(o=Y())&&(t.parentSelectionDialog=o.first)}},decls:9,vars:4,consts:[["taskEditor",""],["importDialog",""],["parentSelectionDialog",""],["notFound",""],["todoForm",""],["emptyState",""],["actionsDropdownBtn",""],["selectionDropdownBtn",""],["class","project-detail-container",4,"ngIf","ngIfElse"],[3,"save","close","todo","defaultProjectId"],[3,"import","close"],[3,"confirmSelection","closeDialog"],[1,"project-detail-container"],[1,"project-header"],[1,"back-btn",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","currentColor"],["fill-rule","evenodd","d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"project-info"],[1,"project-icon"],[1,"project-name"],["class","project-description",4,"ngIf"],[1,"project-actions"],[1,"import-btn",3,"click","title"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M8 1a.75.75 0 01.75.75v5.5h5.5a.75.75 0 010 1.5h-5.5v5.5a.75.75 0 01-1.5 0v-5.5h-5.5a.75.75 0 010-1.5h5.5v-5.5A.75.75 0 018 1z"],[1,"select-btn",3,"click","title"],["d","M2.5 3.5a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5v-9zM3 4v8h10V4H3z"],["d","M5.5 7a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z"],[1,"project-stats"],[1,"stat"],[1,"stat-value"],[1,"stat-label"],[1,"todo-container"],[3,"addTodo"],["class","bulk-actions-bar",4,"ngIf"],[3,"filterChange","sortChange","searchChange","clearCompleted","currentFilter","currentSort","searchTerm","stats"],[1,"todos-section"],["class","todos-list","cdkDropList","","id","main-todos-list",3,"cdkDropListData","cdkDropListDropped",4,"ngIf","ngIfElse"],[1,"project-description"],[1,"bulk-actions-bar"],[1,"bulk-actions-info"],[1,"selected-count"],["class","selection-dropdown-container",4,"ngIf"],["class","clear-selection-btn",3,"click",4,"ngIf"],[1,"bulk-actions-buttons"],[1,"actions-dropdown-container"],[1,"actions-dropdown-btn",3,"click","disabled"],["d","M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"],["width","12","height","12","viewBox","0 0 12 12","fill","currentColor",1,"dropdown-arrow"],["d","M3 4.5L6 7.5L9 4.5","stroke","currentColor","stroke-width","1.5","fill","none","stroke-linecap","round","stroke-linejoin","round"],["class","actions-dropdown-menu",3,"click",4,"ngIf"],[1,"selection-dropdown-container"],[1,"selection-dropdown-btn",3,"click"],["class","selection-dropdown-menu",3,"click",4,"ngIf"],[1,"selection-dropdown-menu",3,"click"],[1,"dropdown-item",3,"click"],[1,"dropdown-icon"],[1,"dropdown-text"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"clear-selection-btn",3,"click"],[1,"actions-dropdown-menu",3,"click"],[1,"dropdown-item","convert-item",3,"click","title"],[1,"dropdown-item","archive-item",3,"click","disabled","title"],[1,"dropdown-divider"],[1,"dropdown-item","delete-item",3,"click","title"],["cdkDropList","","id","main-todos-list",1,"todos-list",3,"cdkDropListDropped","cdkDropListData"],["class","todo-item-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"add-task-bottom"],[1,"add-task-bottom-btn",3,"click"],[1,"todo-item-wrapper"],["class","selection-checkbox",4,"ngIf"],["cdkDrag","",3,"taskSelectionChange","edit","toggle","delete","update","addSubtaskEvent","toggleExpanded","subtaskDrop","archive","unarchive","convertToMainTask","convertToSubtask","focusToggle","todayTaskToggle","duplicate","editSubtask","click","cdkDragDisabled","todo","highlightedTaskId","showFocusToggle","isSelectionMode","selectedTaskIds"],[1,"selection-checkbox"],["type","checkbox",3,"change","click","checked"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],[1,"not-found"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){if(e&1){let o=C();x(0,Rt,48,25,"div",8),i(1,"app-task-editor",9,0),_("save",function(d){return m(o),g(t.onSaveTask(d))})("close",function(){return m(o),g(t.closeEditor())}),s(),i(3,"app-import-dialog",10,1),_("import",function(d){return m(o),g(t.onImportTasks(d))})("close",function(){return m(o),g(t.onCloseImportDialog())}),s(),i(5,"app-parent-selection-dialog",11,2),_("confirmSelection",function(d){return m(o),g(t.onParentSelected(d))})("closeDialog",function(){return m(o),g(t.onParentSelectionClosed())}),s(),x(7,Wt,7,3,"ng-template",null,3,G)}if(e&2){let o=B(8);u("ngIf",t.project())("ngIfElse",o),a(),u("todo",t.editingTodo)("defaultProjectId",t.projectId()||void 0)}},dependencies:[A,R,F,he,ee,Le,ie,Ae,Fe,Ve,ze,re,ae],styles:['.project-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.project-header[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 1px 3px #0000001a}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;font-size:14px;padding:8px 12px;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;gap:8px;margin-bottom:20px}.back-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.project-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:24px}.project-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;color:#fff;flex-shrink:0}.project-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:600;color:#1f2937}.project-description[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#6b7280;line-height:1.5}.project-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px}.import-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .2s ease;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.import-btn[_ngcontent-%COMP%]:hover{background:#2563eb;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.project-stats[_ngcontent-%COMP%]{display:flex;gap:32px;padding-top:20px;border-top:1px solid #f3f4f6}.stat[_ngcontent-%COMP%]{text-align:center}.stat-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:600;color:#1f2937;line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;text-transform:uppercase;letter-spacing:.5px;margin-top:4px}.todo-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;overflow:visible;box-shadow:0 1px 3px #0000001a}.todos-section[_ngcontent-%COMP%]{margin-top:16px}.todos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.add-task-bottom[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e5e7eb;background:#fafbfc;text-align:center}.add-task-bottom-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s ease;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.add-task-bottom-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px);box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.add-task-bottom-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:16px;margin-top:24px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:20px;opacity:.7}.empty-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#2c3e50;margin:0 0 12px}.empty-description[_ngcontent-%COMP%]{font-size:16px;color:#7f8c8d;margin:0;line-height:1.5}.not-found[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;margin:40px auto;max-width:400px}.not-found[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1f2937;margin:0 0 12px}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0 0 24px}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s ease;text-decoration:none}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}@media (max-width: 768px){.project-detail-container[_ngcontent-%COMP%]{padding:16px}.project-header[_ngcontent-%COMP%]{padding:20px}.project-info[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:16px}.project-name[_ngcontent-%COMP%]{font-size:24px}.project-stats[_ngcontent-%COMP%]{justify-content:space-around;gap:20px}.stat-value[_ngcontent-%COMP%]{font-size:28px}.empty-state[_ngcontent-%COMP%]{padding:40px 20px}.empty-icon[_ngcontent-%COMP%]{font-size:48px}.empty-title[_ngcontent-%COMP%]{font-size:20px}.empty-description[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.project-detail-container[_ngcontent-%COMP%]{padding:12px}.project-header[_ngcontent-%COMP%]{padding:16px}.project-icon[_ngcontent-%COMP%]{width:56px;height:56px;font-size:28px}.project-name[_ngcontent-%COMP%]{font-size:22px}.project-stats[_ngcontent-%COMP%]{gap:16px}}.select-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#f3f4f6;border:1px solid #d1d5db;border-radius:6px;color:#374151;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease}.select-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;border-color:#9ca3af}.select-btn.active[_ngcontent-%COMP%]{background:#3b82f6;border-color:#2563eb;color:#fff}.select-btn.active[_ngcontent-%COMP%]:hover{background:#2563eb}.bulk-actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;margin-bottom:1rem}.bulk-actions-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.selected-count[_ngcontent-%COMP%]{font-weight:600;color:#1f2937}.selection-dropdown-container[_ngcontent-%COMP%], .actions-dropdown-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.selection-dropdown-btn[_ngcontent-%COMP%], .actions-dropdown-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#f8fafc;border:1px solid #e2e8f0;border-radius:6px;color:#374151;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.selection-dropdown-btn[_ngcontent-%COMP%]:hover, .actions-dropdown-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.selection-dropdown-btn[_ngcontent-%COMP%]:disabled, .actions-dropdown-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dropdown-arrow[_ngcontent-%COMP%]{transition:transform .2s ease}.selection-dropdown-menu[_ngcontent-%COMP%], .actions-dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#fff;border:1px solid #e5e7eb;border-radius:8px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;z-index:1000;min-width:200px;padding:4px 0;margin-top:4px}.actions-dropdown-menu[_ngcontent-%COMP%]{right:0;left:auto}.dropdown-item[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:none;background:none;text-align:left;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:14px;color:#374151;transition:background-color .15s ease}.dropdown-item[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f3f4f6}.dropdown-item[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dropdown-icon[_ngcontent-%COMP%]{font-size:16px;flex-shrink:0}.dropdown-text[_ngcontent-%COMP%]{flex:1;white-space:nowrap}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:#e5e7eb;margin:4px 0}.convert-item[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#eff6ff;color:#1d4ed8}.archive-item[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#fffbeb;color:#d97706}.delete-item[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#fef2f2;color:#dc2626}.clear-selection-btn[_ngcontent-%COMP%]{background:none;border:none;color:#3b82f6;cursor:pointer;font-size:.875rem;padding:.25rem .5rem;border-radius:4px;transition:background .2s ease;white-space:nowrap}.clear-selection-btn[_ngcontent-%COMP%]:hover{background:#3b82f61a}.bulk-actions-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.bulk-delete-btn[_ngcontent-%COMP%], .bulk-archive-btn[_ngcontent-%COMP%], .bulk-convert-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border:1px solid;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease}.bulk-delete-btn[_ngcontent-%COMP%]{background:#fef2f2;border-color:#fecaca;color:#dc2626}.bulk-delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#fee2e2;border-color:#fca5a5}.bulk-archive-btn[_ngcontent-%COMP%]{background:#fffbeb;border-color:#fed7aa;color:#d97706}.bulk-archive-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#fef3c7;border-color:#fbbf24}.bulk-convert-btn[_ngcontent-%COMP%]{background:#f0f9ff;border-color:#bae6fd;color:#0369a1}.bulk-convert-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0f2fe;border-color:#7dd3fc}.bulk-delete-btn[_ngcontent-%COMP%]:disabled, .bulk-archive-btn[_ngcontent-%COMP%]:disabled, .bulk-convert-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.todo-item-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;margin-bottom:.5rem}.selection-checkbox[_ngcontent-%COMP%]{padding-top:1rem;flex-shrink:0}.selection-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#7c3aed;border:2px solid #7c3aed;border-radius:3px;background-color:transparent;position:relative;appearance:none;-webkit-appearance:none;-moz-appearance:none;transition:all .2s ease}.selection-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:#7c3aed;border-color:#7c3aed}.selection-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:700}.selection-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{border-color:#6d28d9;box-shadow:0 0 0 2px #7c3aed1a}.todo-item-wrapper[_ngcontent-%COMP%]   app-todo-item[_ngcontent-%COMP%]{flex:1;transition:all .2s ease}.todo-item-wrapper[_ngcontent-%COMP%]   app-todo-item.selection-mode[_ngcontent-%COMP%]{cursor:pointer}.todo-item-wrapper[_ngcontent-%COMP%]   app-todo-item.selected[_ngcontent-%COMP%]{background:#eff6ff;border-color:#3b82f6;box-shadow:0 0 0 1px #3b82f6}@media (max-width: 768px){.bulk-actions-bar[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.bulk-actions-info[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;gap:.75rem}.selection-dropdown-container[_ngcontent-%COMP%], .actions-dropdown-container[_ngcontent-%COMP%]{align-self:center}.bulk-actions-buttons[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 480px){.selection-dropdown-menu[_ngcontent-%COMP%], .actions-dropdown-menu[_ngcontent-%COMP%]{min-width:250px;left:50%;transform:translate(-50%)}.actions-dropdown-menu[_ngcontent-%COMP%]{right:auto}.dropdown-item[_ngcontent-%COMP%]{padding:12px 16px;font-size:16px}.selection-dropdown-btn[_ngcontent-%COMP%], .actions-dropdown-btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:16px}}']})};export{Ne as ProjectDetailComponent};
