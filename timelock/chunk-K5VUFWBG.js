import{h as ne}from"./chunk-B3DLK4UM.js";import{a as te}from"./chunk-GC3T4LN3.js";import{C as ee,b as G,h as N,j as W,k as $,n as Y,r as H,s as U,t as q,x as J,y as Z}from"./chunk-VMC4RC4D.js";import{Ab as _,Bb as v,Ca as o,Cb as b,Fb as T,Gb as y,Hb as M,Na as F,Ra as C,Tb as k,_ as P,c as D,cb as h,da as m,db as a,ea as g,eb as s,lc as R,mb as w,mc as B,na as S,nb as f,ob as p,qc as Q,sb as L,tb as z,ub as A,wb as j,xb as I,xc as K,yc as X,zb as l}from"./chunk-L2PMUJ2L.js";var ie=["taskEditor"];function oe(c,n){if(c&1){let t=w();a(0,"button",48),f("click",function(){m(t);let r=p();return g(r.clearSearch())}),l(1," \u2715 "),s()}if(c&2){let t=p();h("title",t.translations().clearSearch)}}function ae(c,n){if(c&1&&(a(0,"option",49),l(1),s()),c&2){let t=n.$implicit;h("value",t.id),o(),b(" ",t.icon," ",t.name," ")}}function se(c,n){if(c&1&&(a(0,"span"),l(1),s()),c&2){let t=p(2);o(),b("",t.translations().for,' "',t.searchQuery(),'"')}}function le(c,n){if(c&1&&(a(0,"span"),l(1),s()),c&2){let t=p(2);o(),v("- ",t.translations().allTasks)}}function ce(c,n){if(c&1&&(a(0,"div",50)(1,"h2"),l(2),C(3,se,2,2,"span",51)(4,le,2,1,"span",51),s()()),c&2){let t=p();o(2),b(" ",t.searchResults().length," ",t.searchResults().length===1?t.translations().result:t.translations().results," "),o(),h("ngIf",t.searchQuery()),o(),h("ngIf",!t.searchQuery())}}function de(c,n){if(c&1){let t=w();a(0,"div",55)(1,"button",56),f("click",function(){m(t);let r=p(2);return g(r.expandAllProjectGroups())}),l(2," \u{1F4C2} Expand All "),s(),a(3,"button",57),f("click",function(){m(t);let r=p(2);return g(r.collapseAllProjectGroups())}),l(4," \u{1F4C1} Collapse All "),s()()}}function pe(c,n){if(c&1&&(a(0,"div",70)(1,"span",71),l(2),s(),a(3,"span",72),l(4),s()()),c&2){let t,e=p().$implicit,r=p(4);o(2),v("\u21B3 ",r.translations().subtaskOf,":"),o(2),_(((t=r.getParentTask(e))==null?null:t.title)||r.translations().unknownParent)}}function ue(c,n){c&1&&(a(0,"span"),l(1,", "),s())}function me(c,n){if(c&1&&(a(0,"span",76),l(1),C(2,ue,2,0,"span",51),s()),c&2){let t=n.$implicit,e=n.last;o(),v(" ",t),o(),h("ngIf",!e)}}function ge(c,n){if(c&1&&(a(0,"div",73)(1,"span",74),l(2),s(),C(3,me,3,2,"span",75),s()),c&2){let t=p().$implicit,e=p(4);o(2),v("\u{1F3F7}\uFE0F ",e.translations().foundInTags,":"),o(),h("ngForOf",e.getMatchingTags(t,e.searchQuery()))}}function _e(c,n){if(c&1){let t=w();a(0,"div",66),C(1,pe,5,2,"div",67)(2,ge,4,2,"div",68),a(3,"app-todo-item",69),f("edit",function(){let r=m(t).$implicit,i=p(4);return g(i.openTaskEditorById(r.id))})("editSubtask",function(r){m(t);let i=p(4);return g(i.openTaskEditorById(r))})("toggle",function(r){m(t);let i=p(4);return g(i.onToggleTodo(r))})("delete",function(r){m(t);let i=p(4);return g(i.onDeleteTodo(r))})("update",function(r){m(t);let i=p(4);return g(i.onUpdateTodo(r))})("addSubtaskEvent",function(r){m(t);let i=p(4);return g(i.onAddSubtask(r))})("toggleExpanded",function(r){m(t);let i=p(4);return g(i.onToggleExpanded(r))})("archive",function(r){m(t);let i=p(4);return g(i.onArchiveTodo(r))})("unarchive",function(r){m(t);let i=p(4);return g(i.onUnarchiveTodo(r))}),s()()}if(c&2){let t=n.$implicit,e=p(4);o(),h("ngIf",e.isSubtask(t)),o(),h("ngIf",e.getMatchType(t,e.searchQuery())==="tag"),o(),h("todo",t)("isSubtask",e.isSubtask(t))}}function he(c,n){if(c&1&&(a(0,"div",64),C(1,_e,4,4,"div",65),s()),c&2){let t=p().$implicit,e=p(2);I("expanded",e.isProjectGroupExpanded((t.project==null?null:t.project.id)||"")),o(),h("ngForOf",t.tasks)("ngForTrackBy",e.trackByTodoId)}}function ve(c,n){if(c&1){let t=w();a(0,"div",58)(1,"div",59),f("click",function(){let r=m(t).$implicit,i=p(2);return g(i.toggleProjectGroup((r.project==null?null:r.project.id)||""))}),a(2,"span",60),l(3),s(),a(4,"span",61),l(5),s(),a(6,"h3"),l(7),s(),a(8,"span",62),l(9),s()(),C(10,he,2,4,"div",63),s()}if(c&2){let t=n.$implicit,e=p(2);j("border-color",(t.project==null?null:t.project.color)||"#8b5cf6")("box-shadow","0 0 0 1px "+(t.project!=null&&t.project.color?t.project.color+"20":"rgba(139, 92, 246, 0.1)")),o(),j("background",e.getProjectHeaderBackground(t.project==null?null:t.project.color))("border-bottom-color",e.getProjectBorderColor(t.project==null?null:t.project.color)),I("expanded",e.isProjectGroupExpanded((t.project==null?null:t.project.id)||"")),o(2),v(" ",e.isProjectGroupExpanded((t.project==null?null:t.project.id)||"")?"\u{1F4C2}":"\u{1F4C1}"," "),o(),j("color",(t.project==null?null:t.project.color)||"#8b5cf6"),o(),v(" ",(t.project==null?null:t.project.icon)||"\u{1F4CB}"," "),o(2),_((t.project==null?null:t.project.name)||e.translations().noProject),o(2),b("",t.tasks.length," ",t.tasks.length===1?e.translations().task:e.translations().tasks),o(),h("ngIf",e.isProjectGroupExpanded((t.project==null?null:t.project.id)||""))}}function fe(c,n){if(c&1&&(a(0,"div",52),C(1,de,5,0,"div",53)(2,ve,11,18,"div",54),s()),c&2){let t=p();o(),h("ngIf",t.groupedResults().length>1),o(),h("ngForOf",t.groupedResults())}}function Ce(c,n){if(c&1&&(a(0,"div",77)(1,"div",78),l(2,"\u{1F4CB}"),s(),a(3,"h3"),l(4),s(),a(5,"p"),l(6),s()()),c&2){let t=p();o(4),_(t.translations().noTasksFound),o(2),_(t.translations().noTasksYetMessage)}}function xe(c,n){if(c&1&&(a(0,"div",77)(1,"div",78),l(2,"\u{1F4ED}"),s(),a(3,"h3"),l(4),s(),a(5,"p"),l(6),s()()),c&2){let t=p();o(4),_(t.translations().noResultsFound),o(2),_(t.translations().noResultsMessage)}}var re=class c{taskEditor;todoService=P(ee);projectService=P(K);confirmationService=P(Z);route=P(G);translationService=P(X);translations=k(()=>({searchTasks:this.translationService.translate("searchPage.searchTasks"),searchSubtitle:this.translationService.translate("searchPage.searchSubtitle"),searchPlaceholder:this.translationService.translate("searchPage.searchPlaceholder"),clearSearch:this.translationService.translate("searchPage.clearSearch"),status:this.translationService.translate("common.status"),allTasks:this.translationService.translate("common.allTasks"),active:this.translationService.translate("common.active"),completed:this.translationService.translate("common.completed"),archived:this.translationService.translate("common.archived"),project:this.translationService.translate("common.project"),allProjects:this.translationService.translate("common.allProjects"),priority:this.translationService.translate("tasks.priority"),allPriorities:this.translationService.translate("common.allPriorities"),priorityHigh:this.translationService.translate("priority.high"),priorityMedium:this.translationService.translate("priority.medium"),priorityLow:this.translationService.translate("priority.low"),sortBy:this.translationService.translate("search.sortBy"),relevance:this.translationService.translate("search.relevance"),dueDate:this.translationService.translate("search.dueDate"),dueDateLatestFirst:this.translationService.translate("searchPage.dueDateLatestFirst"),startDate:this.translationService.translate("search.startDate"),startDateLatestFirst:this.translationService.translate("searchPage.startDateLatestFirst"),endDate:this.translationService.translate("search.endDate"),endDateLatestFirst:this.translationService.translate("searchPage.endDateLatestFirst"),createdDesc:this.translationService.translate("searchPage.createdDesc"),alphabetical:this.translationService.translate("search.alphabetical"),created:this.translationService.translate("search.created"),result:this.translationService.translate("searchPage.result"),results:this.translationService.translate("searchPage.results"),for:this.translationService.translate("searchPage.for"),task:this.translationService.translate("searchPage.task"),tasks:this.translationService.translate("searchPage.tasks"),subtaskOf:this.translationService.translate("searchPage.subtaskOf"),foundInTags:this.translationService.translate("searchPage.foundInTags"),noTasksFound:this.translationService.translate("searchPage.noTasksFound"),noTasksYetMessage:this.translationService.translate("searchPage.noTasksYetMessage"),noResultsFound:this.translationService.translate("searchPage.noResultsFound"),noResultsMessage:this.translationService.translate("searchPage.noResultsMessage"),noProject:this.translationService.translate("common.noProject"),unknownParent:this.translationService.translate("common.unknownParent"),deleteTaskConfirm:this.translationService.translate("searchPage.deleteTaskConfirm"),deleteTaskSubtext:this.translationService.translate("searchPage.deleteTaskSubtext"),deleteAction:this.translationService.translate("actions.delete"),cancelAction:this.translationService.translate("actions.cancel")}));searchQuery=S("");selectedProjectId=S("");selectedStatus=S("all");selectedPriority=S("all");selectedSort=S("relevance");editingTodo=null;expandedProjectGroups=S(new Set);ngOnInit(){this.route.queryParams.subscribe(n=>{n.q&&this.searchQuery.set(n.q)}),this.expandAllProjectGroups()}toggleProjectGroup(n){let t=this.expandedProjectGroups(),e=new Set(t);e.has(n)?e.delete(n):e.add(n),this.expandedProjectGroups.set(e)}isProjectGroupExpanded(n){return this.expandedProjectGroups().has(n)}expandAllProjectGroups(){let n=this.groupedResults();if(n.length>0){let t=n.map(e=>e.project?.id||"");this.expandedProjectGroups.set(new Set(t))}else this.expandedProjectGroups.set(new Set([""]))}collapseAllProjectGroups(){this.expandedProjectGroups.set(new Set)}getProjectHeaderBackground(n){if(!n)return"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)";let t=n.replace("#",""),e=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16),d=`rgba(${e}, ${r}, ${i}, 0.15)`,x=`rgba(${e}, ${r}, ${i}, 0.25)`;return`linear-gradient(135deg, ${d} 0%, ${x} 100%)`}getProjectBorderColor(n){if(!n)return"#c4b5fd";let t=n.replace("#",""),e=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return`rgba(${e}, ${r}, ${i}, 0.4)`}searchResults=k(()=>{let n=this.searchQuery().toLowerCase().trim(),t=this.selectedProjectId(),e=this.selectedPriority(),r=this.flattenTodos(this.todoService.todos()),i;switch(n?(console.log("=== SEARCH DEBUG ==="),console.log("Query:",n),console.log("Total flattened todos:",r.length),console.log("Todos with parentId (subtasks):",r.filter(u=>u.parentId).length),r.forEach(u=>{u.title.toLowerCase().includes(n)&&console.log("MATCH FOUND:",u.title,"parentId:",u.parentId)}),i=r.filter(u=>this.todoMatchesSearch(u,n))):i=r,t&&(i=i.filter(u=>u.projectId===t)),e&&e!=="all"&&(i=i.filter(u=>u.priority===e)),this.selectedStatus()){case"active":i=i.filter(u=>!u.completed&&!u.archived);break;case"completed":i=i.filter(u=>u.completed&&!u.archived);break;case"archived":i=i.filter(u=>u.archived);break;case"all":default:i=i.filter(u=>!u.archived);break}console.log("Search results found:",i.length),i.forEach(u=>console.log("Result:",u.title,"parentId:",u.parentId));let x=this.selectedSort();return this.sortResults(i,x,n)});groupedResults=k(()=>{let n=this.searchResults(),t=new Map;for(let e of n){let r=e.projectId||"",i=r?this.projectService.getProjectById(r):null;t.has(r)||t.set(r,{project:i,tasks:[]}),t.get(r).tasks.push(e)}return Array.from(t.values()).sort((e,r)=>{let i=e.project?.name||this.translations().noProject,d=r.project?.name||this.translations().noProject;return i.localeCompare(d)})});onSearchInput(n){let t=n.target;this.searchQuery.set(t.value)}clearSearch(){this.searchQuery.set("")}onProjectFilterChange(){}onStatusFilterChange(){}onPriorityFilterChange(){}onSortFilterChange(){}trackByTodoId(n,t){return t.id}onToggleTodo(n){return D(this,null,function*(){yield this.todoService.toggleTodo(n)})}onDeleteTodo(n){return D(this,null,function*(){let t=this.findTodoById(n);if(!t)return;(yield this.confirmationService.open(this.translations().deleteTaskConfirm,`${this.translations().deleteTaskConfirm} "${t.title}"? ${this.translations().deleteTaskSubtext}`,this.translations().deleteAction,this.translations().cancelAction,!1))==="confirm"&&this.todoService.deleteTodo(n)})}onEditTodo(n){this.editingTodo=n,this.taskEditor.open()}openTaskEditorById(n){let t=this.findTodoById(n);t&&(this.editingTodo=t,this.taskEditor.open())}onUpdateTodo(n){this.todoService.updateTodo(n.id,n.updates)}onAddSubtask(n){this.todoService.addSubtask(n.parentId,n.subtaskData)}onToggleExpanded(n){this.todoService.toggleExpanded(n)}onArchiveTodo(n){this.todoService.archiveTodo(n)}onUnarchiveTodo(n){this.todoService.unarchiveTodo(n)}onSaveTask(n){return D(this,null,function*(){if(this.editingTodo)try{yield this.todoService.updateTodo(this.editingTodo.id,n),this.taskEditor.closeAndReset(),this.closeEditor()}catch(t){if(t?.message==="OVERLAP_CANCELLED")return;console.error("Failed to save todo:",t)}})}closeEditor(){this.editingTodo=null}findTodoById(n){return this.flattenTodos(this.todoService.todos()).find(e=>e.id===n)}isSubtask(n){return!!n.parentId}getParentTask(n){if(n.parentId)return this.findTodoById(n.parentId)}flattenTodos(n){let t=[],e=r=>{for(let i of r)t.push(i),i.subtasks&&i.subtasks.length>0&&e(i.subtasks)};return e(n),t}todoMatchesSearch(n,t){let e=n.title.toLowerCase().includes(t),r=n.description?.toLowerCase().includes(t)??!1,i=n.category?.toLowerCase().includes(t)??!1,d=n.tags?.some(x=>x.toLowerCase().includes(t))??!1;return e||r||i||d}getMatchType(n,t){let e=t.toLowerCase();return n.title.toLowerCase().includes(e)?"title":n.description?.toLowerCase().includes(e)?"description":n.category?.toLowerCase().includes(e)?"category":n.tags?.some(r=>r.toLowerCase().includes(e))?"tag":"none"}getMatchingTags(n,t){if(!n.tags)return[];let e=t.toLowerCase();return n.tags.filter(r=>r.toLowerCase().includes(e))}sortResults(n,t,e){return n.sort((r,i)=>{switch(t){case"dueDate":return!r.dueDate&&!i.dueDate?0:r.dueDate?i.dueDate?new Date(r.dueDate).getTime()-new Date(i.dueDate).getTime():-1:1;case"dueDateDesc":return!r.dueDate&&!i.dueDate?0:r.dueDate?i.dueDate?new Date(i.dueDate).getTime()-new Date(r.dueDate).getTime():-1:1;case"startDate":return!r.startDateTime&&!i.startDateTime?0:r.startDateTime?i.startDateTime?new Date(r.startDateTime).getTime()-new Date(i.startDateTime).getTime():-1:1;case"startDateDesc":return!r.startDateTime&&!i.startDateTime?0:r.startDateTime?i.startDateTime?new Date(i.startDateTime).getTime()-new Date(r.startDateTime).getTime():-1:1;case"endDate":return!r.endDateTime&&!i.endDateTime?0:r.endDateTime?i.endDateTime?new Date(r.endDateTime).getTime()-new Date(i.endDateTime).getTime():-1:1;case"endDateDesc":return!r.endDateTime&&!i.endDateTime?0:r.endDateTime?i.endDateTime?new Date(i.endDateTime).getTime()-new Date(r.endDateTime).getTime():-1:1;case"priority":let d={high:3,medium:2,low:1};return d[i.priority]-d[r.priority];case"created":return new Date(r.createdAt).getTime()-new Date(i.createdAt).getTime();case"createdDesc":return new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime();case"alphabetical":return r.title.localeCompare(i.title);case"relevance":default:let x=r.title.toLowerCase()===e.toLowerCase(),u=i.title.toLowerCase()===e.toLowerCase();if(x&&!u)return-1;if(!x&&u)return 1;let E=r.tags?.some(O=>O.toLowerCase()===e.toLowerCase())??!1,V=i.tags?.some(O=>O.toLowerCase()===e.toLowerCase())??!1;return E&&!V?-1:!E&&V?1:new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime()}})}static \u0275fac=function(t){return new(t||c)};static \u0275cmp=F({type:c,selectors:[["app-search"]],viewQuery:function(t,e){if(t&1&&L(ie,5),t&2){let r;z(r=A())&&(e.taskEditor=r.first)}},decls:78,vars:39,consts:[["searchInput",""],["taskEditor",""],[1,"search-container"],[1,"search-header"],[1,"search-subtitle"],[1,"search-input-container"],[1,"search-input-wrapper"],[1,"search-icon"],["type","text",1,"search-input",3,"ngModelChange","input","placeholder","ngModel"],["class","clear-search-btn",3,"title","click",4,"ngIf"],[1,"search-filters"],[1,"status-filter"],["for","status-select"],["id","status-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","completed"],["value","archived"],[1,"project-filter"],["for","project-select"],["id","project-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"priority-filter"],["for","priority-select"],["id","priority-select",3,"ngModelChange","change","ngModel"],["value","high"],["value","medium"],["value","low"],[1,"sort-filter"],["for","sort-select"],["id","sort-select",3,"ngModelChange","change","ngModel"],["value","relevance"],["value","dueDate"],["value","dueDateDesc"],["value","startDate"],["value","startDateDesc"],["value","endDate"],["value","endDateDesc"],["value","priority"],["value","created"],["value","createdDesc"],["value","alphabetical"],[1,"search-results"],["class","results-header",4,"ngIf"],["class","results-by-project",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"save","close","todo"],[1,"clear-search-btn",3,"click","title"],[3,"value"],[1,"results-header"],[4,"ngIf"],[1,"results-by-project"],["class","project-controls",4,"ngIf"],["class","project-group",3,"border-color","box-shadow",4,"ngFor","ngForOf"],[1,"project-controls"],["title","Expand all project groups",1,"expand-all-btn",3,"click"],["title","Collapse all project groups",1,"collapse-all-btn",3,"click"],[1,"project-group"],[1,"project-group-header",3,"click"],[1,"expand-toggle"],[1,"project-icon"],[1,"task-count"],["class","project-tasks",3,"expanded",4,"ngIf"],[1,"project-tasks"],["class","search-result-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"search-result-wrapper"],["class","parent-context",4,"ngIf"],["class","match-context",4,"ngIf"],[1,"search-result-item",3,"edit","editSubtask","toggle","delete","update","addSubtaskEvent","toggleExpanded","archive","unarchive","todo","isSubtask"],[1,"parent-context"],[1,"parent-indicator"],[1,"parent-title"],[1,"match-context"],[1,"match-indicator"],["class","matching-tag",4,"ngFor","ngForOf"],[1,"matching-tag"],[1,"empty-state"],[1,"empty-icon"]],template:function(t,e){if(t&1){let r=w();a(0,"div",2)(1,"header",3)(2,"h1"),l(3),s(),a(4,"p",4),l(5),s()(),a(6,"div",5)(7,"div",6)(8,"span",7),l(9,"\u{1F50D}"),s(),a(10,"input",8,0),M("ngModelChange",function(d){return m(r),y(e.searchQuery,d)||(e.searchQuery=d),g(d)}),f("input",function(d){return m(r),g(e.onSearchInput(d))}),s(),C(12,oe,2,1,"button",9),s()(),a(13,"div",10)(14,"div",11)(15,"label",12),l(16),s(),a(17,"select",13),M("ngModelChange",function(d){return m(r),y(e.selectedStatus,d)||(e.selectedStatus=d),g(d)}),f("change",function(){return m(r),g(e.onStatusFilterChange())}),a(18,"option",14),l(19),s(),a(20,"option",15),l(21),s(),a(22,"option",16),l(23),s(),a(24,"option",17),l(25),s()()(),a(26,"div",18)(27,"label",19),l(28),s(),a(29,"select",20),M("ngModelChange",function(d){return m(r),y(e.selectedProjectId,d)||(e.selectedProjectId=d),g(d)}),f("change",function(){return m(r),g(e.onProjectFilterChange())}),a(30,"option",21),l(31),s(),C(32,ae,2,3,"option",22),s()(),a(33,"div",23)(34,"label",24),l(35),s(),a(36,"select",25),M("ngModelChange",function(d){return m(r),y(e.selectedPriority,d)||(e.selectedPriority=d),g(d)}),f("change",function(){return m(r),g(e.onPriorityFilterChange())}),a(37,"option",14),l(38),s(),a(39,"option",26),l(40),s(),a(41,"option",27),l(42),s(),a(43,"option",28),l(44),s()()(),a(45,"div",29)(46,"label",30),l(47),s(),a(48,"select",31),M("ngModelChange",function(d){return m(r),y(e.selectedSort,d)||(e.selectedSort=d),g(d)}),f("change",function(){return m(r),g(e.onSortFilterChange())}),a(49,"option",32),l(50),s(),a(51,"option",33),l(52),s(),a(53,"option",34),l(54),s(),a(55,"option",35),l(56),s(),a(57,"option",36),l(58),s(),a(59,"option",37),l(60),s(),a(61,"option",38),l(62),s(),a(63,"option",39),l(64),s(),a(65,"option",40),l(66),s(),a(67,"option",41),l(68),s(),a(69,"option",42),l(70),s()()()(),a(71,"div",43),C(72,ce,5,4,"div",44)(73,fe,3,2,"div",45)(74,Ce,7,2,"div",46)(75,xe,7,2,"div",46),s()(),a(76,"app-task-editor",47,1),f("save",function(d){return m(r),g(e.onSaveTask(d))})("close",function(){return m(r),g(e.closeEditor())}),s()}t&2&&(o(3),_(e.translations().searchTasks),o(2),_(e.translations().searchSubtitle),o(5),h("placeholder",e.translations().searchPlaceholder),T("ngModel",e.searchQuery),o(2),h("ngIf",e.searchQuery),o(4),v("",e.translations().status,":"),o(),T("ngModel",e.selectedStatus),o(2),_(e.translations().allTasks),o(2),_(e.translations().active),o(2),_(e.translations().completed),o(2),_(e.translations().archived),o(3),v("",e.translations().project,":"),o(),T("ngModel",e.selectedProjectId),o(2),_(e.translations().allProjects),o(),h("ngForOf",e.projectService.activeProjects()),o(3),v("",e.translations().priority,":"),o(),T("ngModel",e.selectedPriority),o(2),_(e.translations().allPriorities),o(2),v("\u{1F534} ",e.translations().priorityHigh),o(2),v("\u{1F7E1} ",e.translations().priorityMedium),o(2),v("\u{1F7E2} ",e.translations().priorityLow),o(3),v("",e.translations().sortBy,":"),o(),T("ngModel",e.selectedSort),o(2),_(e.translations().relevance),o(2),_(e.translations().dueDate),o(2),_(e.translations().dueDateLatestFirst),o(2),_(e.translations().startDate),o(2),_(e.translations().startDateLatestFirst),o(2),_(e.translations().endDate),o(2),_(e.translations().endDateLatestFirst),o(2),_(e.translations().priority),o(2),_(e.translations().created),o(2),_(e.translations().createdDesc),o(2),_(e.translations().alphabetical),o(2),h("ngIf",e.searchQuery()||e.searchResults().length>0),o(),h("ngIf",e.searchResults().length>0),o(),h("ngIf",!e.searchQuery()&&e.searchResults().length===0),o(),h("ngIf",e.searchQuery()&&e.searchResults().length===0),o(),h("todo",e.editingTodo))},dependencies:[Q,R,B,J,U,q,W,H,$,Y,N,ne,te],styles:[".search-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.search-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.search-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--text-primary);margin-bottom:.5rem}.search-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:0}.search-input-container[_ngcontent-%COMP%]{margin-bottom:2rem}.search-input-wrapper[_ngcontent-%COMP%]{position:relative;max-width:600px;margin:0 auto}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);font-size:1.2rem;color:var(--text-secondary);pointer-events:none}.search-input[_ngcontent-%COMP%]{width:100%;padding:1rem 1rem 1rem 3rem;font-size:1.1rem;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-secondary);color:var(--text-primary);transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-color-alpha)}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;font-size:1.2rem;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:4px;transition:all .2s ease}.clear-search-btn[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);color:var(--text-primary)}.search-filters[_ngcontent-%COMP%]{display:flex;gap:2rem;align-items:center;justify-content:center;margin-bottom:2rem;flex-wrap:wrap}.status-filter[_ngcontent-%COMP%], .project-filter[_ngcontent-%COMP%], .priority-filter[_ngcontent-%COMP%], .sort-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .project-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .priority-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .sort-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.status-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .project-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .priority-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .sort-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-secondary);color:var(--text-primary);font-size:.9rem;min-width:150px}.search-results[_ngcontent-%COMP%]{margin-top:2rem;overflow:visible}.results-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.results-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0}.results-by-project[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;overflow:visible}.project-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-bottom:1.5rem}.expand-all-btn[_ngcontent-%COMP%], .collapse-all-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-secondary);color:var(--text-primary);font-size:.9rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.expand-all-btn[_ngcontent-%COMP%]:hover, .collapse-all-btn[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--primary-color)}.project-group[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:visible;position:relative;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a;z-index:auto}.project-group-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:0;padding:1.5rem;border-bottom:1px solid #e5e7eb;cursor:pointer;border-radius:12px 12px 0 0;transition:all .2s ease;-webkit-user-select:none;user-select:none;position:sticky;top:0;z-index:5;background:#f9fafb}.project-group[_ngcontent-%COMP%]:has(.actions-dropdown) ~ .project-group[_ngcontent-%COMP%]   .project-group-header[_ngcontent-%COMP%]{position:relative!important;z-index:1!important}.project-group[_ngcontent-%COMP%]:has(.actions-dropdown) + .project-group[_ngcontent-%COMP%]   .project-group-header[_ngcontent-%COMP%]{position:relative!important;z-index:1!important}.project-group-header[_ngcontent-%COMP%]:hover{filter:brightness(.98)}.project-group-header.expanded[_ngcontent-%COMP%]{margin-bottom:0}.expand-toggle[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .2s ease;margin-right:.25rem}.project-icon[_ngcontent-%COMP%]{font-size:1.5rem}.project-group-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0;flex:1;display:flex;align-items:center;gap:.5rem}.task-count[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;font-weight:500;background:#ffffffb3;padding:.25rem .75rem;border-radius:20px;border:1px solid rgba(0,0,0,.1)}.project-tasks[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1.5rem;opacity:1;transform:translateY(0);transition:opacity .3s ease,transform .3s ease;overflow:visible;position:relative;z-index:1}.project-tasks.expanded[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.search-result-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:8px;border:1px solid #e5e7eb;overflow:visible}.parent-context[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:1px solid #e2e8f0;padding:.5rem .75rem;font-size:.85rem;color:#6b7280}.parent-indicator[_ngcontent-%COMP%]{font-weight:500;margin-right:.5rem}.parent-title[_ngcontent-%COMP%]{color:#374151;font-weight:500}.search-result-item[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:0;position:relative;z-index:10}.search-result-item[_ngcontent-%COMP%]     .actions-dropdown-container{position:static!important}.search-result-item[_ngcontent-%COMP%]     .actions-dropdown, .search-result-item[_ngcontent-%COMP%]     .dropdown-menu, .search-result-item[_ngcontent-%COMP%]     .dropdown-content, .search-result-item[_ngcontent-%COMP%]     .menu-items{position:absolute!important;z-index:999999!important;pointer-events:auto!important}.search-result-item[_ngcontent-%COMP%]:has(.actions-dropdown){position:relative!important;z-index:999998!important}.search-result-wrapper[_ngcontent-%COMP%]:has(.actions-dropdown){position:relative!important;z-index:999997!important}.project-group[_ngcontent-%COMP%]:has(.actions-dropdown){z-index:999996!important}.project-group[_ngcontent-%COMP%]{position:relative;z-index:0}.project-group-header[_ngcontent-%COMP%]{z-index:3}.project-tasks[_ngcontent-%COMP%]{position:relative;z-index:2}.search-result-item[_ngcontent-%COMP%]     .task-content{overflow:visible!important}.search-result-item[_ngcontent-%COMP%]     .task-row{overflow:visible!important}.search-result-item[_ngcontent-%COMP%]     .task-item{overflow:visible!important}.project-group[_ngcontent-%COMP%]:has(.search-result-item){overflow:visible!important}.project-tasks[_ngcontent-%COMP%]:has(.search-result-item){overflow:visible!important}.search-result-wrapper[_ngcontent-%COMP%]:has(.actions-dropdown){overflow:visible!important;z-index:100}.project-group[_ngcontent-%COMP%]:has(.actions-dropdown)   .project-group-header[_ngcontent-%COMP%]{pointer-events:none!important}.project-group[_ngcontent-%COMP%]:has(.actions-dropdown)   .project-group-header[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none!important}.search-result-item[_ngcontent-%COMP%]     .actions-dropdown *{pointer-events:auto!important}.search-result-wrapper[_ngcontent-%COMP%]:not(:has(.parent-context))   .search-result-item[_ngcontent-%COMP%]{border-radius:8px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;max-width:400px;margin:0 auto}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{padding:1rem}.search-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.search-filters[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.project-filter[_ngcontent-%COMP%]{width:100%;justify-content:center}.project-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:250px}.project-group[_ngcontent-%COMP%]{padding:1rem}.project-group-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.task-count[_ngcontent-%COMP%]{order:3;flex-basis:100%;text-align:center;margin-top:.5rem}}.match-context[_ngcontent-%COMP%]{background:#f0fdf4;border-bottom:1px solid #bbf7d0;padding:.5rem .75rem;font-size:.85rem;color:#059669}.match-indicator[_ngcontent-%COMP%]{font-weight:500;margin-right:.5rem}.matching-tag[_ngcontent-%COMP%]{color:#047857;font-weight:600;background:#10b98133;padding:2px 6px;border-radius:12px;font-size:.8rem;margin-right:4px}"]})};export{re as SearchComponent};
