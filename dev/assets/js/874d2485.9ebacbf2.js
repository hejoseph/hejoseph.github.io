"use strict";(self.webpackChunkmydevdocs=self.webpackChunkmydevdocs||[]).push([[1967],{2350:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Portfolio/YT-DL-Batch/data-formats/communication-protocol","title":"Data Formats & Communication Protocol","description":"Overview","source":"@site/docs/Portfolio/YT-DL-Batch/data-formats/communication-protocol.md","sourceDirName":"Portfolio/YT-DL-Batch/data-formats","slug":"/Portfolio/YT-DL-Batch/data-formats/communication-protocol","permalink":"/dev/docs/Portfolio/YT-DL-Batch/data-formats/communication-protocol","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Chrome Extension Architecture","permalink":"/dev/docs/Portfolio/YT-DL-Batch/chrome-extension/architecture"},"next":{"title":"Java Application Architecture","permalink":"/dev/docs/Portfolio/YT-DL-Batch/java-application/architecture"}}');var t=i(4848),a=i(8453);const l={},s="Data Formats & Communication Protocol",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Core Data Format",id:"core-data-format",level:2},{value:"Basic Structure",id:"basic-structure",level:3},{value:"Parameter Syntax",id:"parameter-syntax",level:3},{value:"Data Flow Examples",id:"data-flow-examples",level:2},{value:"Example 1: Simple Categorization",id:"example-1-simple-categorization",level:3},{value:"Example 2: Mixed Quality Settings",id:"example-2-mixed-quality-settings",level:3},{value:"Example 3: Inline Parameters",id:"example-3-inline-parameters",level:3},{value:"Chrome Extension Data Generation",id:"chrome-extension-data-generation",level:2},{value:"Internal Storage Format",id:"internal-storage-format",level:3},{value:"Export Transformation",id:"export-transformation",level:3},{value:"Java Application Data Processing",id:"java-application-data-processing",level:2},{value:"URL Parsing Logic",id:"url-parsing-logic",level:3},{value:"Parameter Processing",id:"parameter-processing",level:3},{value:"File Processing Workflow",id:"file-processing-workflow",level:3},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Parameter Inheritance",id:"parameter-inheritance",level:3},{value:"URL Normalization",id:"url-normalization",level:3},{value:"Quality Fallback Logic",id:"quality-fallback-logic",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Malformed Data Recovery",id:"malformed-data-recovery",level:3},{value:"Data Validation",id:"data-validation",level:3},{value:"File Format Specifications",id:"file-format-specifications",level:2},{value:"List File Format (<code>.txt</code>)",id:"list-file-format-txt",level:3},{value:"Configuration Integration",id:"configuration-integration",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"data-formats--communication-protocol",children:"Data Formats & Communication Protocol"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The YouTube download toolkit uses a simple yet powerful text-based communication protocol to transfer video collection data from the Chrome extension to the Java application. This protocol is designed to be human-readable, easily parseable, and flexible enough to handle various categorization and quality preferences."}),"\n",(0,t.jsx)(n.h2,{id:"core-data-format",children:"Core Data Format"}),"\n",(0,t.jsx)(n.h3,{id:"basic-structure",children:"Basic Structure"}),"\n",(0,t.jsx)(n.p,{children:"The communication format consists of two types of lines:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parameter Lines"}),": Define settings that apply to subsequent video URLs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"URL Lines"}),": YouTube video links to be downloaded"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=category_name;q=quality_setting\r\nhttps://www.youtube.com/watch?v=VIDEO_ID\r\nhttps://www.youtube.com/watch?v=ANOTHER_VIDEO_ID\n"})}),"\n",(0,t.jsx)(n.h3,{id:"parameter-syntax",children:"Parameter Syntax"}),"\n",(0,t.jsx)(n.p,{children:"Parameters use a key-value format separated by semicolons:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=folder_name;q=quality_level\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameter Keys:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"f"})," = ",(0,t.jsx)(n.strong,{children:"Folder/Category"}),": Specifies the destination folder name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"q"})," = ",(0,t.jsx)(n.strong,{children:"Quality"}),": Defines the video quality preference"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Quality Values:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"360"})," = 360p resolution"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"480"})," = 480p resolution"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"720"})," = 720p resolution (HD)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"1080"})," = 1080p resolution (Full HD)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"best"})," = Highest available quality (fastest download)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"data-flow-examples",children:"Data Flow Examples"}),"\n",(0,t.jsx)(n.h3,{id:"example-1-simple-categorization",children:"Example 1: Simple Categorization"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=music;q=720\r\nhttps://www.youtube.com/watch?v=dQw4w9WgXcQ\r\nhttps://www.youtube.com/watch?v=oHg5SJYRHA0\r\nf=tutorials;q=1080\r\nhttps://www.youtube.com/watch?v=kJQP7kiw5Fk\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Result:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Two music videos downloaded in 720p quality to ",(0,t.jsx)(n.code,{children:"/music/"})," folder"]}),"\n",(0,t.jsxs)(n.li,{children:["One tutorial video downloaded in 1080p quality to ",(0,t.jsx)(n.code,{children:"/tutorials/"})," folder"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-2-mixed-quality-settings",children:"Example 2: Mixed Quality Settings"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=entertainment;q=480\r\nhttps://www.youtube.com/watch?v=VIDEO1\r\nhttps://www.youtube.com/watch?v=VIDEO2\r\nf=education;q=best\r\nhttps://www.youtube.com/watch?v=VIDEO3\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Result:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Entertainment videos in 480p (smaller file sizes)"}),"\n",(0,t.jsx)(n.li,{children:"Educational content in best available quality"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-3-inline-parameters",children:"Example 3: Inline Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Individual videos can override global settings using inline parameters:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=default;q=720\r\nhttps://www.youtube.com/watch?v=VIDEO1\r\nhttps://www.youtube.com/watch?v=VIDEO2;f=special;q=1080\r\nhttps://www.youtube.com/watch?v=VIDEO3\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Result:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["VIDEO1 and VIDEO3: 720p in ",(0,t.jsx)(n.code,{children:"/default/"})," folder"]}),"\n",(0,t.jsxs)(n.li,{children:["VIDEO2: 1080p in ",(0,t.jsx)(n.code,{children:"/special/"})," folder (overrides global settings)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"chrome-extension-data-generation",children:"Chrome Extension Data Generation"}),"\n",(0,t.jsx)(n.h3,{id:"internal-storage-format",children:"Internal Storage Format"}),"\n",(0,t.jsx)(n.p,{children:"The Chrome extension stores collected data in a structured JavaScript object:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'{\r\n  "music": [\r\n    "https://www.youtube.com/watch?v=dQw4w9WgXcQ",\r\n    "https://www.youtube.com/watch?v=oHg5SJYRHA0"\r\n  ],\r\n  "tutorials": [\r\n    "https://www.youtube.com/watch?v=kJQP7kiw5Fk"\r\n  ]\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"export-transformation",children:"Export Transformation"}),"\n",(0,t.jsx)(n.p,{children:"The popup interface converts the internal format to the communication protocol:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const newText = Object.entries(listObj)\r\n  .sort(([keyA], [keyB]) => keyA.localeCompare(keyB))\r\n  .map(([key, value]) => `${key}\\n${value.filter(Boolean).join('\\n')}`)\r\n  .join('\\n');\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Transformation Process:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Alphabetical Sorting"}),": Categories are sorted for consistent output"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Header Generation"}),": Each category becomes a parameter line"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"URL Listing"}),": Videos are listed under their respective categories"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Deduplication"}),": Empty or duplicate entries are filtered out"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"java-application-data-processing",children:"Java Application Data Processing"}),"\n",(0,t.jsx)(n.h3,{id:"url-parsing-logic",children:"URL Parsing Logic"}),"\n",(0,t.jsxs)(n.p,{children:["The Java application uses the ",(0,t.jsx)(n.code,{children:"Video.fromURL()"})," method to extract parameters:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public static Video fromURL(String url) {\r\n    String[] arr = url.split("\\\\?");\r\n    Map<String, String> params = getParams(arr[1]);\r\n    String folder = params.get("f");\r\n    String quality = params.get("q");\r\n    String id = params.get("v");\r\n    return new Video(id, folder, quality);\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parameter-processing",children:"Parameter Processing"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"getParams()"})," method handles both semicolon and ampersand separators:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public static Map<String, String> getParams(String p) {\r\n    Map<String, String> params = new HashMap<>();\r\n    String[] pairs = p.split(";|&");  // Supports both ; and & separators\r\n    for (String pair : pairs) {\r\n        String[] keyValue = pair.split("=");\r\n        if (keyValue.length == 2) {\r\n            params.put(keyValue[0], keyValue[1]);\r\n        }\r\n    }\r\n    return params;\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"file-processing-workflow",children:"File Processing Workflow"}),"\n",(0,t.jsx)(n.p,{children:"The application processes input files line by line:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'for(String link : links){\r\n    if(link.startsWith("f=")){\r\n        presetParams(link);  // Set global parameters\r\n    } else if(link.startsWith("https://www.youtube.com/watch?v")){\r\n        checkAndDownloadVideoMP4(link, resolution, false);  // Download video\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,t.jsx)(n.h3,{id:"parameter-inheritance",children:"Parameter Inheritance"}),"\n",(0,t.jsx)(n.p,{children:"Parameters set by header lines apply to all subsequent URLs until a new header is encountered:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=music;q=360          # Global setting\r\nhttps://www.youtube.com/watch?v=VIDEO1    # Uses music/360p\r\nhttps://www.youtube.com/watch?v=VIDEO2    # Uses music/360p\r\nf=podcasts;q=best      # New global setting\r\nhttps://www.youtube.com/watch?v=VIDEO3    # Uses podcasts/best\n"})}),"\n",(0,t.jsx)(n.h3,{id:"url-normalization",children:"URL Normalization"}),"\n",(0,t.jsx)(n.p,{children:"The system handles various YouTube URL formats:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Input Formats:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"https://www.youtube.com/watch?v=VIDEO_ID&list=PLAYLIST"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"https://www.youtube.com/watch?v=VIDEO_ID&t=120s"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"https://youtu.be/VIDEO_ID"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Normalized Output:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"https://www.youtube.com/watch?v=VIDEO_ID"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"quality-fallback-logic",children:"Quality Fallback Logic"}),"\n",(0,t.jsx)(n.p,{children:"When a specific quality isn't available, the Java application implements intelligent fallback:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Exact Match"}),": Try to find the requested resolution"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Best Available"}),": Select highest quality if exact match unavailable"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Format Combination"}),": Combine best video + best audio streams"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simple Fallback"}),': Use youtube-dl\'s "best" format as last resort']}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.h3,{id:"malformed-data-recovery",children:"Malformed Data Recovery"}),"\n",(0,t.jsx)(n.p,{children:"The system gracefully handles various error conditions:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Invalid Parameter Lines:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"invalid_parameter_line\r\nf=music;q=720  # Valid line processed normally\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Missing Parameters:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"f=music        # Missing quality - uses default\r\n;q=720         # Missing folder - uses default\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Invalid URLs:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"not_a_youtube_url\r\nhttps://www.youtube.com/watch?v=INVALID_ID\n"})}),"\n",(0,t.jsx)(n.h3,{id:"data-validation",children:"Data Validation"}),"\n",(0,t.jsx)(n.p,{children:"Both components implement validation:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Chrome Extension:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Filters empty lines and invalid entries"}),"\n",(0,t.jsx)(n.li,{children:"Validates YouTube URL format before storage"}),"\n",(0,t.jsx)(n.li,{children:"Deduplicates video IDs automatically"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Java Application:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Skips malformed lines with error messages"}),"\n",(0,t.jsx)(n.li,{children:"Validates video ID format (11 characters)"}),"\n",(0,t.jsx)(n.li,{children:"Provides fallback for missing parameters"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"file-format-specifications",children:"File Format Specifications"}),"\n",(0,t.jsxs)(n.h3,{id:"list-file-format-txt",children:["List File Format (",(0,t.jsx)(n.code,{children:".txt"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"MIME Type:"})," ",(0,t.jsx)(n.code,{children:"text/plain"}),"\r\n",(0,t.jsx)(n.strong,{children:"Encoding:"})," UTF-8\r\n",(0,t.jsx)(n.strong,{children:"Line Endings:"})," Platform-specific (",(0,t.jsx)(n.code,{children:"\\n"})," or ",(0,t.jsx)(n.code,{children:"\\r\\n"}),")"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Structure:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[parameter_line]\r\n[url_line]*\r\n[parameter_line]\r\n[url_line]*\r\n...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"configuration-integration",children:"Configuration Integration"}),"\n",(0,t.jsx)(n.p,{children:"The protocol integrates with the Java application's configuration system:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Global Defaults:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"destinationFolderName"}),": Base directory for all downloads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"downloadedFileName"}),": Template for file naming"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"defaultListFile"}),": Default input file path"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Runtime Overrides:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Parameter lines override global folder settings"}),"\n",(0,t.jsx)(n.li,{children:"Inline URL parameters override both global and header settings"}),"\n",(0,t.jsx)(n.li,{children:"Command-line resolution input overrides file-specified quality"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This communication protocol provides a robust, flexible, and user-friendly way to transfer complex video collection data between the Chrome extension and Java application while maintaining simplicity and human readability."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>s});var r=i(6540);const t={},a=r.createContext(t);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);