"use strict";(self.webpackChunkmydevdocs=self.webpackChunkmydevdocs||[]).push([[6929],{58:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Portfolio/Timelock/bug/tooltip_flickering_bug_analysis","title":"Tooltip Flickering Bug Analysis","description":"Overview","source":"@site/docs/Portfolio/Timelock/bug/tooltip_flickering_bug_analysis.md","sourceDirName":"Portfolio/Timelock/bug","slug":"/Portfolio/Timelock/bug/tooltip_flickering_bug_analysis","permalink":"/dev/docs/Portfolio/Timelock/bug/tooltip_flickering_bug_analysis","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Subtask Editing in Focus Page: Problem and Solution","permalink":"/dev/docs/Portfolio/Timelock/bug/subtask-edit-bug"},"next":{"title":"Translation Performance Case Study","permalink":"/dev/docs/Portfolio/Timelock/bug/translation_performance_problem"}}');var o=i(4848),l=i(8453);const t={},r="Tooltip Flickering Bug Analysis",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Bug Description",id:"bug-description",level:2},{value:"Symptoms",id:"symptoms",level:3},{value:"Environment",id:"environment",level:3},{value:"Root Cause Analysis",id:"root-cause-analysis",level:2},{value:"Initial Misconceptions",id:"initial-misconceptions",level:3},{value:"Actual Root Cause: CSS Hover Effect Feedback Loop",id:"actual-root-cause-css-hover-effect-feedback-loop",level:3},{value:"The Problematic CSS",id:"the-problematic-css",level:4},{value:"The Feedback Loop Mechanism",id:"the-feedback-loop-mechanism",level:4},{value:"Why Planned Tasks Didn&#39;t Flicker",id:"why-planned-tasks-didnt-flicker",level:3},{value:"Technical Deep Dive",id:"technical-deep-dive",level:2},{value:"Mouse Event Timing",id:"mouse-event-timing",level:3},{value:"Code Flow Analysis",id:"code-flow-analysis",level:3},{value:"Solution Implementation",id:"solution-implementation",level:2},{value:"Strategy: Debounced Tooltip Hiding",id:"strategy-debounced-tooltip-hiding",level:3},{value:"Code Changes",id:"code-changes",level:3},{value:"1. Added Hide Timeout Tracking",id:"1-added-hide-timeout-tracking",level:4},{value:"2. Enhanced showTooltip Method",id:"2-enhanced-showtooltip-method",level:4},{value:"3. Implemented Debounced Hiding",id:"3-implemented-debounced-hiding",level:4},{value:"4. Updated Cleanup",id:"4-updated-cleanup",level:4},{value:"Why This Solution Works",id:"why-this-solution-works",level:2},{value:"1. <strong>Immediate Show, Delayed Hide</strong>",id:"1-immediate-show-delayed-hide",level:3},{value:"2. <strong>Smart Cancellation</strong>",id:"2-smart-cancellation",level:3},{value:"3. <strong>Non-Breaking</strong>",id:"3-non-breaking",level:3},{value:"4. <strong>Robust Edge Case Handling</strong>",id:"4-robust-edge-case-handling",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Memory Impact",id:"memory-impact",level:3},{value:"CPU Impact",id:"cpu-impact",level:3},{value:"User Experience Impact",id:"user-experience-impact",level:3},{value:"Alternative Solutions Considered",id:"alternative-solutions-considered",level:2},{value:"1. \u274c Remove CSS Hover Effects",id:"1--remove-css-hover-effects",level:3},{value:"2. \u274c Increase CSS Transition Delays",id:"2--increase-css-transition-delays",level:3},{value:"3. \u274c Use Pointer Events Instead of Mouse Events",id:"3--use-pointer-events-instead-of-mouse-events",level:3},{value:"4. \u274c Implement Mouse Position Tracking",id:"4--implement-mouse-position-tracking",level:3},{value:"5. \u2705 Debounced Hiding (Chosen Solution)",id:"5--debounced-hiding-chosen-solution",level:3},{value:"Testing Strategy",id:"testing-strategy",level:2},{value:"Test Cases Covered",id:"test-cases-covered",level:3},{value:"Browser Testing",id:"browser-testing",level:3},{value:"Lessons Learned",id:"lessons-learned",level:2},{value:"1. <strong>CSS and JavaScript Interaction</strong>",id:"1-css-and-javascript-interaction",level:3},{value:"2. <strong>Event Timing is Critical</strong>",id:"2-event-timing-is-critical",level:3},{value:"3. <strong>Debugging Interactive Issues</strong>",id:"3-debugging-interactive-issues",level:3},{value:"4. <strong>Debouncing is Powerful</strong>",id:"4-debouncing-is-powerful",level:3},{value:"5. <strong>Defensive Programming</strong>",id:"5-defensive-programming",level:3},{value:"Future Considerations",id:"future-considerations",level:2},{value:"Potential Improvements",id:"potential-improvements",level:3},{value:"Monitoring",id:"monitoring",level:3},{value:"Conclusion",id:"conclusion",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"tooltip-flickering-bug-analysis",children:"Tooltip Flickering Bug Analysis"})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"This document provides a detailed analysis of a tooltip flickering issue that occurred specifically on working session blocks in the timetable component's day view. The bug caused tooltips to rapidly show and hide when hovering over working session blocks, making them difficult to read, while planned task tooltips worked perfectly."}),"\n",(0,o.jsx)(n.h2,{id:"bug-description",children:"Bug Description"}),"\n",(0,o.jsx)(n.h3,{id:"symptoms",children:"Symptoms"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Affected Elements"}),": Working session blocks in the right column of the dual timetable view"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Behavior"}),": Tooltip would rapidly flicker (show/hide) when hovering over working session blocks"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"User Impact"}),": Tooltips were nearly impossible to read due to constant flickering"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Scope"}),": Only affected working session blocks; planned task blocks (left column) worked normally"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"environment",children:"Environment"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Component"}),": ",(0,o.jsx)(n.code,{children:"TimetableComponent"})," (",(0,o.jsx)(n.code,{children:"src/app/pages/timetable/timetable.component.ts"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"View Mode"}),': Day view with "both" mode (showing both planned tasks and working sessions)']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Browser"}),": All modern browsers"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Framework"}),": Angular with signals"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"root-cause-analysis",children:"Root Cause Analysis"}),"\n",(0,o.jsx)(n.h3,{id:"initial-misconceptions",children:"Initial Misconceptions"}),"\n",(0,o.jsx)(n.p,{children:"Initially, we suspected the issue was related to:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u274c Tooltip positioning logic"}),"\n",(0,o.jsx)(n.li,{children:"\u274c Mouse event handling differences"}),"\n",(0,o.jsx)(n.li,{children:"\u274c Z-index conflicts"}),"\n",(0,o.jsx)(n.li,{children:"\u274c Pointer events interference"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"actual-root-cause-css-hover-effect-feedback-loop",children:"Actual Root Cause: CSS Hover Effect Feedback Loop"}),"\n",(0,o.jsxs)(n.p,{children:["The real culprit was a ",(0,o.jsx)(n.strong,{children:"feedback loop created by CSS hover effects"})," combined with precise mouse event detection."]}),"\n",(0,o.jsx)(n.h4,{id:"the-problematic-css",children:"The Problematic CSS"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Working Session Block Styles:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:".working-session-block {\r\n  opacity: 0.9;\r\n  /* ... other styles */\r\n}\r\n\r\n.working-session-block:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.task-block:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Planned Task Blocks:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:".task-block:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n/* No additional opacity changes */\n"})}),"\n",(0,o.jsx)(n.h4,{id:"the-feedback-loop-mechanism",children:"The Feedback Loop Mechanism"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Initial State"}),": Working session block has ",(0,o.jsx)(n.code,{children:"opacity: 0.9"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Mouse Enter"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Mouse cursor enters the working session block"}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"mouseenter"})," event fires \u2192 ",(0,o.jsx)(n.code,{children:"showTooltip()"})," called"]}),"\n",(0,o.jsxs)(n.li,{children:["CSS ",(0,o.jsx)(n.code,{children:":hover"})," activates \u2192 ",(0,o.jsx)(n.code,{children:"opacity: 1"})," + ",(0,o.jsx)(n.code,{children:"transform: translateY(-1px)"})]}),"\n",(0,o.jsx)(n.li,{children:"Block visually shifts up by 1px and becomes more opaque"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Critical Issue"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"transform: translateY(-1px)"})," physically moves the element"]}),"\n",(0,o.jsx)(n.li,{children:'The mouse cursor, which was at the bottom edge of the element, is now technically "outside" the transformed element bounds'}),"\n",(0,o.jsx)(n.li,{children:'Browser detects this as the mouse "leaving" the element'}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Mouse Leave"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"mouseleave"})," event fires \u2192 ",(0,o.jsx)(n.code,{children:"hideTooltip()"})," called"]}),"\n",(0,o.jsxs)(n.li,{children:["CSS ",(0,o.jsx)(n.code,{children:":hover"})," deactivates \u2192 element returns to original position"]}),"\n",(0,o.jsx)(n.li,{children:"Block moves back down 1px and opacity returns to 0.9"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Mouse Re-enter"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'Mouse cursor is now "over" the element again (since it moved back to original position)'}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"mouseenter"})," fires again \u2192 cycle repeats"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Result"}),": Rapid fire mouse enter/leave events creating the flickering effect"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"why-planned-tasks-didnt-flicker",children:"Why Planned Tasks Didn't Flicker"}),"\n",(0,o.jsxs)(n.p,{children:["Planned task blocks only had the ",(0,o.jsx)(n.code,{children:"transform: translateY(-1px)"})," hover effect without the opacity change. While they also moved slightly, the single transform was less likely to create the precise conditions needed for the feedback loop, and the visual change was more subtle."]}),"\n",(0,o.jsx)(n.h2,{id:"technical-deep-dive",children:"Technical Deep Dive"}),"\n",(0,o.jsx)(n.h3,{id:"mouse-event-timing",children:"Mouse Event Timing"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'Time: 0ms    - mouseenter \u2192 showTooltip() \u2192 opacity: 0.9\u21921, translateY(0\u2192-1px)\r\nTime: 1ms    - element moves, mouse is now "outside" bounds\r\nTime: 2ms    - mouseleave \u2192 hideTooltip() \u2192 opacity: 1\u21920.9, translateY(-1px\u21920)\r\nTime: 3ms    - element moves back, mouse is now "inside" bounds again\r\nTime: 4ms    - mouseenter \u2192 showTooltip() \u2192 ...\n'})}),"\n",(0,o.jsx)(n.h3,{id:"code-flow-analysis",children:"Code Flow Analysis"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Tooltip Event Handlers (Same for Both Types):"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'(mouseenter)="!isDragging() && showTooltip($event, block)"\r\n(mousemove)="!isDragging() && moveTooltip($event)"\r\n(mouseleave)="hideTooltip()"\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Original showTooltip Method:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"showTooltip(evt: MouseEvent, block: TimetableBlock) {\r\n  this.tooltipBlock.set(block);\r\n  this.tooltipVisible.set(true);\r\n  this.positionTooltip(evt);\r\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Original hideTooltip Method:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"hideTooltip() {\r\n  this.tooltipVisible.set(false);\r\n  this.tooltipBlock.set(null);\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The issue was that ",(0,o.jsx)(n.code,{children:"hideTooltip()"})," executed ",(0,o.jsx)(n.strong,{children:"immediately"})," when ",(0,o.jsx)(n.code,{children:"mouseleave"})," fired, with no delay to account for rapid re-entry."]}),"\n",(0,o.jsx)(n.h2,{id:"solution-implementation",children:"Solution Implementation"}),"\n",(0,o.jsx)(n.h3,{id:"strategy-debounced-tooltip-hiding",children:"Strategy: Debounced Tooltip Hiding"}),"\n",(0,o.jsxs)(n.p,{children:["The solution implements a ",(0,o.jsx)(n.strong,{children:"debounced hiding mechanism"})," that:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Immediately shows tooltips when ",(0,o.jsx)(n.code,{children:"mouseenter"})," occurs"]}),"\n",(0,o.jsx)(n.li,{children:"Cancels any pending hide operations when re-entering"}),"\n",(0,o.jsx)(n.li,{children:"Delays hiding by 100ms to prevent rapid show/hide cycles"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"code-changes",children:"Code Changes"}),"\n",(0,o.jsx)(n.h4,{id:"1-added-hide-timeout-tracking",children:"1. Added Hide Timeout Tracking"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// floating tooltip state for day view\r\ntooltipVisible = signal(false);\r\ntooltipBlock = signal<TimetableBlock | null>(null);\r\ntooltipX = signal(0);\r\ntooltipY = signal(0);\r\nprivate tooltipMoveTimeout?: number;\r\nprivate tooltipHideTimeout?: number; // \u2190 NEW\n"})}),"\n",(0,o.jsx)(n.h4,{id:"2-enhanced-showtooltip-method",children:"2. Enhanced showTooltip Method"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"showTooltip(evt: MouseEvent, block: TimetableBlock) {\r\n  // Clear any pending hide timeout to prevent flicker\r\n  if (this.tooltipHideTimeout) {\r\n    clearTimeout(this.tooltipHideTimeout);\r\n    this.tooltipHideTimeout = undefined;\r\n  }\r\n  \r\n  this.tooltipBlock.set(block);\r\n  this.tooltipVisible.set(true);\r\n  this.positionTooltip(evt);\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Key Addition"}),": Canceling pending hide operations prevents the tooltip from hiding if the user quickly re-enters the element."]}),"\n",(0,o.jsx)(n.h4,{id:"3-implemented-debounced-hiding",children:"3. Implemented Debounced Hiding"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"hideTooltip() {\r\n  // Clear any pending tooltip repositioning\r\n  if (this.tooltipMoveTimeout) {\r\n    clearTimeout(this.tooltipMoveTimeout);\r\n    this.tooltipMoveTimeout = undefined;\r\n  }\r\n  \r\n  // Add a small delay to prevent flickering caused by hover effects\r\n  this.tooltipHideTimeout = window.setTimeout(() => {\r\n    this.tooltipVisible.set(false);\r\n    this.tooltipBlock.set(null);\r\n    this.tooltipHideTimeout = undefined;\r\n  }, 100); // 100ms delay to prevent rapid show/hide cycles\r\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Key Addition"}),": 100ms delay before actually hiding the tooltip, giving enough time for rapid re-entry to cancel the hide operation."]}),"\n",(0,o.jsx)(n.h4,{id:"4-updated-cleanup",children:"4. Updated Cleanup"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"ngOnDestroy() {\r\n  if (this.timeUpdateInterval) {\r\n    clearInterval(this.timeUpdateInterval);\r\n  }\r\n  \r\n  // Clean up tooltip timeouts\r\n  if (this.tooltipMoveTimeout) {\r\n    clearTimeout(this.tooltipMoveTimeout);\r\n  }\r\n  if (this.tooltipHideTimeout) { // \u2190 NEW\r\n    clearTimeout(this.tooltipHideTimeout);\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"why-this-solution-works",children:"Why This Solution Works"}),"\n",(0,o.jsxs)(n.h3,{id:"1-immediate-show-delayed-hide",children:["1. ",(0,o.jsx)(n.strong,{children:"Immediate Show, Delayed Hide"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Tooltips appear instantly when needed"}),"\n",(0,o.jsx)(n.li,{children:"Hiding is delayed just enough to break the feedback loop"}),"\n",(0,o.jsx)(n.li,{children:"100ms is imperceptible to users but sufficient to prevent rapid cycles"}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"2-smart-cancellation",children:["2. ",(0,o.jsx)(n.strong,{children:"Smart Cancellation"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"If user re-enters during the 100ms delay, the hide is cancelled"}),"\n",(0,o.jsx)(n.li,{children:"This handles legitimate quick mouse movements"}),"\n",(0,o.jsx)(n.li,{children:'Prevents "dead zones" where tooltips disappear inappropriately'}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"3-non-breaking",children:["3. ",(0,o.jsx)(n.strong,{children:"Non-Breaking"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Solution doesn't affect planned task tooltips (they continue working as before)"}),"\n",(0,o.jsx)(n.li,{children:"No changes to positioning logic or visual styling"}),"\n",(0,o.jsx)(n.li,{children:"Maintains all existing functionality"}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"4-robust-edge-case-handling",children:["4. ",(0,o.jsx)(n.strong,{children:"Robust Edge Case Handling"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Proper cleanup prevents memory leaks"}),"\n",(0,o.jsx)(n.li,{children:"Handles rapid mouse movements gracefully"}),"\n",(0,o.jsx)(n.li,{children:"Works across all browsers and devices"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,o.jsx)(n.h3,{id:"memory-impact",children:"Memory Impact"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Minimal"}),": Only adds one additional timeout reference per component instance"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Cleanup"}),": Proper cleanup in ",(0,o.jsx)(n.code,{children:"ngOnDestroy"})," prevents memory leaks"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"cpu-impact",children:"CPU Impact"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Negligible"}),": setTimeout operations are very lightweight"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Optimization"}),": Cancelling pending timeouts prevents unnecessary operations"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"user-experience-impact",children:"User Experience Impact"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Positive"}),": Eliminates jarring flickering effect"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Imperceptible"}),": 100ms delay is below human perception threshold for UI responsiveness"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Improved"}),": Tooltips are now reliably readable"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"alternative-solutions-considered",children:"Alternative Solutions Considered"}),"\n",(0,o.jsx)(n.h3,{id:"1--remove-css-hover-effects",children:"1. \u274c Remove CSS Hover Effects"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pros"}),": Would eliminate the root cause\r\n",(0,o.jsx)(n.strong,{children:"Cons"}),": Would remove valuable visual feedback for users"]}),"\n",(0,o.jsx)(n.h3,{id:"2--increase-css-transition-delays",children:"2. \u274c Increase CSS Transition Delays"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pros"}),": Might reduce the feedback loop frequency\r\n",(0,o.jsx)(n.strong,{children:"Cons"}),": Would make the UI feel sluggish and wouldn't guarantee a fix"]}),"\n",(0,o.jsx)(n.h3,{id:"3--use-pointer-events-instead-of-mouse-events",children:"3. \u274c Use Pointer Events Instead of Mouse Events"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pros"}),": Different event timing might avoid the issue\r\n",(0,o.jsx)(n.strong,{children:"Cons"}),": Browser compatibility concerns and wouldn't address the fundamental CSS issue"]}),"\n",(0,o.jsx)(n.h3,{id:"4--implement-mouse-position-tracking",children:"4. \u274c Implement Mouse Position Tracking"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pros"}),": Could detect rapid position changes\r\n",(0,o.jsx)(n.strong,{children:"Cons"}),": Complex implementation, performance overhead, still wouldn't solve CSS feedback loop"]}),"\n",(0,o.jsx)(n.h3,{id:"5--debounced-hiding-chosen-solution",children:"5. \u2705 Debounced Hiding (Chosen Solution)"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Addresses root cause without removing features"}),"\n",(0,o.jsx)(n.li,{children:"Simple, reliable implementation"}),"\n",(0,o.jsx)(n.li,{children:"Maintains all existing functionality"}),"\n",(0,o.jsx)(n.li,{children:"Minimal performance impact"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"testing-strategy",children:"Testing Strategy"}),"\n",(0,o.jsx)(n.h3,{id:"test-cases-covered",children:"Test Cases Covered"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Working Session Tooltip Stability"}),": Hover over working session blocks \u2192 tooltip should appear and remain stable"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Planned Task Tooltip Unchanged"}),": Hover over planned tasks \u2192 tooltips should work exactly as before"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Rapid Mouse Movement"}),": Quickly move mouse in/out of blocks \u2192 no flickering"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Edge Cases"}),": Move between adjacent blocks \u2192 tooltips should transition smoothly"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Performance"}),": Extended usage \u2192 no memory leaks or performance degradation"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"browser-testing",children:"Browser Testing"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u2705 Chrome/Chromium"}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Firefox"}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Safari"}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Edge"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"lessons-learned",children:"Lessons Learned"}),"\n",(0,o.jsxs)(n.h3,{id:"1-css-and-javascript-interaction",children:["1. ",(0,o.jsx)(n.strong,{children:"CSS and JavaScript Interaction"})]}),"\n",(0,o.jsx)(n.p,{children:"CSS hover effects can create unexpected interactions with JavaScript event handling. Visual transformations need to be considered when implementing mouse-based interactions."}),"\n",(0,o.jsxs)(n.h3,{id:"2-event-timing-is-critical",children:["2. ",(0,o.jsx)(n.strong,{children:"Event Timing is Critical"})]}),"\n",(0,o.jsx)(n.p,{children:"Mouse events fire with very precise timing. Even 1px movements can trigger enter/leave events, especially when elements are being transformed."}),"\n",(0,o.jsxs)(n.h3,{id:"3-debugging-interactive-issues",children:["3. ",(0,o.jsx)(n.strong,{children:"Debugging Interactive Issues"})]}),"\n",(0,o.jsx)(n.p,{children:"Visual debugging tools may not capture rapid flickering. Sometimes the solution requires understanding the precise sequence of events rather than just the visual symptoms."}),"\n",(0,o.jsxs)(n.h3,{id:"4-debouncing-is-powerful",children:["4. ",(0,o.jsx)(n.strong,{children:"Debouncing is Powerful"})]}),"\n",(0,o.jsx)(n.p,{children:"Small delays (100ms) can solve seemingly complex interaction issues without impacting user experience."}),"\n",(0,o.jsxs)(n.h3,{id:"5-defensive-programming",children:["5. ",(0,o.jsx)(n.strong,{children:"Defensive Programming"})]}),"\n",(0,o.jsx)(n.p,{children:"Always consider edge cases in UI interactions. What seems like a simple hover effect can create complex feedback loops."}),"\n",(0,o.jsx)(n.h2,{id:"future-considerations",children:"Future Considerations"}),"\n",(0,o.jsx)(n.h3,{id:"potential-improvements",children:"Potential Improvements"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Adaptive Delay"}),": Could adjust the 100ms delay based on user's mouse movement speed"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Intelligent Positioning"}),": Could factor in CSS transforms when calculating tooltip positions"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Global Tooltip Manager"}),": For complex applications, a centralized tooltip service might prevent similar issues"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,o.jsx)(n.p,{children:"Consider adding telemetry to track:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Tooltip show/hide frequency"}),"\n",(0,o.jsx)(n.li,{children:"User interaction patterns"}),"\n",(0,o.jsx)(n.li,{children:"Performance metrics for tooltip operations"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(n.p,{children:"This bug demonstrates how seemingly simple UI interactions can create complex feedback loops when CSS animations and JavaScript event handling intersect. The solution successfully eliminates the flickering while maintaining all existing functionality through a simple but effective debouncing strategy."}),"\n",(0,o.jsx)(n.p,{children:"The key insight was recognizing that the problem wasn't in the tooltip positioning logic itself, but in the timing of show/hide operations relative to CSS hover effects. This highlights the importance of considering the complete interaction chain when debugging UI issues."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>r});var s=i(6540);const o={},l=s.createContext(o);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);