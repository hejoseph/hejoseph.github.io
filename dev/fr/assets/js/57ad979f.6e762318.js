"use strict";(self.webpackChunkmydevdocs=self.webpackChunkmydevdocs||[]).push([[8273],{2740:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"java/garbage-collector","title":"Garbage Collection","description":"Garbage Collection (GC) dans la JVM \u2013 Optimisation et Configuration","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/java/garbage-collector.md","sourceDirName":"java","slug":"/java/garbage-collector","permalink":"/dev/fr/docs/java/garbage-collector","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"java","permalink":"/dev/fr/docs/tags/java"},{"inline":true,"label":"optimization","permalink":"/dev/fr/docs/tags/optimization"},{"inline":true,"label":"garbage collection","permalink":"/dev/fr/docs/tags/garbage-collection"}],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Garbage Collection","sidebar_position":1,"tags":["java","optimization","garbage collection"]},"sidebar":"tutorialSidebar","previous":{"title":"Java","permalink":"/dev/fr/docs/category/java"},"next":{"title":"Tutorial - Basics","permalink":"/dev/fr/docs/category/tutorial---basics"}}');var s=i(4848),r=i(8453);const t={title:"Garbage Collection",sidebar_position:1,tags:["java","optimization","garbage collection"]},a=void 0,c={},d=[{value:"Garbage Collection (GC) dans la JVM \u2013 Optimisation et Configuration",id:"garbage-collection-gc-dans-la-jvm--optimisation-et-configuration",level:2},{value:"Objectif",id:"objectif",level:2},{value:"Qu&#39;est-ce que le Garbage Collection ?",id:"quest-ce-que-le-garbage-collection-",level:2},{value:"Pourquoi c&#39;est critique pour la performance ?",id:"pourquoi-cest-critique-pour-la-performance-",level:2},{value:"Types de Collecteurs de Garbage Collection",id:"types-de-collecteurs-de-garbage-collection",level:2},{value:"Comment choisir le bon GC",id:"comment-choisir-le-bon-gc",level:2},{value:"Configuration JVM recommand\xe9e",id:"configuration-jvm-recommand\xe9e",level:2},{value:"G1 GC (bon compromis entre latence et d\xe9bit)",id:"g1-gc-bon-compromis-entre-latence-et-d\xe9bit",level:3},{value:"ZGC (ultra faible latence)",id:"zgc-ultra-faible-latence",level:3},{value:"Outils de monitoring recommand\xe9s",id:"outils-de-monitoring-recommand\xe9s",level:2},{value:"Mauvaises pratiques \xe0 \xe9viter",id:"mauvaises-pratiques-\xe0-\xe9viter",level:2},{value:"Exemple m\xe9tier",id:"exemple-m\xe9tier",level:2},{value:"Cas : Application de g\xe9n\xe9ration de PDF en ligne",id:"cas--application-de-g\xe9n\xe9ration-de-pdf-en-ligne",level:3},{value:"Pour aller plus loin",id:"pour-aller-plus-loin",level:2},{value:"R\xe9sum\xe9",id:"r\xe9sum\xe9",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"garbage-collection-gc-dans-la-jvm--optimisation-et-configuration",children:"Garbage Collection (GC) dans la JVM \u2013 Optimisation et Configuration"}),"\n",(0,s.jsx)(n.h2,{id:"objectif",children:"Objectif"}),"\n",(0,s.jsx)(n.p,{children:"R\xe9duire les pauses du GC (garbage collection) dans les applications Java en choisissant un collecteur adapt\xe9 (G1, ZGC, Shenandoah), et en configurant la JVM pour maintenir un bon \xe9quilibre entre latence, d\xe9bit et consommation m\xe9moire."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"quest-ce-que-le-garbage-collection-",children:"Qu'est-ce que le Garbage Collection ?"}),"\n",(0,s.jsx)(n.p,{children:"Le Garbage Collector est un m\xe9canisme de la JVM qui :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Identifie les objets inutilis\xe9s (non r\xe9f\xe9renc\xe9s)"}),"\n",(0,s.jsx)(n.li,{children:"Lib\xe8re la m\xe9moire occup\xe9e"}),"\n",(0,s.jsx)(n.li,{children:"Peut provoquer des pauses si mal configur\xe9 (impact direct sur la latence)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pourquoi-cest-critique-pour-la-performance-",children:"Pourquoi c'est critique pour la performance ?"}),"\n",(0,s.jsx)(n.p,{children:"Dans les syst\xe8mes :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"temps r\xe9el (jeux, finances)"}),"\n",(0,s.jsx)(n.li,{children:"haute charge (web, microservices)"}),"\n",(0,s.jsx)(n.li,{children:"\xe0 faible latence (Kafka, base de donn\xe9es, batch)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Un GC mal configur\xe9 peut :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Cr\xe9er des pauses "stop-the-world" (jusqu\u2019\xe0 plusieurs secondes)'}),"\n",(0,s.jsx)(n.li,{children:"Provoquer des pics CPU"}),"\n",(0,s.jsx)(n.li,{children:"D\xe9grader la r\xe9activit\xe9 utilisateur"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"types-de-collecteurs-de-garbage-collection",children:"Types de Collecteurs de Garbage Collection"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Collecteur"}),(0,s.jsx)(n.th,{children:"Depuis"}),(0,s.jsx)(n.th,{children:"Avantages"}),(0,s.jsx)(n.th,{children:"Inconv\xe9nients"}),(0,s.jsx)(n.th,{children:"Quand l\u2019utiliser"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Serial GC"}),(0,s.jsx)(n.td,{children:"Java 1.2"}),(0,s.jsx)(n.td,{children:"Simple"}),(0,s.jsx)(n.td,{children:"Pauses longues"}),(0,s.jsx)(n.td,{children:"Petites applications"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Parallel GC"}),(0,s.jsx)(n.td,{children:"Java 1.4"}),(0,s.jsx)(n.td,{children:"Bon d\xe9bit"}),(0,s.jsx)(n.td,{children:"Pauses longues"}),(0,s.jsx)(n.td,{children:"Batch/serveurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"G1 GC"}),(0,s.jsx)(n.td,{children:"Java 9 (par d\xe9faut)"}),(0,s.jsx)(n.td,{children:"Pauses pr\xe9visibles, bon compromis"}),(0,s.jsx)(n.td,{children:"Pas id\xe9al pour tr\xe8s faible latence"}),(0,s.jsx)(n.td,{children:"Applications web, APIs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ZGC"}),(0,s.jsx)(n.td,{children:"Java 11+"}),(0,s.jsx)(n.td,{children:"Pauses < 10 ms, scalable"}),(0,s.jsx)(n.td,{children:"Moins de tuning disponible"}),(0,s.jsx)(n.td,{children:"Tr\xe8s faible latence"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Shenandoah"}),(0,s.jsx)(n.td,{children:"Java 12+ (Red Hat)"}),(0,s.jsx)(n.td,{children:"Similaire \xe0 ZGC"}),(0,s.jsx)(n.td,{children:"Moins portable"}),(0,s.jsx)(n.td,{children:"Faible latence avec HotSpot"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"comment-choisir-le-bon-gc",children:"Comment choisir le bon GC"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Besoin"}),(0,s.jsx)(n.th,{children:"Collecteur recommand\xe9"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Stabilit\xe9 et facilit\xe9 de configuration"}),(0,s.jsx)(n.td,{children:"G1 GC"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Ultra faible latence (",(0,s.jsx)(n.code,{children:"<10 ms"}),")"]}),(0,s.jsx)(n.td,{children:"ZGC ou Shenandoah"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"D\xe9bit maximal (batch processing)"}),(0,s.jsx)(n.td,{children:"Parallel GC"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"configuration-jvm-recommand\xe9e",children:"Configuration JVM recommand\xe9e"}),"\n",(0,s.jsx)(n.h3,{id:"g1-gc-bon-compromis-entre-latence-et-d\xe9bit",children:"G1 GC (bon compromis entre latence et d\xe9bit)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"-XX:+UseG1GC\r\n-XX:MaxGCPauseMillis=200\r\n-XX:InitiatingHeapOccupancyPercent=45\r\n-XX:+ParallelRefProcEnabled\r\n-Xms2g -Xmx4g\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"MaxGCPauseMillis : cible de dur\xe9e maximale de pause"}),"\n",(0,s.jsx)(n.li,{children:"InitiatingHeapOccupancyPercent : seuil de d\xe9clenchement du GC"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"zgc-ultra-faible-latence",children:"ZGC (ultra faible latence)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"-XX:+UseZGC\r\n-Xmx4g -Xms4g\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Id\xe9al pour les syst\xe8mes sensibles \xe0 la latence (finance, streaming)"}),"\n",(0,s.jsx)(n.li,{children:"Requiert Java 11+"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"outils-de-monitoring-recommand\xe9s",children:"Outils de monitoring recommand\xe9s"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Outil"}),(0,s.jsx)(n.th,{children:"Utilisation"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"JVisualVM / JConsole"}),(0,s.jsx)(n.td,{children:"Visualisation des pauses GC et des g\xe9n\xe9rations"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Logs GC (",(0,s.jsx)(n.code,{children:"-Xlog:gc*"}),")"]}),(0,s.jsx)(n.td,{children:"Analyse d\xe9taill\xe9e des cycles de GC"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Java Flight Recorder (JFR)"}),(0,s.jsx)(n.td,{children:"Profilage d\xe9taill\xe9 de la JVM"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Prometheus + Grafana"}),(0,s.jsx)(n.td,{children:"Monitoring en temps r\xe9el des m\xe9triques JVM"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"mauvaises-pratiques-\xe0-\xe9viter",children:"Mauvaises pratiques \xe0 \xe9viter"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Mauvaise pratique"}),(0,s.jsx)(n.th,{children:"Cons\xe9quence"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ignorer les logs GC"}),(0,s.jsx)(n.td,{children:"Comportement du GC non observable"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Utiliser un GC inadapt\xe9 au contexte"}),(0,s.jsx)(n.td,{children:"Longues pauses, performances impr\xe9visibles"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Mauvais dimensionnement du heap"}),(0,s.jsx)(n.td,{children:"Trop petit \u2192 GC fr\xe9quent, trop grand \u2192 temps de scan"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trop d\u2019allocations \xe9ph\xe9m\xe8res"}),(0,s.jsx)(n.td,{children:"Surcharge des GC mineurs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Utilisation de ",(0,s.jsx)(n.code,{children:"finalize()"})]}),(0,s.jsx)(n.td,{children:"Ralentit le GC, m\xe9thode obsol\xe8te"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"exemple-m\xe9tier",children:"Exemple m\xe9tier"}),"\n",(0,s.jsx)(n.h3,{id:"cas--application-de-g\xe9n\xe9ration-de-pdf-en-ligne",children:"Cas : Application de g\xe9n\xe9ration de PDF en ligne"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Probl\xe8me : Pic d\u2019objets temporaires (~100 MB par g\xe9n\xe9ration)"}),"\n",(0,s.jsx)(n.li,{children:"Effet : GC fr\xe9quent, pauses visibles c\xf4t\xe9 utilisateur"}),"\n",(0,s.jsxs)(n.li,{children:["Solution :","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Passage \xe0 G1 GC"}),"\n",(0,s.jsxs)(n.li,{children:["-XX",":MaxGCPauseMillis","=150"]}),"\n",(0,s.jsx)(n.li,{children:"R\xe9duction des allocations temporaires (r\xe9utilisation de buffers)"}),"\n",(0,s.jsx)(n.li,{children:"Mise en place de Prometheus + Grafana pour suivi JVM"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pour-aller-plus-loin",children:"Pour aller plus loin"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://openjdk.org/jeps/333",children:"JEP 333: ZGC"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://openjdk.org/jeps/318",children:"JEP 318: Epsilon GC (sans GC, pour tests)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html",children:"JVM GC Tuning Guide - Oracle"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"r\xe9sum\xe9",children:"R\xe9sum\xe9"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Le Garbage Collector est essentiel \xe0 la stabilit\xe9 de la JVM"}),"\n",(0,s.jsx)(n.li,{children:"Le choix du GC d\xe9pend de ton objectif (latence ou d\xe9bit)"}),"\n",(0,s.jsx)(n.li,{children:"G1 GC est un bon choix par d\xe9faut"}),"\n",(0,s.jsx)(n.li,{children:"ZGC ou Shenandoah conviennent aux syst\xe8mes \xe0 latence tr\xe8s faible"}),"\n",(0,s.jsx)(n.li,{children:"Toujours monitorer les cycles de GC en production"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var l=i(6540);const s={},r=l.createContext(s);function t(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);