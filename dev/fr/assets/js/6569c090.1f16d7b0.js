"use strict";(self.webpackChunkmydevdocs=self.webpackChunkmydevdocs||[]).push([[5805],{1196:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Portfolio/NoteApp/Api/authentication","title":"Authentication System","description":"Overview","source":"@site/docs/Portfolio/NoteApp/Api/authentication.md","sourceDirName":"Portfolio/NoteApp/Api","slug":"/Portfolio/NoteApp/Api/authentication","permalink":"/dev/fr/docs/Portfolio/NoteApp/Api/authentication","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Notes App - Project Introduction","permalink":"/dev/fr/docs/Portfolio/NoteApp/introduction"},"next":{"title":"API Endpoints","permalink":"/dev/fr/docs/Portfolio/NoteApp/Api/endpoints"}}');var i=s(4848),t=s(8453);const o={},l="Authentication System",c={},d=[{value:"Overview",id:"overview",level:2},{value:"What is JWT Authentication?",id:"what-is-jwt-authentication",level:2},{value:"Authentication Components",id:"authentication-components",level:2},{value:"Environment Configuration",id:"environment-configuration",level:3},{value:"Authentication Middleware",id:"authentication-middleware",level:3},{value:"How the Middleware Works",id:"how-the-middleware-works",level:4},{value:"Key Concepts Explained",id:"key-concepts-explained",level:4},{value:"Authentication Flow",id:"authentication-flow",level:2},{value:"User Registration",id:"user-registration",level:3},{value:"Registration Process",id:"registration-process",level:4},{value:"Token Generation Details",id:"token-generation-details",level:4},{value:"User Login",id:"user-login",level:3},{value:"Login Process",id:"login-process",level:4},{value:"Protected Endpoints",id:"protected-endpoints",level:2},{value:"How Protection Works",id:"how-protection-works",level:3},{value:"Client-Side Token Usage",id:"client-side-token-usage",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Current Implementation Issues",id:"current-implementation-issues",level:3},{value:"Security Features Present",id:"security-features-present",level:3},{value:"Connection to Other Components",id:"connection-to-other-components",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"authentication-system",children:"Authentication System"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The Notes App implements a JWT (JSON Web Token) based authentication system that secures user accounts and protects API endpoints. This system ensures that only authenticated users can access their personal notes and account information."}),"\n",(0,i.jsx)(n.h2,{id:"what-is-jwt-authentication",children:"What is JWT Authentication?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"JWT (JSON Web Token)"})," is a compact, URL-safe token format used for securely transmitting information between parties. In this application:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Stateless"}),": The server doesn't need to store session information"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Self-contained"}),": The token contains all necessary user information"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Secure"}),": Tokens are signed with a secret key to prevent tampering"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"authentication-components",children:"Authentication Components"}),"\n",(0,i.jsx)(n.h3,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": ",(0,i.jsx)(n.code,{children:"backend/.env"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ACCESS_TOKEN_SECRET=9IRZS+s861Z9W6YwDLFGFBrkG0WcWyqWnGC8WiuKp/E=\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ACCESS_TOKEN_SECRET"})," is a cryptographic key used to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sign tokens"})," when they are created"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify tokens"})," when they are received"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ensure token integrity"})," by detecting tampering"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"authentication-middleware",children:"Authentication Middleware"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": ",(0,i.jsx)(n.code,{children:"backend/utilities.js"})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"authenticateToken"})," function is ",(0,i.jsx)(n.strong,{children:"middleware"})," - code that runs between receiving a request and sending a response."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'function authenticateToken(req, res, next) {\r\n  const authHeader = req.headers["authorization"];\r\n  const token = authHeader && authHeader.split(" ")[1];\r\n\r\n  if(!token) return res.sendStatus(401);\r\n  jwt.verify(token, process.env.ACCESS_TOKEN_SECRET, (err, user) => {\r\n    if(err) return res.sendStatus(401);\r\n    req.user = user;\r\n    next();\r\n  });\r\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"how-the-middleware-works",children:"How the Middleware Works"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Extract Authorization Header"}),": Gets the ",(0,i.jsx)(n.code,{children:"Authorization"})," header from the HTTP request"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parse Token"}),': Splits the header value and extracts the token (format: "Bearer <token>")']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check Token Presence"}),": Returns 401 (Unauthorized) if no token is provided"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify Token"}),": Uses JWT library to verify the token with the secret key"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle Verification"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If verification fails: Returns 401 (Unauthorized)"}),"\n",(0,i.jsxs)(n.li,{children:["If successful: Adds user data to ",(0,i.jsx)(n.code,{children:"req.user"})," and calls ",(0,i.jsx)(n.code,{children:"next()"})," to continue"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"key-concepts-explained",children:"Key Concepts Explained"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'req.headers["authorization"]'})}),": Accesses the Authorization HTTP header"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'authHeader.split(" ")[1]'})}),': Splits "Bearer token123" and takes the second part (token123)']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"res.sendStatus(401)"})}),": Sends HTTP 401 Unauthorized status"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"req.user = user"})}),": Attaches decoded user information to the request object"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"next()"})}),": Passes control to the next middleware or route handler"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"authentication-flow",children:"Authentication Flow"}),"\n",(0,i.jsx)(n.h3,{id:"user-registration",children:"User Registration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /create-account"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'app.post("/create-account", async (req, res) => {\r\n  const { fullName, email, password } = req.body;\r\n  \r\n  // Validation checks...\r\n  \r\n  const user = new User({\r\n    fullName,\r\n    email,\r\n    password,\r\n  });\r\n\r\n  await user.save();\r\n\r\n  const accessToken = jwt.sign({ user }, process.env.ACCESS_TOKEN_SECRET, {\r\n    expiresIn: "36000m",\r\n  });\r\n\r\n  return res.json({\r\n    error: false,\r\n    user,\r\n    accessToken,\r\n    message: "Registration Successful",\r\n  });\r\n});\n'})}),"\n",(0,i.jsx)(n.h4,{id:"registration-process",children:"Registration Process"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Extract user data"})," from request body"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validate required fields"})," (fullName, email, password)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check for existing user"})," with the same email"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create new user"})," in database"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Generate JWT token"})," containing user information"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Return token and user data"})," to client"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"token-generation-details",children:"Token Generation Details"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"jwt.sign({ user }, secret, options)"})}),": Creates a signed token"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Payload"}),": ",(0,i.jsx)(n.code,{children:"{ user }"})," - Contains user information"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Secret"}),": Environment variable for signing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Expiration"}),": ",(0,i.jsx)(n.code,{children:'"36000m"'})," - Token expires in 36,000 minutes (25 days)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"user-login",children:"User Login"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /login"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'app.post("/login", async (req, res) => {\r\n  const { email, password } = req.body;\r\n  \r\n  // Validation...\r\n  \r\n  const userInfo = await User.findOne({ email: email });\r\n  \r\n  if (userInfo.email == email && userInfo.password == password) {\r\n    const user = { user: userInfo };\r\n    const accessToken = jwt.sign(user, process.env.ACCESS_TOKEN_SECRET, {\r\n      expiresIn: "36000m",\r\n    });\r\n\r\n    return res.json({\r\n      error: false,\r\n      message: "Login Successful",\r\n      email,\r\n      accessToken,\r\n    });\r\n  }\r\n});\n'})}),"\n",(0,i.jsx)(n.h4,{id:"login-process",children:"Login Process"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Extract credentials"})," from request body"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Find user"})," in database by email"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compare passwords"})," (plain text comparison - security issue)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Generate new JWT token"})," if credentials match"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Return token"})," for future authenticated requests"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"protected-endpoints",children:"Protected Endpoints"}),"\n",(0,i.jsxs)(n.p,{children:["All note-related endpoints use the ",(0,i.jsx)(n.code,{children:"authenticateToken"})," middleware:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'app.get("/get-user", authenticateToken, async (req, res) => {\r\n  const { user } = req.user; // User data from verified token\r\n  // ... endpoint logic\r\n});\r\n\r\napp.post("/add-note", authenticateToken, async (req, res) => {\r\n  const { user } = req.user; // Access authenticated user\r\n  // ... create note for this user\r\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"how-protection-works",children:"How Protection Works"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Client sends request"})," with ",(0,i.jsx)(n.code,{children:"Authorization: Bearer &lt;token>"})," header"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Middleware runs first"})," before the endpoint handler"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Token is verified"})," and user data extracted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Request continues"})," to endpoint with ",(0,i.jsx)(n.code,{children:"req.user"})," populated"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint uses user data"})," to ensure data isolation"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"client-side-token-usage",children:"Client-Side Token Usage"}),"\n",(0,i.jsx)(n.p,{children:"The frontend must include the token in API requests:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Example request format\r\nheaders: {\r\n  'Authorization': `Bearer ${accessToken}`,\r\n  'Content-Type': 'application/json'\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsx)(n.h3,{id:"current-implementation-issues",children:"Current Implementation Issues"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Plain text passwords"}),": Passwords stored without hashing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Long token expiration"}),": 25-day expiration may be excessive"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No password complexity requirements"}),": Weak passwords allowed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No rate limiting"}),": No protection against brute force attacks"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"security-features-present",children:"Security Features Present"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Token-based authentication"}),": Stateless and scalable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data isolation"}),": Users can only access their own data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Secret key protection"}),": Token signing key stored in environment variables"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authorization header"}),": Standard HTTP authentication method"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"connection-to-other-components",children:"Connection to Other Components"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database Models"}),": Authentication creates and validates User records"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API Endpoints"}),": All note operations require authentication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend"}),": Must store and send tokens with requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Middleware"}),": Runs before protected endpoints to verify identity"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);