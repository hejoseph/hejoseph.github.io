"use strict";(self.webpackChunkmydevdocs=self.webpackChunkmydevdocs||[]).push([[4541],{875:e=>{e.exports=JSON.parse('{"permalink":"/dev/fr/blog/pourquoi-facebook-meta-n-utilise-pas-git","source":"@site/i18n/fr/docusaurus-plugin-content-blog/2024-03-06-git-not-enough.md","title":"Pourquoi Facebook (Meta) a-t-il dit \\"non\\" \xe0 Git ? Une histoire de scaling, de communaut\xe9 et de monorepos g\xe9ants","description":"Pourquoi Facebook (Meta) a-t-il dit \\"non\\" \xe0 Git ? Une histoire de scaling, de communaut\xe9 et de monorepos g\xe9ants","date":"2024-03-06T00:00:00.000Z","tags":[{"inline":false,"label":"Facebook","permalink":"/dev/fr/blog/tags/facebook","description":"Facebook tag description"},{"inline":true,"label":"meta","permalink":"/dev/fr/blog/tags/meta"},{"inline":true,"label":"git","permalink":"/dev/fr/blog/tags/git"},{"inline":true,"label":"mercurial","permalink":"/dev/fr/blog/tags/mercurial"},{"inline":true,"label":"monorepo","permalink":"/dev/fr/blog/tags/monorepo"},{"inline":true,"label":"performance","permalink":"/dev/fr/blog/tags/performance"},{"inline":true,"label":"devops","permalink":"/dev/fr/blog/tags/devops"},{"inline":true,"label":"version-control","permalink":"/dev/fr/blog/tags/version-control"}],"readingTime":6.54,"hasTruncateMarker":false,"authors":[{"name":"Joseph HE","title":"Ing\xe9nieur Logiciel","url":"https://hejoseph.com","page":{"permalink":"/dev/fr/blog/authors/joseph"},"socials":{"github":"https://github.com/hejoseph"},"imageURL":"https://github.com/hejoseph.png","key":"joseph"}],"frontMatter":{"slug":"pourquoi-facebook-meta-n-utilise-pas-git","title":"Pourquoi Facebook (Meta) a-t-il dit \\"non\\" \xe0 Git ? Une histoire de scaling, de communaut\xe9 et de monorepos g\xe9ants","authors":["joseph"],"tags":["facebook","meta","git","mercurial","monorepo","performance","devops","version-control"]},"unlisted":false,"prevItem":{"title":"Les dangers cach\xe9s du C - D\xe9cortiquer les risques li\xe9s \xe0 la gestion de la m\xe9moire","permalink":"/dev/fr/blog/c-gestion-memoire-risques-dangers-caches"}}')},2490:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>u});var i=t(875),o=t(4848),a=t(8453);const s={slug:"pourquoi-facebook-meta-n-utilise-pas-git",title:'Pourquoi Facebook (Meta) a-t-il dit "non" \xe0 Git ? Une histoire de scaling, de communaut\xe9 et de monorepos g\xe9ants',authors:["joseph"],tags:["facebook","meta","git","mercurial","monorepo","performance","devops","version-control"]},r=void 0,l={authorsImageUrls:[void 0]},u=[{value:"Pourquoi Facebook (Meta) a-t-il dit &quot;non&quot; \xe0 Git ? Une histoire de scaling, de communaut\xe9 et de monorepos g\xe9ants",id:"pourquoi-facebook-meta-a-t-il-dit-non-\xe0-git--une-histoire-de-scaling-de-communaut\xe9-et-de-monorepos-g\xe9ants",level:2},{value:"L&#39;\xe9tonnante absence de Git chez Meta",id:"l\xe9tonnante-absence-de-git-chez-meta",level:3},{value:"Le mythe de la complexit\xe9 de Git (et pourquoi ce n&#39;\xe9tait pas la raison principale)",id:"le-mythe-de-la-complexit\xe9-de-git-et-pourquoi-ce-n\xe9tait-pas-la-raison-principale",level:3},{value:"Le cauchemar du scaling en 2012 : Quand Git a atteint ses limites",id:"le-cauchemar-du-scaling-en-2012--quand-git-a-atteint-ses-limites",level:3},{value:"L&#39;appel \xe0 l&#39;aide et la r\xe9ponse surprenante des mainteneurs de Git",id:"lappel-\xe0-laide-et-la-r\xe9ponse-surprenante-des-mainteneurs-de-git",level:3},{value:"Mercurial : L&#39;alternative inattendue et son architecture propre",id:"mercurial--lalternative-inattendue-et-son-architecture-propre",level:3},{value:"La migration interne : Une masterclass en gestion du changement",id:"la-migration-interne--une-masterclass-en-gestion-du-changement",level:3},{value:"L&#39;h\xe9ritage de la d\xe9cision de Facebook : Stack Diffs et un Mercurial am\xe9lior\xe9",id:"lh\xe9ritage-de-la-d\xe9cision-de-facebook--stack-diffs-et-un-mercurial-am\xe9lior\xe9",level:3},{value:"Le facteur humain et l&#39;\xe9volution constante de la technologie",id:"le-facteur-humain-et-l\xe9volution-constante-de-la-technologie",level:3}];function c(e){const n={h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"pourquoi-facebook-meta-a-t-il-dit-non-\xe0-git--une-histoire-de-scaling-de-communaut\xe9-et-de-monorepos-g\xe9ants",children:'Pourquoi Facebook (Meta) a-t-il dit "non" \xe0 Git ? Une histoire de scaling, de communaut\xe9 et de monorepos g\xe9ants'}),"\n",(0,o.jsx)(n.p,{children:"Dans le monde du d\xe9veloppement logiciel, Git est omnipr\xe9sent. C'est l'outil par d\xe9faut pour des millions de d\xe9veloppeurs et de projets, une \xe9vidence presque \"aussi courante que l'eau\", comme le souligne l'auteur de notre source. On le per\xe7oit comme la seule solution viable pour g\xe9rer le code. Alors imaginez la surprise de d\xe9couvrir que Facebook (aujourd'hui Meta), l'une des plus grandes entreprises technologiques du monde, n'utilise pas Git comme syst\xe8me de contr\xf4le de version principal pour ses immenses monorepos."}),"\n",(0,o.jsx)(n.p,{children:"C'est une histoire fascinante qui met en lumi\xe8re des d\xe9fis d'ing\xe9nierie \xe0 une \xe9chelle colossale, les limites d'outils populaires, et l'importance cruciale des facteurs humains dans les d\xe9cisions technologiques. Plongeons dans les raisons pour lesquelles Meta a choisi un chemin diff\xe9rent."}),"\n",(0,o.jsx)(n.h3,{id:"l\xe9tonnante-absence-de-git-chez-meta",children:"L'\xe9tonnante absence de Git chez Meta"}),"\n",(0,o.jsx)(n.p,{children:"Pour beaucoup, l'id\xe9e que Facebook ne tourne pas sous Git est contre-intuitive. L'auteur, dont l'exp\xe9rience personnelle des syst\xe8mes de contr\xf4le de version a commenc\xe9 avec SVN avant l'explosion de Git, confesse sa propre surprise : \"Throughout my life a git was common as water it was so common in fact that I assumed it was the only viable tool for creating and managing code changes\". Il raconte comment les ing\xe9nieurs de Facebook qu'il a rencontr\xe9s \xe9taient \"deeply trained on material patterns and Facebook stack diffs workflow\" plut\xf4t que sur Git."}),"\n",(0,o.jsx)(n.p,{children:"Historiquement, m\xeame Google, dont l'ing\xe9nierie \"predates git by over 5 years,\" utilise son propre syst\xe8me interne. Mais pour Facebook, c'\xe9tait une d\xe9cision plus active et r\xe9cente."}),"\n",(0,o.jsx)(n.h3,{id:"le-mythe-de-la-complexit\xe9-de-git-et-pourquoi-ce-n\xe9tait-pas-la-raison-principale",children:"Le mythe de la complexit\xe9 de Git (et pourquoi ce n'\xe9tait pas la raison principale)"}),"\n",(0,o.jsx)(n.p,{children:"Avant d'aborder les vraies raisons, il est int\xe9ressant de noter que la \"difficult\xe9\" per\xe7ue de Git n'\xe9tait pas le moteur de cette d\xe9cision. L'auteur lui-m\xeame s'interroge : \"I've never understood this kind of commenting get is so confusing how is G confusing like what about git is confusing\". Il attribue souvent cette confusion \xe0 un manque d'apprentissage fondamental, sugg\xe9rant que \"most of you have just never taking taken the two hours of time it takes to learn get well enough to not be confused by any of it.\""}),"\n",(0,o.jsx)(n.p,{children:"Non, la raison du virage de Facebook \xe9tait bien plus profonde et technique."}),"\n",(0,o.jsx)(n.h3,{id:"le-cauchemar-du-scaling-en-2012--quand-git-a-atteint-ses-limites",children:"Le cauchemar du scaling en 2012 : Quand Git a atteint ses limites"}),"\n",(0,o.jsx)(n.p,{children:'Le v\xe9ritable point de rupture s\'est produit autour de 2012. \xc0 cette \xe9poque, la base de code de Facebook \xe9tait d\xe9j\xe0 "many times larger than even the Linux kernel" (qui comptait 17 millions de lignes et 44 000 fichiers). Avec une croissance exponentielle, Git a commenc\xe9 \xe0 montrer des signes de faiblesse significatifs pour les op\xe9rations sur un monorepo aussi gigantesque.'}),"\n",(0,o.jsx)(n.p,{children:'Le goulot d\'\xe9tranglement cl\xe9 ? Le processus de "statting" (v\xe9rification de l\'\xe9tat) de tous les fichiers. "G examines every file and naturally becomes slower and slower as the number of files increase." Les op\xe9rations Git de base, loin d\'\xeatre "crippling slow," \xe9taient suffisamment lentes pour justifier une enqu\xeate approfondie. Les simulations \xe9taient "horrifying," montrant que de simples commandes Git pourraient prendre "over 45 minutes to complete" \xe0 mesure que la base de code continuait de cro\xeetre. C\'\xe9tait intenable pour des milliers d\'ing\xe9nieurs.'}),"\n",(0,o.jsx)(n.h3,{id:"lappel-\xe0-laide-et-la-r\xe9ponse-surprenante-des-mainteneurs-de-git",children:"L'appel \xe0 l'aide et la r\xe9ponse surprenante des mainteneurs de Git"}),"\n",(0,o.jsx)(n.p,{children:"Face \xe0 ces d\xe9fis, l'\xe9quipe de Facebook a fait ce que beaucoup d'entreprises technologiques auraient fait : elle a contact\xe9 les mainteneurs de Git. Leur objectif \xe9tait de collaborer pour \xe9tendre Git et mieux prendre en charge les grands monorepos."}),"\n",(0,o.jsx)(n.p,{children:'Cependant, la r\xe9ponse a \xe9t\xe9 inattendue et, selon l\'auteur, "wasn\'t cooperative." Les mainteneurs de Git "pushed back on improving performance and instead recommended that Facebook shared the uh Shard their monor repo" (diviser leur monorepo en plusieurs d\xe9p\xf4ts).'}),"\n",(0,o.jsx)(n.p,{children:'Cette suggestion, bien que techniquement possible, \xe9tait un "non-starter" pour Facebook. Ils avaient investi massivement dans un workflow de monorepo et la complexit\xe9 d\'une telle fragmentation aurait \xe9t\xe9 \xe9norme. Plus surprenant encore, Facebook s\'attendait \xe0 ce que leur offre de "free open source labor by a major tech company is well received," une opportunit\xe9 d\'am\xe9liorer un projet open source largement utilis\xe9. Le manque de coop\xe9ration a \xe9t\xe9 un facteur d\xe9cisif.'}),"\n",(0,o.jsx)(n.h3,{id:"mercurial--lalternative-inattendue-et-son-architecture-propre",children:"Mercurial : L'alternative inattendue et son architecture propre"}),"\n",(0,o.jsx)(n.p,{children:'Face aux limitations de Git et au manque de soutien pour les monorepos massifs, Facebook a explor\xe9 des alternatives. En 2012, les options \xe9taient "scarce". Perforce a \xe9t\xe9 \xe9cart\xe9 en raison de d\xe9fauts architecturaux per\xe7us. C\'est l\xe0 que Mercurial est entr\xe9 en sc\xe8ne.'}),"\n",(0,o.jsx)(n.p,{children:'Mercurial avait des performances "similar to git," mais poss\xe9dait une architecture bien plus propre. Alors que Git \xe9tait une "complex web of bash and C code," Mercurial \xe9tait "engineered in Python using object-oriented code patterns and was designed to be extensible." Cette extensibilit\xe9 \xe9tait cruciale.'}),"\n",(0,o.jsx)(n.p,{children:"L'\xe9quipe a d\xe9cid\xe9 d'assister \xe0 un hackathon Mercurial \xe0 Amsterdam. Ce qu'ils ont d\xe9couvert n'\xe9tait pas seulement un syst\xe8me flexible, mais aussi \"a community of maintainers who were impressively welcoming to aggressive changes by the Facebook team.\" C'\xe9tait le contraste parfait avec leur exp\xe9rience pr\xe9c\xe9dente."}),"\n",(0,o.jsx)(n.h3,{id:"la-migration-interne--une-masterclass-en-gestion-du-changement",children:"La migration interne : Une masterclass en gestion du changement"}),"\n",(0,o.jsx)(n.p,{children:'Convaincre l\'ensemble de l\'organisation d\'ing\xe9nierie de migrer de Git vers Mercurial \xe9tait une t\xe2che "intimidating." Les ing\xe9nieurs peuvent \xeatre "extremely sensitive about tooling changes." Pourtant, ce qui a suivi "sounds like a masterclass in internal Dev tools migrations."'}),"\n",(0,o.jsx)(n.p,{children:"L'\xe9quipe a m\xe9thodiquement :"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Socialis\xe9 l'id\xe9e :"})," Communiquer la n\xe9cessit\xe9 et les avantages."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Document\xe9 les workflows :"})," S'assurer que chacun savait comment utiliser le nouvel outil."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\xc9cout\xe9 les pr\xe9occupations :"})," Permettre aux d\xe9veloppeurs d'exprimer leurs doutes."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Bascul\xe9 en force :"})," Couper le cordon avec Git une fois que le terrain \xe9tait pr\xeat."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Le succ\xe8s de cette migration massive est \xe9galement attribu\xe9, avec une pointe d'ironie, au fait que peu d'ing\xe9nieurs de Facebook connaissaient Git en profondeur. Comme l'auteur le note, \"it's not even a big deal\" de changer d'outil si les ing\xe9nieurs ne sont pas attach\xe9s \xe0 des subtilit\xe9s sp\xe9cifiques de Git."}),"\n",(0,o.jsx)(n.h3,{id:"lh\xe9ritage-de-la-d\xe9cision-de-facebook--stack-diffs-et-un-mercurial-am\xe9lior\xe9",children:"L'h\xe9ritage de la d\xe9cision de Facebook : Stack Diffs et un Mercurial am\xe9lior\xe9"}),"\n",(0,o.jsx)(n.p,{children:"La d\xe9cision de Facebook n'a pas \xe9t\xe9 sans cons\xe9quences pour l'\xe9cosyst\xe8me open source :"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Mercurial am\xe9lior\xe9 :"}),' Facebook a "contributed performance improvements to Mercurial making it the best option for large monor repos."']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:'Les "Stack Diffs" :'}),' S\'appuyant sur les concepts de Mercurial, Facebook a cr\xe9\xe9 un workflow innovant de revue de code appel\xe9 "stack diffs" (diffs empil\xe9s). Cela a "unlocking novel code review parall parallelization" et a r\xe9volutionn\xe9 leur processus de d\xe9veloppement. Des ex-ing\xe9nieurs de Facebook ont export\xe9 ce workflow vers d\'autres entreprises, cr\xe9ant un "small but vocal Cult of Stack diff Enthusiast," inspirant m\xeame l\'auteur \xe0 cr\xe9er des outils comme Graphite.']}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"le-facteur-humain-et-l\xe9volution-constante-de-la-technologie",children:"Le facteur humain et l'\xe9volution constante de la technologie"}),"\n",(0,o.jsx)(n.p,{children:"En fin de compte, l'histoire de Facebook et de Git est un rappel poignant que \"so many of History's key technical decisions are human driven not technology driven.\" La r\xe9ceptivit\xe9 d'une communaut\xe9, l'adaptabilit\xe9 d'une \xe9quipe et la capacit\xe9 \xe0 collaborer peuvent l'emporter sur des avantages techniques per\xe7us."}),"\n",(0,o.jsx)(n.p,{children:"Il est \xe9galement crucial de noter que le paysage a \xe9volu\xe9. \"A decade later GI has made significant improvements to support monor repos... today get now with some knowledge of how to do it operates well with really really large repos now.\" Git a progress\xe9, et il est possible qu'il puisse aujourd'hui g\xe9rer les besoins de Facebook."}),"\n",(0,o.jsx)(n.p,{children:"L'histoire de Facebook est celle d'une entreprise qui a d\xfb s'adapter \xe0 une croissance fulgurante. Face aux limites de performance d'un outil pourtant dominant, et \xe0 une communaut\xe9 qui n'\xe9tait pas pr\xeate \xe0 soutenir ses besoins sp\xe9cifiques \xe0 l'\xe9poque, ils ont fait un choix pragmatique. Ce n'\xe9tait pas un rejet de Git en soi, mais une r\xe9ponse \xe0 un probl\xe8me de scaling unique, r\xe9solue avec une solution innovante, et un t\xe9moignage du pouvoir des d\xe9cisions humaines dans l'ing\xe9nierie \xe0 grande \xe9chelle."})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const o={},a=i.createContext(o);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);